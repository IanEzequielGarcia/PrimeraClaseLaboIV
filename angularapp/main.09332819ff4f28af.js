"use strict";(self.webpackChunkPrimeraClase=self.webpackChunkPrimeraClase||[]).push([[179],{2011:(nt,Ce,k)=>{k.d(Ce,{hO:()=>He,xv:()=>ue,Dh:()=>ce,GT:()=>pe,cc:()=>Te,on:()=>B,pX:()=>J});var g=k(5e3),Z=k(127),O=k(5813);nt=k.hmd(nt);const ae=["ngOnDestroy"],J=(Ee,Ze,Ge,De={})=>new Proxy(Ee,{get:(_e,ve)=>Ge.runOutsideAngular(()=>{var je;if(Ee[ve])return(null===(je=null==De?void 0:De.spy)||void 0===je?void 0:je.get)&&De.spy.get(ve,Ee[ve]),Ee[ve];if(ae.indexOf(ve)>-1)return()=>{};const Ue=Ze.toPromise().then(ee=>{const q=ee&&ee[ve];return"function"==typeof q?q.bind(ee):q&&q.then?q.then(te=>Ge.run(()=>te)):Ge.run(()=>q)});return new Proxy(()=>{},{get:(ee,q)=>Ue[q],apply:(ee,q,te)=>Ue.then(ge=>{var ne;const Me=ge&&ge(...te);return(null===(ne=null==De?void 0:De.spy)||void 0===ne?void 0:ne.apply)&&De.spy.apply(ve,te,Me),Me})})})}),pe=(Ee,Ze)=>{Ze.forEach(Ge=>{Object.getOwnPropertyNames(Ge.prototype||Ge).forEach(De=>{Object.defineProperty(Ee.prototype,De,Object.getOwnPropertyDescriptor(Ge.prototype||Ge,De))})})};class se{constructor(Ze){return Ze}}const ce=new g.OlP("angularfire2.app.options"),ue=new g.OlP("angularfire2.app.name");function B(Ee,Ze,Ge){const _e="object"==typeof Ge&&Ge||{};_e.name=_e.name||"string"==typeof Ge&&Ge||"[DEFAULT]";const je=Z.Z.apps.filter(Ue=>Ue&&Ue.name===_e.name)[0]||Ze.runOutsideAngular(()=>Z.Z.initializeApp(Ee,_e));try{JSON.stringify(Ee)!==JSON.stringify(je.options)&&j("error",`${je.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ue){}return new se(je)}const j=(Ee,...Ze)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Ze)},Q={provide:se,useFactory:B,deps:[ce,g.R0b,[new g.FiY,ue]]};let He=(()=>{class Ee{constructor(Ge){Z.Z.registerVersion("angularfire",O.q4.full,"core"),Z.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Z.Z.registerVersion("angular",g.q4F.full,Ge.toString())}static initializeApp(Ge,De){return{ngModule:Ee,providers:[{provide:ce,useValue:Ge},{provide:ue,useValue:De}]}}}return Ee.\u0275fac=function(Ge){return new(Ge||Ee)(g.LFG(g.Lbi))},Ee.\u0275mod=g.oAB({type:Ee}),Ee.\u0275inj=g.cJS({providers:[Q]}),Ee})();function Te(Ee,Ze,Ge,De,_e){const[,ve,je]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===Ee)||[];if(ve)return function xe(Ee,Ze){try{return Ee.toString()===Ze.toString()}catch(Ge){return Ee===Ze}}(_e,je)||(de("error",`${Ze} was already initialized on the ${Ge} Firebase App with different settings.${ke?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:_e,was:je})),ve;{const Ue=De();return globalThis.\u0275AngularfireInstanceCache.push([Ee,Ue,_e]),Ue}}const ke=!!nt.hot,de=(Ee,...Ze)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(nt,Ce,k)=>{k.d(Ce,{q4:()=>vl,iC:()=>wl,HU:()=>El,vb:()=>xh,JM:()=>ga});var g=k(5e3),Z=k(5867),O=k(5861),ae=k(9681),J=k(2090),pe=k(4859),se=k(1877);const ce="@firebase/installations",j="w:0.5.7",Q="FIS_v2",Ee=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(D){return D instanceof J.ZR&&D.code.includes("request-failed")}function Ge({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function De(D){return{token:D.token,requestStatus:2,expiresIn:te(D.expiresIn),creationTime:Date.now()}}function _e(D,b){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return Ee.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Ue(D,{refreshToken:b}){const M=je(D);return M.append("Authorization",function ge(D){return`${Q} ${D}`}(b)),M}function ee(D){return q.apply(this,arguments)}function q(){return(q=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function te(D){return Number(D.replace("s","000"))}function ne(D,b){return Me.apply(this,arguments)}function Me(){return(Me=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:M}){const F=Ge(D),z=je(D),X=b.getImmediate({optional:!0});if(X){const mt=yield X.getHeartbeatsHeader();mt&&z.append("x-firebase-client",mt)}const ze={method:"POST",headers:z,body:JSON.stringify({fid:M,authVersion:Q,appId:D.appId,sdkVersion:j})},Xe=yield ee(()=>fetch(F,ze));if(Xe.ok){const mt=yield Xe.json();return{fid:mt.fid||M,registrationStatus:2,refreshToken:mt.refreshToken,authToken:De(mt.authToken)}}throw yield _e("Create Installation",Xe)})).apply(this,arguments)}function oe(D){return new Promise(b=>{setTimeout(b,D)})}const Kt=/^[cdef][\w-]{21}$/;function rt(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function ft(D){return function wt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Kt.test(M)?M:""}catch(D){return""}}function rn(D){return`${D.appName}!${D.appId}`}const sn=new Map;function Ci(D,b){const M=rn(D);Zt(M,b),function Lt(D,b){const M=function ai(){return!rr&&"BroadcastChannel"in self&&(rr=new BroadcastChannel("[Firebase] FID Change"),rr.onmessage=D=>{Zt(D.data.key,D.data.fid)}),rr}();M&&M.postMessage({key:D,fid:b}),function ps(){0===sn.size&&rr&&(rr.close(),rr=null)}()}(M,b)}function Zt(D,b){const M=sn.get(D);if(M)for(const F of M)F(b)}let rr=null;const Mr="firebase-installations-store";let zi=null;function Wi(){return zi||(zi=(0,J.X3)("firebase-installations-database",1,(D,b)=>{0===b&&D.createObjectStore(Mr)})),zi}function st(D,b){return Br.apply(this,arguments)}function Br(){return(Br=(0,O.Z)(function*(D,b){const M=rn(D),z=(yield Wi()).transaction(Mr,"readwrite"),X=z.objectStore(Mr),Se=yield X.get(M);return yield X.put(b,M),yield z.complete,(!Se||Se.fid!==b.fid)&&Ci(D,b.fid),b})).apply(this,arguments)}function Yn(D){return Un.apply(this,arguments)}function Un(){return(Un=(0,O.Z)(function*(D){const b=rn(D),F=(yield Wi()).transaction(Mr,"readwrite");yield F.objectStore(Mr).delete(b),yield F.complete})).apply(this,arguments)}function ui(D,b){return $s.apply(this,arguments)}function $s(){return($s=(0,O.Z)(function*(D,b){const M=rn(D),z=(yield Wi()).transaction(Mr,"readwrite"),X=z.objectStore(Mr),Se=yield X.get(M),ze=b(Se);return void 0===ze?yield X.delete(M):yield X.put(ze,M),yield z.complete,ze&&(!Se||Se.fid!==ze.fid)&&Ci(D,ze.fid),ze})).apply(this,arguments)}function dn(D){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,O.Z)(function*(D){let b;const M=yield ui(D.appConfig,F=>{const z=gs(F),X=Xo(D,z);return b=X.registrationPromise,X.installationEntry});return""===M.fid?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}})).apply(this,arguments)}function gs(D){return kt(D||{fid:rt(),registrationStatus:0})}function Xo(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ee.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function Vt(D,b){return et.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:_t(D)}:{installationEntry:b}}function et(){return(et=(0,O.Z)(function*(D,b){try{const M=yield ne(D,b);return st(D.appConfig,M)}catch(M){throw Ze(M)&&409===M.customData.serverCode?yield Yn(D.appConfig):yield st(D.appConfig,{fid:b.fid,registrationStatus:0}),M}})).apply(this,arguments)}function _t(D){return ir.apply(this,arguments)}function ir(){return(ir=(0,O.Z)(function*(D){let b=yield Fi(D.appConfig);for(;1===b.registrationStatus;)yield oe(100),b=yield Fi(D.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield dn(D);return F||M}return b})).apply(this,arguments)}function Fi(D){return ui(D,b=>{if(!b)throw Ee.create("installation-not-found");return kt(b)})}function kt(D){return function Hs(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function fr(D,b){return sr.apply(this,arguments)}function sr(){return(sr=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},M){const F=at(D,M),z=Ue(D,M),X=b.getImmediate({optional:!0});if(X){const mt=yield X.getHeartbeatsHeader();mt&&z.append("x-firebase-client",mt)}const ze={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:j,appId:D.appId}})},Xe=yield ee(()=>fetch(F,ze));if(Xe.ok)return De(yield Xe.json());throw yield _e("Generate Auth Token",Xe)})).apply(this,arguments)}function at(D,{fid:b}){return`${Ge(D)}/${b}/authTokens:generate`}function pr(D){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,O.Z)(function*(D,b=!1){let M;const F=yield ui(D.appConfig,X=>{if(!Mt(X))throw Ee.create("not-registered");const Se=X.authToken;if(!b&&U(Se))return X;if(1===Se.requestStatus)return M=qe(D,b),X;{if(!navigator.onLine)throw Ee.create("app-offline");const ze=H(X);return M=ut(D,ze),ze}});return M?yield M:F.authToken})).apply(this,arguments)}function qe(D,b){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(D,b){let M=yield Ke(D.appConfig);for(;1===M.authToken.requestStatus;)yield oe(100),M=yield Ke(D.appConfig);const F=M.authToken;return 0===F.requestStatus?pr(D,b):F})).apply(this,arguments)}function Ke(D){return ui(D,b=>{if(!Mt(b))throw Ee.create("not-registered");return function le(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function ut(D,b){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,O.Z)(function*(D,b){try{const M=yield fr(D,b),F=Object.assign(Object.assign({},b),{authToken:M});return yield st(D.appConfig,F),M}catch(M){if(!Ze(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield st(D.appConfig,F)}else yield Yn(D.appConfig);throw M}})).apply(this,arguments)}function Mt(D){return void 0!==D&&2===D.registrationStatus}function U(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function H(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function Le(){return(Le=(0,O.Z)(function*(D){const b=D,{installationEntry:M,registrationPromise:F}=yield dn(b);return F?F.catch(console.error):pr(b).catch(console.error),M.fid})).apply(this,arguments)}function zt(){return(zt=(0,O.Z)(function*(D,b=!1){const M=D;return yield gr(M),(yield pr(M,b)).token})).apply(this,arguments)}function gr(D){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,O.Z)(function*(D){const{registrationPromise:b}=yield dn(D);b&&(yield b)})).apply(this,arguments)}function Bn(D){return Ee.create("missing-app-config-values",{valueName:D})}const ta="installations",Re=D=>{const b=D.getProvider("app").getImmediate(),M=function Ki(D){if(!D||!D.options)throw Bn("App Configuration");if(!D.name)throw Bn("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!D.options[M])throw Bn(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},St=D=>{const b=D.getProvider("app").getImmediate(),M=(0,ae._getProvider)(b,ta).getImmediate();return{getId:()=>function Y(D){return Le.apply(this,arguments)}(M),getToken:z=>function pt(D){return zt.apply(this,arguments)}(M,z)}};(function un(){(0,ae._registerComponent)(new pe.wA(ta,Re,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("installations-internal",St,"PRIVATE"))})(),(0,ae.registerVersion)(ce,"0.5.7"),(0,ae.registerVersion)(ce,"0.5.7","esm2017");const or="@firebase/remote-config",An=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vh{constructor(b,M,F,z){this.client=b,this.storage=M,this.storageCache=F,this.logger=z}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,z=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${z}.`),z}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(z&&M.isCachedDataFresh(b.cacheMaxAgeMillis,F))return z;b.eTag=z&&z.eTag;const X=yield M.client.fetch(b),Se=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&Se.push(M.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(Se),X})()}}function Dc(D=navigator){return D.languages&&D.languages[0]||D.language}class Ga{constructor(b,M,F,z,X,Se){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=F,this.projectId=z,this.apiKey=X,this.appId=Se}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,z]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Xe={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:z,app_id:M.appId,language_code:Dc()},mt={method:"POST",headers:ze,body:JSON.stringify(Xe)},Bt=fetch(Se,mt),It=new Promise((Or,Yr)=>{b.signal.addEventListener(()=>{const Ni=new Error("The operation was aborted.");Ni.name="AbortError",Yr(Ni)})});let xn;try{yield Promise.race([Bt,It]),xn=yield Bt}catch(Or){let Yr="fetch-client-network";throw"AbortError"===Or.name&&(Yr="fetch-timeout"),An.create(Yr,{originalErrorMessage:Or.message})}let _n=xn.status;const _a=xn.headers.get("ETag")||void 0;let Vo,Nr;if(200===xn.status){let Or;try{Or=yield xn.json()}catch(Yr){throw An.create("fetch-client-parse",{originalErrorMessage:Yr.message})}Vo=Or.entries,Nr=Or.state}if("INSTANCE_STATE_UNSPECIFIED"===Nr?_n=500:"NO_CHANGE"===Nr?_n=304:("NO_TEMPLATE"===Nr||"EMPTY_CONFIG"===Nr)&&(Vo={}),304!==_n&&200!==_n)throw An.create("fetch-status",{httpStatus:_n});return{status:_n,eTag:_a,config:Vo}})()}}class Ep{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:F}){var z=this;return(0,O.Z)(function*(){yield function Pn(D,b){return new Promise((M,F)=>{const z=Math.max(b-Date.now(),0),X=setTimeout(M,z);D.addEventListener(()=>{clearTimeout(X),F(An.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const X=yield z.client.fetch(b);return yield z.storage.deleteThrottleMetadata(),X}catch(X){if(!function bc(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(X))throw X;const Se={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield z.storage.setThrottleMetadata(Se),z.attemptFetch(b,Se)}})()}}class Cc{constructor(b,M,F,z,X){this.app=b,this._client=M,this._storageCache=F,this._storage=z,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Wu(D,b){const M=D.target.error||void 0;return An.create(b,{originalErrorMessage:M&&M.message})}const Es="app_namespace_store";class bp{constructor(b,M,F,z=function Dp(){return new Promise((D,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{b(Wu(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Es,{keyPath:"compositeKey"})}}catch(M){b(An.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=b,this.appName=M,this.namespace=F,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((z,X)=>{const ze=F.transaction([Es],"readonly").objectStore(Es),Xe=M.createCompositeKey(b);try{const mt=ze.get(Xe);mt.onerror=Bt=>{X(Wu(Bt,"storage-get"))},mt.onsuccess=Bt=>{const It=Bt.target.result;z(It?It.value:void 0)}}catch(mt){X(An.create("storage-get",{originalErrorMessage:mt&&mt.message}))}})})()}set(b,M){var F=this;return(0,O.Z)(function*(){const z=yield F.openDbPromise;return new Promise((X,Se)=>{const Xe=z.transaction([Es],"readwrite").objectStore(Es),mt=F.createCompositeKey(b);try{const Bt=Xe.put({compositeKey:mt,value:M});Bt.onerror=It=>{Se(Wu(It,"storage-set"))},Bt.onsuccess=()=>{X()}}catch(Bt){Se(An.create("storage-set",{originalErrorMessage:Bt&&Bt.message}))}})})()}delete(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((z,X)=>{const ze=F.transaction([Es],"readwrite").objectStore(Es),Xe=M.createCompositeKey(b);try{const mt=ze.delete(Xe);mt.onerror=Bt=>{X(Wu(Bt,"storage-delete"))},mt.onsuccess=()=>{z()}}catch(mt){X(An.create("storage-delete",{originalErrorMessage:mt&&mt.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Ac{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const M=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),z=b.storage.getActiveConfig(),X=yield M;X&&(b.lastFetchStatus=X);const Se=yield F;Se&&(b.lastSuccessfulFetchTimestampMillis=Se);const ze=yield z;ze&&(b.activeConfig=ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function zs(){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,O.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Ao(){(0,ae._registerComponent)(new pe.wA("remote-config",function D(b,{instanceIdentifier:M}){const F=b.getProvider("app").getImmediate(),z=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw An.create("registration-window");if(!(0,J.hl)())throw An.create("indexed-db-unavailable");const{projectId:X,apiKey:Se,appId:ze}=F.options;if(!X)throw An.create("registration-project-id");if(!Se)throw An.create("registration-api-key");if(!ze)throw An.create("registration-app-id");const Xe=new bp(ze,F.name,M=M||"firebase"),mt=new Ac(Xe),Bt=new se.Yd(or);Bt.logLevel=se.in.ERROR;const It=new Ga(z,ae.SDK_VERSION,M,X,Se,ze),xn=new Ep(It,Xe),_n=new vh(xn,Xe,mt,Bt),_a=new Cc(F,_n,mt,Xe,Bt);return function Ti(D){const b=(0,J.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(_a),_a},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(or,"0.3.6"),(0,ae.registerVersion)(or,"0.3.6","esm2017")}();const Ku="/firebase-messaging-sw.js",ws="/firebase-cloud-messaging-push-scope",$r="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ws="google.c.a.c_id",ra="google.c.a.c_l",Sc="google.c.a.ts",Cp="google.c.a.e";var Is=(()=>{return(D=Is||(Is={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Is;var D})();function di(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function za(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),z=new Uint8Array(F.length);for(let X=0;X<F.length;++X)z[X]=F.charCodeAt(X);return z}const Wa="fcm_token_details_db",ar="fcm_token_object_Store";function wh(D){return Ka.apply(this,arguments)}function Ka(){return Ka=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Wa))return null;let b=null;return(yield(0,J.X3)(Wa,5,function(){var F=(0,O.Z)(function*(z,X,Se,ze){var Xe;if(X<2||!z.objectStoreNames.contains(ar))return;const mt=ze.objectStore(ar),Bt=yield mt.index("fcmSenderId").get(D);if(yield mt.clear(),Bt)if(2===X){const It=Bt;if(!It.auth||!It.p256dh||!It.endpoint)return;b={token:It.fcmToken,createTime:null!==(Xe=It.createTime)&&void 0!==Xe?Xe:Date.now(),subscriptionOptions:{auth:It.auth,p256dh:It.p256dh,endpoint:It.endpoint,swScope:It.swScope,vapidKey:"string"==typeof It.vapidKey?It.vapidKey:di(It.vapidKey)}}}else if(3===X){const It=Bt;b={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:di(It.auth),p256dh:di(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:di(It.vapidKey)}}}else if(4===X){const It=Bt;b={token:It.fcmToken,createTime:It.createTime,subscriptionOptions:{auth:di(It.auth),p256dh:di(It.p256dh),endpoint:It.endpoint,swScope:It.swScope,vapidKey:di(It.vapidKey)}}}});return function(z,X,Se,ze){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(Wa),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),Mc(b)?b:null}),Ka.apply(this,arguments)}function Mc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Ji="firebase-messaging-store";let ia=null;function Zu(){return ia||(ia=(0,J.X3)("firebase-messaging-database",1,(D,b)=>{0===b&&D.createObjectStore(Ji)})),ia}function cn(D){return xo.apply(this,arguments)}function xo(){return(xo=(0,O.Z)(function*(D){const b=Zs(D),F=yield(yield Zu()).transaction(Ji).objectStore(Ji).get(b);if(F)return F;{const z=yield wh(D.appConfig.senderId);if(z)return yield Ds(D,z),z}})).apply(this,arguments)}function Ds(D,b){return nn.apply(this,arguments)}function nn(){return(nn=(0,O.Z)(function*(D,b){const M=Zs(D),z=(yield Zu()).transaction(Ji,"readwrite");return yield z.objectStore(Ji).put(b,M),yield z.complete,b})).apply(this,arguments)}function xc(D){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(D){const b=Zs(D),F=(yield Zu()).transaction(Ji,"readwrite");yield F.objectStore(Ji).delete(b),yield F.complete})).apply(this,arguments)}function Zs({appConfig:D}){return D.appId}const Sn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function sa(D,b){return Si.apply(this,arguments)}function Si(){return(Si=(0,O.Z)(function*(D,b){const M=yield Cs(D),F=lt(b),z={method:"POST",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(Gr(D.appConfig),z)).json()}catch(Se){throw Sn.create("token-subscribe-failed",{errorInfo:Se})}if(X.error)throw Sn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Sn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function _r(D,b){return bs.apply(this,arguments)}function bs(){return(bs=(0,O.Z)(function*(D,b){const M=yield Cs(D),F=lt(b.subscriptionOptions),z={method:"PATCH",headers:M,body:JSON.stringify(F)};let X;try{X=yield(yield fetch(`${Gr(D.appConfig)}/${b.token}`,z)).json()}catch(Se){throw Sn.create("token-update-failed",{errorInfo:Se})}if(X.error)throw Sn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Sn.create("token-update-no-token");return X.token})).apply(this,arguments)}function Xi(D,b){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(D,b){const F={method:"DELETE",headers:yield Cs(D)};try{const X=yield(yield fetch(`${Gr(D.appConfig)}/${b}`,F)).json();if(X.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(z){throw Sn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function Gr({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Cs(D){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,O.Z)(function*({appConfig:D,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function lt({p256dh:D,auth:b,endpoint:M,vapidKey:F}){const z={web:{endpoint:M,auth:b,p256dh:D}};return F!==$r&&(z.web.applicationPubKey=F),z}const Ja=6048e5;function oa(D){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,O.Z)(function*(D){const b=yield Ju(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:di(b.getKey("auth")),p256dh:di(b.getKey("p256dh"))},F=yield cn(D.firebaseDependencies);if(F){if(Ro(F.subscriptionOptions,M))return Date.now()>=F.createTime+Ja?Yu(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield Xi(D.firebaseDependencies,F.token)}catch(z){console.warn(z)}return we(D.firebaseDependencies,M)}return we(D.firebaseDependencies,M)})).apply(this,arguments)}function eu(D){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(D){const b=yield cn(D.firebaseDependencies);b&&(yield Xi(D.firebaseDependencies,b.token),yield xc(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Yu(D,b){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,O.Z)(function*(D,b){try{const M=yield _r(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield Ds(D.firebaseDependencies,F),M}catch(M){throw yield eu(D),M}})).apply(this,arguments)}function we(D,b){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(D,b){const F={token:yield sa(D,b),createTime:Date.now(),subscriptionOptions:b};return yield Ds(D,F),F.token})).apply(this,arguments)}function Ju(D,b){return fn.apply(this,arguments)}function fn(){return(fn=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:za(b)})})).apply(this,arguments)}function Ro(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function No(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function qr(D,b){if(!b.notification)return;D.notification={};const M=b.notification.title;M&&(D.notification.title=M);const F=b.notification.body;F&&(D.notification.body=F);const z=b.notification.image;z&&(D.notification.image=z)}(b,D),function Xu(D,b){!b.data||(D.data=b.data)}(b,D),function el(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const M=b.fcmOptions.link;M&&(D.fcmOptions.link=M);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function Rc(D){return"object"==typeof D&&!!D&&Ws in D}function tl(D,b){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<b.length&&M.push(b.charAt(F));return M.join("")}function As(D){return Sn.create("missing-app-config-values",{valueName:D})}tl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),tl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ur{constructor(b,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function nu(D){if(!D||!D.options)throw As("App Configuration Object");if(!D.name)throw As("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of b)if(!M[F])throw As(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:z,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function hi(D){return ru.apply(this,arguments)}function ru(){return(ru=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Ku,{scope:ws}),D.swRegistration.update().catch(()=>{})}catch(b){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function Ss(D,b){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield hi(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function nl(D,b){return iu.apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=$r)})).apply(this,arguments)}function rl(){return(rl=(0,O.Z)(function*(D,b){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield nl(D,null==b?void 0:b.vapidKey),yield Ss(D,null==b?void 0:b.serviceWorkerRegistration),oa(D)})).apply(this,arguments)}function aa(D,b,M){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(D,b,M){const F=il(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Ws],message_name:M[ra],message_time:M[Sc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function il(D){switch(D){case Is.NOTIFICATION_CLICKED:return"notification_open";case Is.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Nc(){return(Nc=(0,O.Z)(function*(D,b){const M=b.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===Is.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(No(M)):D.onMessageHandler.next(No(M)));const F=M.data;Rc(F)&&"1"===F[Cp]&&(yield aa(D,M.messageType,F))})).apply(this,arguments)}const ol="@firebase/messaging",Oc=D=>{const b=new ur(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function sl(D,b){return Nc.apply(this,arguments)}(b,M)),b},Qs=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function su(D,b){return rl.apply(this,arguments)}(b,F)}};function kc(){return Js.apply(this,arguments)}function Js(){return(Js=(0,O.Z)(function*(){try{yield(0,J.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pc(){(0,ae._registerComponent)(new pe.wA("messaging",Oc,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("messaging-internal",Qs,"PRIVATE")),(0,ae.registerVersion)(ol,"0.9.11"),(0,ae.registerVersion)(ol,"0.9.11","esm2017")}();const ul="analytics",Qm="firebase_id",la="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ou="https://www.googletagmanager.com/gtag/js",kn=new se.Yd("@firebase/analytics");function Fc(D){return Promise.all(D.map(b=>b.catch(M=>M)))}function Tp(D,b){const M=document.createElement("script");M.src=`${ou}?l=${D}&id=${b}`,M.async=!0,document.head.appendChild(M)}function Oo(D,b,M,F,z,X){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,O.Z)(function*(D,b,M,F,z,X){const Se=F[z];try{if(Se)yield b[Se];else{const Xe=(yield Fc(M)).find(mt=>mt.measurementId===z);Xe&&(yield b[Xe.appId])}}catch(ze){kn.error(ze)}D("config",z,X)})).apply(this,arguments)}function cl(D,b,M,F,z){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,O.Z)(function*(D,b,M,F,z){try{let X=[];if(z&&z.send_to){let Se=z.send_to;Array.isArray(Se)||(Se=[Se]);const ze=yield Fc(M);for(const Xe of Se){const mt=ze.find(It=>It.measurementId===Xe),Bt=mt&&b[mt.appId];if(!Bt){X=[];break}X.push(Bt)}}0===X.length&&(X=Object.values(b)),yield Promise.all(X),D("event",F,z||{})}catch(X){kn.error(X)}})).apply(this,arguments)}function Ap(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(ou))return b;return null}const pn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ca=new class hl{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function eo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Uc(D){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,O.Z)(function*(D){var b;const{appId:M,apiKey:F}=D,z={method:"GET",headers:eo(F)},X=la.replace("{app-id}",M),Se=yield fetch(X,z);if(200!==Se.status&&304!==Se.status){let ze="";try{const Xe=yield Se.json();(null===(b=Xe.error)||void 0===b?void 0:b.message)&&(ze=Xe.error.message)}catch(Xe){}throw pn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:ze})}return Se.json()})).apply(this,arguments)}function Po(D){return gn.apply(this,arguments)}function gn(){return(gn=(0,O.Z)(function*(D,b=ca,M){const{appId:F,apiKey:z,measurementId:X}=D.options;if(!F)throw pn.create("no-app-id");if(!z){if(X)return{measurementId:X,appId:F};throw pn.create("no-api-key")}const Se=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new au;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==M?M:6e4),Tt({appId:F,apiKey:z,measurementId:X},Se,ze,b)})).apply(this,arguments)}function Tt(D,b,M){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:M},F,z=ca){const{appId:X,measurementId:Se}=D;try{yield Sp(F,b)}catch(ze){if(Se)return kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:X,measurementId:Se};throw ze}try{const ze=yield Uc(D);return z.deleteThrottleMetadata(X),ze}catch(ze){if(!fl(ze)){if(z.deleteThrottleMetadata(X),Se)return kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:X,measurementId:Se};throw ze}const Xe=503===Number(ze.customData.httpStatus)?(0,J.$s)(M,z.intervalMillis,30):(0,J.$s)(M,z.intervalMillis),mt={throttleEndTimeMillis:Date.now()+Xe,backoffCount:M+1};return z.setThrottleMetadata(X,mt),kn.debug(`Calling attemptFetch again in ${Xe} millis`),Tt(D,mt,F,z)}})).apply(this,arguments)}function Sp(D,b){return new Promise((M,F)=>{const z=Math.max(b-Date.now(),0),X=setTimeout(M,z);D.addEventListener(()=>{clearTimeout(X),F(pn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function fl(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class au{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function bh(){return to.apply(this,arguments)}function to(){return(to=(0,O.Z)(function*(){if(!(0,J.hl)())return kn.warn(pn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(D){return kn.warn(pn.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(D,b,M,F,z,X,Se){var ze;const Xe=Po(D);Xe.then(_n=>{M[_n.measurementId]=_n.appId,D.options.measurementId&&_n.measurementId!==D.options.measurementId&&kn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${_n.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_n=>kn.error(_n)),b.push(Xe);const mt=bh().then(_n=>{if(_n)return F.getId()}),[Bt,It]=yield Promise.all([Xe,mt]);Ap()||Tp(X,Bt.measurementId),z("js",new Date);const xn=null!==(ze=null==Se?void 0:Se.config)&&void 0!==ze?ze:{};return xn.origin="firebase",xn.update=!0,null!=It&&(xn[Qm]=It),z("config",Bt.measurementId,xn),Bt.measurementId})).apply(this,arguments)}class ko{constructor(b){this.app=b}_delete(){return delete zr[this.app.options.appId],Promise.resolve()}}let zr={},no=[];const pl={};let pi,Ns,ro="dataLayer",$n=!1;function rs(D,b,M){!function gl(){const D=[];if((0,J.ru)()&&D.push("This is a browser extension environment."),(0,J.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,z)=>`(${z+1}) ${F}`).join(" "),M=pn.create("invalid-analytics-context",{errorInfo:b});kn.warn(M.message)}}();const F=D.options.appId;if(!F)throw pn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw pn.create("no-api-key");kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zr[F])throw pn.create("already-exists",{id:F});if(!$n){!function ts(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(ro);const{wrappedGtag:X,gtagCore:Se}=function Dh(D,b,M,F,z){let X=function(...Se){window[F].push(arguments)};return window[z]&&"function"==typeof window[z]&&(X=window[z]),window[z]=function Vc(D,b,M,F){function X(){return(X=(0,O.Z)(function*(Se,ze,Xe){try{"event"===Se?yield cl(D,b,M,ze,Xe):"config"===Se?yield Oo(D,b,M,F,ze,Xe):D("set",ze)}catch(mt){kn.error(mt)}})).apply(this,arguments)}return function z(Se,ze,Xe){return X.apply(this,arguments)}}(X,D,b,M),{gtagCore:X,wrappedGtag:window[z]}}(zr,no,pl,ro,"gtag");Ns=X,pi=Se,$n=!0}return zr[F]=function fi(D,b,M,F,z,X,Se){return jn.apply(this,arguments)}(D,no,pl,b,pi,ro,M),new ko(D)}function da(){return(da=(0,O.Z)(function*(D,b,M,F,z){if(z&&z.global)D("event",M,F);else{const X=yield b;D("event",M,Object.assign(Object.assign({},F),{send_to:X}))}})).apply(this,arguments)}function oo(){return lu.apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}const _l="@firebase/analytics";!function Th(){(0,ae._registerComponent)(new pe.wA(ul,(b,{options:M})=>rs(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new pe.wA("analytics-internal",function D(b){try{const M=b.getProvider(ul).getImmediate();return{logEvent:(F,z,X)=>function Hc(D,b,M,F){D=(0,J.m9)(D),function Bc(D,b,M,F,z){return da.apply(this,arguments)}(Ns,zr[D.app.options.appId],b,M,F).catch(z=>kn.error(z))}(M,F,z,X)}}catch(M){throw pn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(_l,"0.7.7"),(0,ae.registerVersion)(_l,"0.7.7","esm2017")}();var qc=k(4408),Ah=k(7565);const cu=new class yn extends Ah.v{}(class Vi extends qc.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,M,F):b.flush(this)}});var xr=k(4986),du=k(8505),Rr=k(9468),Ri=k(5363);const vl=new g.GfV("7.3.0"),Os="__angularfire_symbol__analyticsIsSupportedValue",Kr="__angularfire_symbol__analyticsIsSupported",Zr="__angularfire_symbol__remoteConfigIsSupportedValue",fa="__angularfire_symbol__remoteConfigIsSupported",pa="__angularfire_symbol__messagingIsSupportedValue",zc="__angularfire_symbol__messagingIsSupported";function ga(D,b,M){if(b){if(1===b.length)return b[0];const X=b.filter(Se=>Se.app===M);if(1===X.length)return X[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[Kr]||(globalThis[Kr]=oo().then(D=>globalThis[Os]=D).catch(()=>globalThis[Os]=!1)),globalThis[zc]||(globalThis[zc]=kc().then(D=>globalThis[pa]=D).catch(()=>globalThis[pa]=!1)),globalThis[fa]||(globalThis[fa]=zs().then(D=>globalThis[Zr]=D).catch(()=>globalThis[Zr]=!1));const xh=(D,b)=>{const M=b?[b]:(0,Z.C6)(),F=[];return M.forEach(z=>{z.container.getProvider(D).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function ao(){}class ma{constructor(b,M=cu){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,F){const z=this.zone;return this.delegate.schedule(function(Se){z.runGuarded(()=>{b.apply(this,[Se])})},M,F)}}class Rh{constructor(b){this.zone=b,this.task=null}call(b,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ao,{},ao,ao)),M.pipe((0,du.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let El=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new ma(Zone.current)),this.insideAngular=M.run(()=>new ma(Zone.current,xr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function os(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function wl(D){return os(),function as(D){return function(M){return(M=M.lift(new Rh(D.ngZone))).pipe((0,Rr.R)(D.outsideAngular),(0,Ri.Q)(D.insideAngular))}}(os())(D)}},2090:(nt,Ce,k)=>{k.d(Ce,{BH:()=>Te,LL:()=>wt,ZR:()=>oe,zI:()=>ge,US:()=>se,tV:()=>B,L:()=>ue,$s:()=>Hs,r3:()=>Zt,Sg:()=>xe,ne:()=>st,vZ:()=>ps,ZB:()=>Q,Lj:()=>Ot,pd:()=>zi,m9:()=>at,z$:()=>ke,jU:()=>Ze,ru:()=>Ge,d:()=>_e,xb:()=>rr,w1:()=>ve,hl:()=>q,uI:()=>de,UG:()=>Ee,b$:()=>De,G6:()=>ee,Mn:()=>je,X3:()=>ut,xO:()=>ki,zd:()=>Mr,eu:()=>te});var g=k(5861);const J=function(U){const L=[];let H=0;for(let le=0;le<U.length;le++){let Y=U.charCodeAt(le);Y<128?L[H++]=Y:Y<2048?(L[H++]=Y>>6|192,L[H++]=63&Y|128):55296==(64512&Y)&&le+1<U.length&&56320==(64512&U.charCodeAt(le+1))?(Y=65536+((1023&Y)<<10)+(1023&U.charCodeAt(++le)),L[H++]=Y>>18|240,L[H++]=Y>>12&63|128,L[H++]=Y>>6&63|128,L[H++]=63&Y|128):(L[H++]=Y>>12|224,L[H++]=Y>>6&63|128,L[H++]=63&Y|128)}return L},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let Y=0;Y<U.length;Y+=3){const Le=U[Y],pt=Y+1<U.length,zt=pt?U[Y+1]:0,gr=Y+2<U.length,Ut=gr?U[Y+2]:0;let an=(15&zt)<<2|Ut>>6,Jn=63&Ut;gr||(Jn=64,pt||(an=64)),le.push(H[Le>>2],H[(3&Le)<<4|zt>>4],H[an],H[Jn])}return le.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let H=0,le=0;for(;H<U.length;){const Y=U[H++];if(Y<128)L[le++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Le=U[H++];L[le++]=String.fromCharCode((31&Y)<<6|63&Le)}else if(Y>239&&Y<365){const gr=((7&Y)<<18|(63&U[H++])<<12|(63&U[H++])<<6|63&U[H++])-65536;L[le++]=String.fromCharCode(55296+(gr>>10)),L[le++]=String.fromCharCode(56320+(1023&gr))}else{const Le=U[H++],pt=U[H++];L[le++]=String.fromCharCode((15&Y)<<12|(63&Le)<<6|63&pt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const H=L?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let Y=0;Y<U.length;){const Le=H[U.charAt(Y++)],zt=Y<U.length?H[U.charAt(Y)]:0;++Y;const Ut=Y<U.length?H[U.charAt(Y)]:64;++Y;const At=Y<U.length?H[U.charAt(Y)]:64;if(++Y,null==Le||null==zt||null==Ut||null==At)throw Error();le.push(Le<<2|zt>>4),64!==Ut&&(le.push(zt<<4&240|Ut>>2),64!==At&&le.push(Ut<<6&192|At))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ue=function(U){return function(U){const L=J(U);return se.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return se.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const H in L)!L.hasOwnProperty(H)||!He(H)||(U[H]=Q(U[H],L[H]));return U}function He(U){return"__proto__"!==U}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,H)=>{this.resolve=L,this.reject=H})}wrapCallback(L){return(H,le)=>{H?this.reject(H):this.resolve(le),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(H):L(H,le))}}}function xe(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=L||"demo-project",Y=U.iat||0,Le=U.sub||U.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const pt=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:Y,exp:Y+3600,auth_time:Y,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(pt)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Ze(){return"object"==typeof self&&self.self===self}function Ge(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return ke().indexOf("Electron/")>=0}function ve(){const U=ke();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function je(){return ke().indexOf("MSAppHost/")>=0}function ee(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){return"object"==typeof indexedDB}function te(){return new Promise((U,L)=>{try{let H=!0;const le="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(le);Y.onsuccess=()=>{Y.result.close(),H||self.indexedDB.deleteDatabase(le),U(!0)},Y.onupgradeneeded=()=>{H=!1},Y.onerror=()=>{var Le;L((null===(Le=Y.error)||void 0===Le?void 0:Le.message)||"")}}catch(H){L(H)}})}function ge(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class oe extends Error{constructor(L,H,le){super(H),this.code=L,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wt.prototype.create)}}class wt{constructor(L,H,le){this.service=L,this.serviceName=H,this.errors=le}create(L,...H){const le=H[0]||{},Y=`${this.service}/${L}`,Le=this.errors[L],pt=Le?function Kt(U,L){return U.replace(Tn,(H,le)=>{const Y=L[le];return null!=Y?String(Y):`<${le}?>`})}(Le,le):"Error";return new oe(Y,`${this.serviceName}: ${pt} (${Y}).`,le)}}const Tn=/\{\$([^}]+)}/g;function Zt(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function rr(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function ps(U,L){if(U===L)return!0;const H=Object.keys(U),le=Object.keys(L);for(const Y of H){if(!le.includes(Y))return!1;const Le=U[Y],pt=L[Y];if(Sr(Le)&&Sr(pt)){if(!ps(Le,pt))return!1}else if(Le!==pt)return!1}for(const Y of le)if(!H.includes(Y))return!1;return!0}function Sr(U){return null!==U&&"object"==typeof U}function ki(U){const L=[];for(const[H,le]of Object.entries(U))Array.isArray(le)?le.forEach(Y=>{L.push(encodeURIComponent(H)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent(H)+"="+encodeURIComponent(le));return L.length?"&"+L.join("&"):""}function Mr(U){const L={};return U.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[Y,Le]=le.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(Le)}}),L}function zi(U){const L=U.indexOf("?");if(!L)return"";const H=U.indexOf("#",L);return U.substring(L,H>0?H:void 0)}function st(U,L){const H=new Br(U,L);return H.subscribe.bind(H)}class Br{constructor(L,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{L(this)}).catch(le=>{this.error(le)})}next(L){this.forEachObserver(H=>{H.next(L)})}error(L){this.forEachObserver(H=>{H.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,H,le){let Y;if(void 0===L&&void 0===H&&void 0===le)throw new Error("Missing Observer.");Y=function Un(U,L){if("object"!=typeof U||null===U)return!1;for(const H of L)if(H in U&&"function"==typeof U[H])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:H,complete:le},void 0===Y.next&&(Y.next=ui),void 0===Y.error&&(Y.error=ui),void 0===Y.complete&&(Y.complete=ui);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(pt){}}),this.observers.push(Y),Le}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,L)}sendOne(L,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{H(this.observers[L])}catch(le){"undefined"!=typeof console&&console.error&&console.error(le)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ui(){}function Hs(U,L=1e3,H=2){const le=L*Math.pow(H,U),Y=Math.round(.5*le*(Math.random()-.5)*2);return Math.min(144e5,le+Y)}function at(U){return U&&U._delegate?U._delegate:U}function pr(U,L){return new Promise((H,le)=>{U.onsuccess=Y=>{H(Y.target.result)},U.onerror=Y=>{var Le;le(`${L}: ${null===(Le=Y.target.error)||void 0===Le?void 0:Le.message}`)}})}class Nt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,H){return new qe(this._db.transaction.call(this._db,L,H))}createObjectStore(L,H){return new be(this._db.createObjectStore(L,H))}close(){this._db.close()}}class qe{constructor(L){this._transaction=L,this.complete=new Promise((H,le)=>{this._transaction.oncomplete=function(){H()},this._transaction.onerror=()=>{le(this._transaction.error)},this._transaction.onabort=()=>{le(this._transaction.error)}})}objectStore(L){return new be(this._transaction.objectStore(L))}}class be{constructor(L){this._store=L}index(L){return new Ke(this._store.index(L))}createIndex(L,H,le){return new Ke(this._store.createIndex(L,H,le))}get(L){return pr(this._store.get(L),"Error reading from IndexedDB")}put(L,H){return pr(this._store.put(L,H),"Error writing to IndexedDB")}delete(L){return pr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return pr(this._store.clear(),"Error clearing IndexedDB object store")}}class Ke{constructor(L){this._index=L}get(L){return pr(this._index.get(L),"Error reading from IndexedDB")}}function ut(U,L,H){return new Promise((le,Y)=>{try{const Le=indexedDB.open(U,L);Le.onsuccess=pt=>{le(new Nt(pt.target.result))},Le.onerror=pt=>{var zt;Y(`Error opening indexedDB: ${null===(zt=pt.target.error)||void 0===zt?void 0:zt.message}`)},Le.onupgradeneeded=pt=>{H(new Nt(Le.result),pt.oldVersion,pt.newVersion,new qe(Le.transaction))}}catch(Le){Y(`Error opening indexedDB: ${Le.message}`)}})}function Ot(U){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,g.Z)(function*(U){return new Promise((L,H)=>{try{const le=indexedDB.deleteDatabase(U);le.onsuccess=()=>{L()},le.onerror=Y=>{var Le;H(`Error deleting indexedDB database "${U}": ${null===(Le=Y.target.error)||void 0===Le?void 0:Le.message}`)}}catch(le){H(`Error deleting indexedDB database "${U}": ${le.message}`)}})})).apply(this,arguments)}},617:(nt,Ce,k)=>{var g=k(5e3);let Z=null;function O(){return Z}const se=new g.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ue(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const B=new g.OlP("Location Initialized");let j=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function He(){return new j((0,g.LFG)(se))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ke(n){return n&&"?"!==n[0]?"?"+n:n}let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ee(n){const e=(0,g.LFG)(se).location;return new Ge((0,g.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ze=new g.OlP("appBaseHref");let Ge=(()=>{class n extends de{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ke(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,l){const h=this.prepareExternalUrl(o+ke(l));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,l){const h=this.prepareExternalUrl(o+ke(l));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce),g.LFG(Ze,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends de{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,l){let h=this.prepareExternalUrl(o+ke(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,l){let h=this.prepareExternalUrl(o+ke(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce),g.LFG(Ze,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=xe(Ue(o)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ke(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ue(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=ke,n.joinWithSlash=Te,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(){return new _e((0,g.LFG)(de),(0,g.LFG)(ce))}()},providedIn:"root"}),n})();function Ue(n){return n.replace(/\/index.html$/,"")}let Mo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function ar(n){return"server"===n}let Za=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Ya((0,g.LFG)(se),window)}),n})();class Ya{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ia(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const l=o.shadowRoot;if(l){const h=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],o-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ji(this.window.history)||Ji(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ji(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ds extends class xo extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){Z||(Z=n)}(new Ds)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function xc(){return nn=nn||document.querySelector("base"),nn?nn.getAttribute("href"):null}();return null==t?null:function Zs(n){Ks=Ks||document.createElement("a"),Ks.setAttribute("href",n);const e=Ks.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){nn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function To(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let Ks,nn=null;const yr=new g.OlP("TRANSITION_ID"),sa=[{provide:g.ip1,useFactory:function Sn(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[yr,se,g.zs3],multi:!0}];class Si{static init(){(0,g.VLi)(new Si)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let l=o.length,h=!1;const m=function(w){h=h||w,l--,0==l&&r(h)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let _r=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const bs=new g.OlP("EventManagerPlugins");let Xi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const h=o[l];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(bs),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Qa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Gr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Cs=(()=>{class n extends Gr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const h=this._doc.createElement("style");h.textContent=l,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ts),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ts))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Ts(n){O().remove(n)}const lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ja=/%COMP%/g;function we(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?we(n,o,t):(o=o.replace(Ja,n),t.push(o))}return t}function xt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let fn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Ro(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Xu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new el(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=we(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Xi),g.LFG(Cs),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Ro{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(lt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=lt[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=lt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xt(r)):this.eventManager.addEventListener(e,t,xt(r))}}class Xu extends Ro{constructor(e,t,r,o){super(e),this.component=r;const l=we(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function Yu(n){return"_ngcontent-%COMP%".replace(Ja,n)}(o+"-"+r.id),this.hostAttr=function Qu(n){return"_nghost-%COMP%".replace(Ja,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class el extends Ro{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=we(o.id,o.styles,[]);for(let h=0;h<l.length;h++){const m=document.createElement("style");m.textContent=l[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Rc=(()=>{class n extends Qa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const tl=["alt","control","meta","shift"],As={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ur={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ru=(()=>{class n extends Qa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),h=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,l.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let h="";if(tl.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),h+=w+".")}),h+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function Ss(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ur.hasOwnProperty(e)&&(e=ur[e]))}return As[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),tl.forEach(l=>{l!=o&&hi[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const rl=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Mi(){Ds.makeCurrent(),Si.init()},multi:!0},{provide:se,useFactory:function iu(){return(0,g.RDi)(document),document},deps:[]}]),aa=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function nl(){return new g.qLn},deps:[]},{provide:bs,useClass:Rc,multi:!0,deps:[se,g.R0b,g.Lbi]},{provide:bs,useClass:ru,multi:!0,deps:[se]},{provide:fn,useClass:fn,deps:[Xi,Cs,g.AFp]},{provide:g.FYo,useExisting:fn},{provide:Gr,useExisting:Cs},{provide:Cs,useClass:Cs,deps:[se]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:Xi,useClass:Xi,deps:[bs,g.R0b]},{provide:class cn{},useClass:_r,deps:[]}];let ua=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:yr,useExisting:g.AFp},sa]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:aa,imports:[Mo,g.hGG]}),n})();"undefined"!=typeof window&&window;var Mn=k(8996),pn=k(8306);const{isArray:dl}=Array,{getPrototypeOf:ns,prototype:hl,keys:ca}=Object;function eo(n){if(1===n.length){const e=n[0];if(dl(e))return{args:e,keys:null};if(function Uc(n){return n&&"object"==typeof n&&ns(n)===hl}(e)){const t=ca(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Qt=k(8421),Po=k(7669),gn=k(5403),Tt=k(4004);const{isArray:Rs}=Array;function fl(n){return(0,Tt.U)(e=>function Sp(n,e){return Rs(e)?n(...e):n(e)}(n,e))}function au(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let to=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),fi=(()=>{class n extends to{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const jn=new g.OlP("NgValueAccessor"),no={provide:jn,useExisting:(0,g.Gpc)(()=>Fo),multi:!0},ro=new g.OlP("CompositionEventMode");let Fo=(()=>{class n extends to{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pl(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(ro,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[g._Bn([no]),g.qOj]}),n})();const $n=new g.OlP("NgValidators"),io=new g.OlP("NgAsyncValidators");function gi(n){return null!=n}function jc(n){const e=(0,g.QGY)(n)?(0,Mn.D)(n):n;return(0,g.CqO)(e),e}function uu(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function oo(n,e){return e.map(t=>t(n))}function Ch(n){return n.map(e=>function lu(n){return!n.validate}(e)?e:t=>e.validate(t))}function $c(n){return null!=n?function Dn(n){if(!n)return null;const e=n.filter(gi);return 0==e.length?null:function(t){return uu(oo(t,e))}}(Ch(n)):null}function Hc(n){return null!=n?function Mp(n){if(!n)return null;const e=n.filter(gi);return 0==e.length?null:function(t){return function bh(...n){const e=(0,Po.jO)(n),{args:t,keys:r}=eo(n),o=new pn.y(l=>{const{length:h}=t;if(!h)return void l.complete();const m=new Array(h);let w=h,C=h;for(let x=0;x<h;x++){let N=!1;(0,Qt.Xf)(t[x]).subscribe((0,gn.x)(l,G=>{N||(N=!0,C--),m[x]=G},()=>w--,void 0,()=>{(!w||!N)&&(C||l.next(r?au(r,m):m),l.complete())}))}});return e?o.pipe(fl(e)):o}(oo(t,e).map(jc)).pipe((0,Tt.U)(uu))}}(Ch(n)):null}function _l(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function qc(n){return n?Array.isArray(n)?n:[n]:[]}function Vi(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ah(n,e){const t=qc(e);return qc(n).forEach(o=>{Vi(t,o)||t.push(o)}),t}function yn(n,e){return qc(e).filter(t=>!Vi(n,t))}class cu{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$c(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Hc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Wr extends cu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xr extends cu{get formDirective(){return null}get path(){return null}}let vl=(()=>{class n extends class du{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Wr,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})();function Er(n,e){(function as(n,e){const t=function Gc(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(_l(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Th(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(_l(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Lo(e._rawValidators,o),Lo(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),function Il(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&b(n,e)})}(n,e),function M(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function D(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&b(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function wl(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Lo(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function b(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _n(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Nr="VALID",Or="INVALID",Yr="PENDING",Ni="DISABLED";function Kc(n){return(Zc(n)?n.validators:n)||null}function Dl(n){return Array.isArray(n)?$c(n):n||null}function Uo(n,e){return(Zc(e)?e.asyncValidators:n)||null}function Nh(n){return Array.isArray(n)?Hc(n):n||null}function Zc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const ks=n=>n instanceof Ph;function Np(n){return(n=>n instanceof Jm)(n)?n.value:n.getRawValue()}function Op(n,e){const t=ks(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function Oh(n,e){ks(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new g.vHH(1002,"")})}class fu{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Dl(this._rawValidators),this._composedAsyncValidatorFn=Nh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Nr}get invalid(){return this.status===Or}get pending(){return this.status==Yr}get disabled(){return this.status===Ni}get enabled(){return this.status!==Ni}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Dl(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Nh(e)}addValidators(e){this.setValidators(Ah(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ah(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yn(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yn(e,this._rawAsyncValidators))}hasValidator(e){return Vi(this._rawValidators,e)}hasAsyncValidator(e){return Vi(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Yr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ni,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Nr,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nr||this.status===Yr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ni:Nr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Yr,this._hasOwnPendingAsyncValidator=!0;const t=jc(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function xp(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=ks(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof Xm)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Ni:this.errors?Or:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yr)?Yr:this._anyControlsHaveStatus(Or)?Or:Nr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Zc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Jm extends fu{constructor(e=null,t,r){super(Kc(t),Uo(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zc(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_n(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_n(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ph extends fu{constructor(e,t,r){super(Kc(t),Uo(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Oh(this,e),Object.keys(e).forEach(r=>{Op(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Np(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,l)=>{r=t(r,o,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Xm extends fu{constructor(e,t,r){super(Kc(t),Uo(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Oh(this,e),e.forEach((r,o)=>{Op(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Np(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const kp={provide:Wr,useExisting:(0,g.Gpc)(()=>Qc)},Yc=(()=>Promise.resolve(null))();let Qc=(()=>{class n extends Wr{constructor(t,r,o,l,h){super(),this._changeDetectorRef=h,this.control=new Jm,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function xn(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(l=>{l.constructor===Fo?t=l:function Bt(n){return Object.getPrototypeOf(n.constructor)===fi}(l)?r=l:o=l}),o||r||t||null}(0,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function mt(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Er(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Yc.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;Yc.then(()=>{var l;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(l=this._changeDetectorRef)||void 0===l||l.markForCheck()})}_getPath(t){return this._parent?function hu(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(xr,9),g.Y36($n,10),g.Y36(io,10),g.Y36(jn,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([kp]),g.qOj,g.TTD]}),n})(),us=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),d0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[us]]}),n})(),xl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[d0]}),n})();var hn=k(2011);const jo_firebaseConfig={apiKey:"AIzaSyAcgNR-HJQ46279OrbN-aScimrk45RCQyI",authDomain:"pruebaapp-d5f1d.firebaseapp.com",projectId:"pruebaapp-d5f1d",storageBucket:"pruebaapp-d5f1d.appspot.com",messagingSenderId:"92270462588",appId:"1:92270462588:web:bd49d3c2604d7b08a16bf9"};function vt(...n){const e=(0,Po.yG)(n);return(0,Mn.D)(n,e)}var Gn=k(7579);class Jr extends Gn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Ia=k(4671),dy=k(9672);function Yh(n,e,t){n?(0,dy.f)(t,n,e):e()}var sd=k(576);function od(n,e){const t=(0,sd.m)(n)?n:()=>n,r=o=>o.error(t());return new pn.y(e?o=>e.schedule(r,0,o):r)}const Rl=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ad=k(8189);function Jh(...n){return function Qh(){return(0,ad.J)(1)}()((0,Mn.D)(n,(0,Po.yG)(n)))}function Xh(n){return new pn.y(e=>{(0,Qt.Xf)(n()).subscribe(e)})}var Rn=k(515),ud=k(727),Xr=k(4482);function Yp(){return(0,Xr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,l=t;t=null,o&&(!l||o===l)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class uo extends pn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Xr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ud.w0;const t=this.getSubject();e.add(this.source.subscribe((0,gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ud.w0.EMPTY)}return e}refCount(){return Yp()(this)}}function Xn(n,e){return(0,Xr.e)((t,r)=>{let o=null,l=0,h=!1;const m=()=>h&&!o&&r.complete();t.subscribe((0,gn.x)(r,w=>{null==o||o.unsubscribe();let C=0;const x=l++;(0,Qt.Xf)(n(w,x)).subscribe(o=(0,gn.x)(r,N=>r.next(e?e(w,N,x,C++):N),()=>{o=null,m()}))},()=>{h=!0,m()}))})}var Nl=k(5698);function Ol(...n){const e=(0,Po.yG)(n);return(0,Xr.e)((t,r)=>{(e?Jh(n,t,e):Jh(n,t)).subscribe(r)})}function hy(n,e,t,r,o){return(l,h)=>{let m=t,w=e,C=0;l.subscribe((0,gn.x)(h,x=>{const N=C++;w=m?n(w,x,N):(m=!0,x),r&&h.next(w)},o&&(()=>{m&&h.next(w),h.complete()})))}}function Da(n,e){return(0,Xr.e)(hy(n,e,arguments.length>=2,!0))}function lo(n,e){return(0,Xr.e)((t,r)=>{let o=0;t.subscribe((0,gn.x)(r,l=>n.call(e,l,o++)&&r.next(l)))})}function $o(n){return(0,Xr.e)((e,t)=>{let l,r=null,o=!1;r=e.subscribe((0,gn.x)(t,void 0,void 0,h=>{l=(0,Qt.Xf)(n(h,$o(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,l.subscribe(t))})}var Pr=k(5577);function Pl(n,e){return(0,sd.m)(e)?(0,Pr.z)(n,e,1):(0,Pr.z)(n,1)}function y(n){return n<=0?()=>Rn.E:(0,Xr.e)((e,t)=>{let r=[];e.subscribe((0,gn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function d(n=p){return(0,Xr.e)((e,t)=>{let r=!1;e.subscribe((0,gn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function p(){return new Rl}function v(n){return(0,Xr.e)((e,t)=>{let r=!1;e.subscribe((0,gn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function R(n,e){const t=arguments.length>=2;return r=>r.pipe(n?lo((o,l)=>n(o,l,r)):Ia.y,(0,Nl.q)(1),t?v(e):d(()=>new Rl))}var $=k(8505);class Pe{constructor(e,t){this.id=e,this.url=t}}class We extends Pe{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ot extends Pe{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class it extends Pe{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bn extends Pe{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Bi extends Pe{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kl extends Pe{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ld extends Pe{constructor(e,t,r,o,l){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fl extends Pe{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ef extends Pe{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qp{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class co{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cd{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tf{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nf{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dd{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jp{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rt="primary";class fy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function hd(n){return new fy(n)}const h0="ngNavigationCancelingError";function py(n){const e=Error("NavigationCancelingError: "+n);return e[h0]=!0,e}function gy(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let l=0;l<r.length;l++){const h=r[l],m=n[l];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Ls(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!g0(n[o],e[o]))return!1;return!0}function g0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,l)=>r[l]===o)}return n===e}function m0(n){return Array.prototype.concat.apply([],n)}function my(n){return n.length>0?n[n.length-1]:null}function Fn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ho(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,Mn.D)(Promise.resolve(n)):vt(n)}const tD={exact:function yy(n,e,t){if(!ba(n.segments,e.segments)||!Ll(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!yy(n.children[r],e.children[r],t))return!1;return!0},subset:Xp},rf={exact:function v0(n,e){return Ls(n,e)},subset:function E0(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>g0(n[t],e[t]))},ignored:()=>!0};function _0(n,e,t){return tD[t.paths](n.root,e.root,t.matrixParams)&&rf[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Xp(n,e,t){return _y(n,e,e.segments,t)}function _y(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ba(o,t)||e.hasChildren()||!Ll(o,t,r))}if(n.segments.length===t.length){if(!ba(n.segments,t)||!Ll(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Xp(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(ba(n.segments,o)&&Ll(n.segments,o,r)&&n.children[Rt])&&_y(n.children[Rt],e,l,r)}}function Ll(n,e,t){return e.every((r,o)=>rf[t](n[o].parameters,r.parameters))}class Ho{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hd(this.queryParams)),this._queryParamMap}toString(){return nD.serialize(this)}}class jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Fn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return eg(this)}}class Vl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=hd(this.parameters)),this._parameterMap}toString(){return D0(this)}}function ba(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class I0{}class vy{parse(e){const t=new b0(e);return new Ho(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${fd(e.root,!0)}`,r=function fo(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${of(t)}=${of(o)}`).join("&"):`${of(t)}=${of(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function QT(n){return encodeURI(n)}(e.fragment)}`:""}`}}const nD=new vy;function eg(n){return n.segments.map(e=>D0(e)).join("/")}function fd(n,e){if(!n.hasChildren())return eg(n);if(e){const t=n.children[Rt]?fd(n.children[Rt],!1):"",r=[];return Fn(n.children,(o,l)=>{l!==Rt&&r.push(`${l}:${fd(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function sf(n,e){let t=[];return Fn(n.children,(r,o)=>{o===Rt&&(t=t.concat(e(r,o)))}),Fn(n.children,(r,o)=>{o!==Rt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Rt?[fd(n.children[Rt],!1)]:[`${o}:${fd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${eg(n)}/${t[0]}`:`${eg(n)}/(${t.join("//")})`}}function tg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function of(n){return tg(n).replace(/%3B/gi,";")}function ng(n){return tg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rg(n){return decodeURIComponent(n)}function Ey(n){return rg(n.replace(/\+/g,"%20"))}function D0(n){return`${ng(n.path)}${function rD(n){return Object.keys(n).map(e=>`;${ng(e)}=${ng(n[e])}`).join("")}(n.parameters)}`}const iD=/^[^\/()?;=#]+/;function af(n){const e=n.match(iD);return e?e[0]:""}const sD=/^[^=?&#]+/,aD=/^[^&#]+/;class b0{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rt]=new jt(e,t)),r}parseSegment(){const e=af(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Vl(rg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=af(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=af(this.remaining);o&&(r=o,this.capture(r))}e[rg(t)]=rg(r)}parseQueryParam(e){const t=function oD(n){const e=n.match(sD);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function uD(n){const e=n.match(aD);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=Ey(t),l=Ey(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(l)}else e[o]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=af(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=Rt);const h=this.parseChildren();t[l]=1===Object.keys(h).length?h[Rt]:new jt([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class C0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=wy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=wy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Iy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Iy(e,this._root).map(t=>t.value)}}function wy(n,e){if(n===e.value)return e;for(const t of e.children){const r=wy(n,t);if(r)return r}return null}function Iy(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Iy(n,t);if(r.length)return r.unshift(e),r}return[]}class yt{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ul(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Dy extends C0{constructor(e,t){super(e),this.snapshot=t,uf(this,e)}toString(){return this.snapshot.toString()}}function by(n,e){const t=function ig(n,e){const h=new pd([],{},{},"",{},Rt,e,null,n.root,-1,{});return new Go("",new yt(h,[]))}(n,e),r=new Jr([new Vl("",{})]),o=new Jr({}),l=new Jr({}),h=new Jr({}),m=new Jr(""),w=new yi(r,o,h,m,l,Rt,e,t.root);return w.snapshot=t.root,new Dy(new yt(w,[]),t)}class yi{constructor(e,t,r,o,l,h,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=h,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(e=>hd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(e=>hd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],l=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(l.component)break;r--}}return function lD(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class pd{constructor(e,t,r,o,l,h,m,w,C,x,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=h,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=x,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Go extends C0{constructor(e,t){super(t),this.url=e,uf(this,t)}toString(){return Ty(this._root)}}function uf(n,e){e.value._routerState=n,e.children.forEach(t=>uf(n,t))}function Ty(n){const e=n.children.length>0?` { ${n.children.map(Ty).join(", ")} } `:"";return`${n.value}${e}`}function lf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ls(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ls(e.params,t.params)||n.params.next(t.params),function p0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ls(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ls(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function T0(n,e){const t=Ls(n.params,e.params)&&function w0(n,e){return ba(n,e)&&n.every((t,r)=>Ls(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||T0(n.parent,e.parent))}function sg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function og(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return sg(n,r,o);return sg(n,r)})}(n,e,t);return new yt(r,o)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const h=l.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>sg(n,m)),h}}const r=function ag(n){return new yi(new Jr(n.url),new Jr(n.params),new Jr(n.queryParams),new Jr(n.fragment),new Jr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(l=>sg(n,l));return new yt(r,o)}}function gd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bl(n){return"object"==typeof n&&null!=n&&n.outlets}function S0(n,e,t,r,o){let l={};if(r&&Fn(r,(m,w)=>{l[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new Ho(t,l,o);const h=M0(n,e,t);return new Ho(h,l,o)}function M0(n,e,t){const r={};return Fn(n.children,(o,l)=>{r[l]=o===e?t:M0(o,e,t)}),new jt(n.segments,r)}class x0{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gd(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Bl);if(o&&o!==my(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function hD(n,e,t){if(n||(n=new jt([],{})),0===n.segments.length&&n.hasChildren())return cf(n,e,t);const r=function N0(n,e,t){let r=0,o=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return l;const h=n.segments[o],m=t[r];if(Bl(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!pD(w,C,h))return l;r+=2}else{if(!pD(w,{},h))return l;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new jt(n.segments.slice(0,r.pathIndex),{});return l.children[Rt]=new jt(n.segments.slice(r.pathIndex),n.children),cf(l,0,o)}return r.match&&0===o.length?new jt(n.segments,{}):r.match&&!n.hasChildren()?My(n,e,t):r.match?cf(n,0,o):My(n,e,t)}function cf(n,e,t){if(0===t.length)return new jt(n.segments,{});{const r=function dD(n){return Bl(n[0])?n[0].outlets:{[Rt]:n}}(t),o={};return Fn(r,(l,h)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[h]=hD(n.children[h],e,l))}),Fn(n.children,(l,h)=>{void 0===r[h]&&(o[h]=l)}),new jt(n.segments,o)}}function My(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const l=t[o];if(Bl(l)){const w=xy(l.outlets);return new jt(r,w)}if(0===o&&gd(t[0])){r.push(new Vl(n.segments[e].path,fD(t[0]))),o++;continue}const h=Bl(l)?l.outlets[Rt]:`${l}`,m=o<t.length-1?t[o+1]:null;h&&m&&gd(m)?(r.push(new Vl(h,fD(m))),o+=2):(r.push(new Vl(h,{})),o++)}return new jt(r,{})}function xy(n){const e={};return Fn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=My(new jt([],{}),0,t))}),e}function fD(n){const e={};return Fn(n,(t,r)=>e[r]=`${t}`),e}function pD(n,e,t){return n==t.path&&Ls(e,t.parameters)}class eA{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Ul(t);e.children.forEach(l=>{const h=l.value.outlet;this.deactivateRoutes(l,o[h],r),delete o[h]}),Fn(o,(l,h)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(o===l)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=Ul(e);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],o);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=Ul(e);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Ul(t);e.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],r),this.forwardEvent(new dd(l.value.snapshot))}),e.children.length&&this.forwardEvent(new tf(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(lf(o),o===l)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),lf(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function tA(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=w,h.outlet&&h.outlet.activateWith(o,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class O0{constructor(e,t){this.routes=e,this.module=t}}function jl(n){return"function"==typeof n}function md(n){return n instanceof Ho}const yd=Symbol("INITIAL_VALUE");function $l(){return Xn(n=>function id(...n){const e=(0,Po.yG)(n),t=(0,Po.jO)(n),{args:r,keys:o}=eo(n);if(0===r.length)return(0,Mn.D)([],e);const l=new pn.y(function Zh(n,e,t=Ia.y){return r=>{Yh(e,()=>{const{length:o}=n,l=new Array(o);let h=o,m=o;for(let w=0;w<o;w++)Yh(e,()=>{const C=(0,Mn.D)(n[w],e);let x=!1;C.subscribe((0,gn.x)(r,N=>{l[w]=N,x||(x=!0,m--),m||r.next(t(l.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>au(o,h):Ia.y));return t?l.pipe(fl(t)):l}(n.map(e=>e.pipe((0,Nl.q)(1),Ol(yd)))).pipe(Da((e,t)=>{let r=!1;return t.reduce((o,l,h)=>o!==yd?o:(l===yd&&(r=!0),r||!1!==l&&h!==t.length-1&&!md(l)?o:l),e)},yd),lo(e=>e!==yd),(0,Tt.U)(e=>md(e)?e:!0===e),(0,Nl.q)(1)))}class P0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hl,this.attachRef=null}}class Hl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new P0,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let k0=(()=>{class n{constructor(t,r,o,l,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=l||Rt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new _u(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Hl),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class _u{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===yi?this.route:e===Hl?this.childContexts:this.parent.get(e,t)}}let Ny=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[k0],encapsulation:2}),n})();function F0(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Oy(r,mD(e,r))}}function Oy(n,e){n.children&&F0(n.children,e)}function mD(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ug(n){const e=n.children&&n.children.map(ug),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=Ny),t}function Vs(n){return n.outlet||Rt}function L0(n,e){const t=n.filter(r=>Vs(r)===e);return t.push(...n.filter(r=>Vs(r)!==e)),t}const _d={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ca(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},_d):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const l=(e.matcher||gy)(t,n,e);if(!l)return Object.assign({},_d);const h={};Fn(l.posParams,(w,C)=>{h[C]=w.path});const m=l.consumed.length>0?Object.assign(Object.assign({},h),l.consumed[l.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:l.consumed,remainingSegments:t.slice(l.consumed.length),parameters:m,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function vd(n,e,t,r,o="corrected"){if(t.length>0&&function wd(n,e,t){return t.some(r=>hf(n,e,r)&&Vs(r)!==Rt)}(n,t,r)){const h=new jt(e,function df(n,e,t,r){const o={};o[Rt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Vs(l)!==Rt){const h=new jt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[Vs(l)]=h}return o}(n,e,r,new jt(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function yD(n,e,t){return t.some(r=>hf(n,e,r))}(n,t,r)){const h=new jt(n.segments,function Ed(n,e,t,r,o,l){const h={};for(const m of r)if(hf(n,t,m)&&!o[Vs(m)]){const w=new jt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===l?n.segments.length:e.length,h[Vs(m)]=w}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const l=new jt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function hf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Py(n,e,t,r){return!!(Vs(n)===r||r!==Rt&&hf(e,t,n))&&("**"===n.path||Ca(e,n,t).matched)}function lg(n,e,t){return 0===e.length&&!n.children[t]}class Id{constructor(e){this.segmentGroup=e||null}}class ky{constructor(e){this.urlTree=e}}function vu(n){return od(new Id(n))}function V0(n){return od(new ky(n))}class j0{constructor(e,t,r,o,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=vd(this.urlTree.root,[],[],this.config).segmentGroup,t=new jt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Rt).pipe((0,Tt.U)(l=>this.createUrlTree(cg(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe($o(l=>{if(l instanceof ky)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof Id?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Rt).pipe((0,Tt.U)(o=>this.createUrlTree(cg(o),e.queryParams,e.fragment))).pipe($o(o=>{throw o instanceof Id?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new jt([],{[Rt]:e}):e;return new Ho(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Tt.U)(l=>new jt([],l))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const l of Object.keys(r.children))"primary"===l?o.unshift(l):o.push(l);return(0,Mn.D)(o).pipe(Pl(l=>{const h=r.children[l],m=L0(t,l);return this.expandSegmentGroup(e,m,h,l).pipe((0,Tt.U)(w=>({segment:w,outlet:l})))}),Da((l,h)=>(l[h.outlet]=h.segment,l),{}),function A(n,e){const t=arguments.length>=2;return r=>r.pipe(n?lo((o,l)=>n(o,l,r)):Ia.y,y(1),t?v(e):d(()=>new Rl))}())}expandSegment(e,t,r,o,l,h){return(0,Mn.D)(r).pipe(Pl(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,l,h).pipe($o(C=>{if(C instanceof Id)return vt(null);throw C}))),R(m=>!!m),$o((m,w)=>{if(m instanceof Rl||"EmptyError"===m.name)return lg(t,o,l)?vt(new jt([],{})):vu(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,l,h,m){return Py(o,t,l,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,l,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h):vu(t):vu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?V0(l):this.lineralizeSegments(r,l).pipe((0,Pr.z)(h=>{const m=new jt(h,{});return this.expandSegment(e,m,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:x}=Ca(t,o,l);if(!m)return vu(t);const N=this.applyRedirectCommands(w,o.redirectTo,x);return o.redirectTo.startsWith("/")?V0(N):this.lineralizeSegments(o,N).pipe((0,Pr.z)(G=>this.expandSegment(e,t,r,G.concat(C),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?vt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Tt.U)(N=>(r._loadedConfig=N,new jt(o,{})))):vt(new jt(o,{}));const{matched:h,consumedSegments:m,remainingSegments:w}=Ca(t,r,o);return h?this.getChildConfig(e,r,o).pipe((0,Pr.z)(x=>{const N=x.module,G=x.routes,{segmentGroup:K,slicedSegments:fe}=vd(t,m,w,G),Fe=new jt(K.segments,K.children);if(0===fe.length&&Fe.hasChildren())return this.expandChildren(N,G,Fe).pipe((0,Tt.U)(En=>new jt(m,En)));if(0===G.length&&0===fe.length)return vt(new jt(m,{}));const tt=Vs(r)===l;return this.expandSegment(N,Fe,G,fe,tt?Rt:l,!0).pipe((0,Tt.U)(ht=>new jt(m.concat(ht.segments),ht.children)))})):vu(t)}getChildConfig(e,t,r){return t.children?vt(new O0(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?vt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Pr.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Tt.U)(l=>(t._loadedConfig=l,l))):function iA(n){return od(py(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):vt(new O0([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?vt(o.map(h=>{const m=e.get(h);let w;if(function rA(n){return n&&jl(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!jl(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return ho(w)})).pipe($l(),(0,$.b)(h=>{if(!md(h))return;const m=py(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,Tt.U)(h=>!0===h)):vt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return vt(r);if(o.numberOfChildren>1||!o.children[Rt])return od(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Rt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const l=this.createSegmentGroup(e,t.root,r,o);return new Ho(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Fn(e,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[l]=t[m]}else r[l]=o}),r}createSegmentGroup(e,t,r,o){const l=this.createSegments(e,t.segments,r,o);let h={};return Fn(t.children,(m,w)=>{h[w]=this.createSegmentGroup(e,m,r,o)}),new jt(l,h)}createSegments(e,t,r,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,o):this.findOrReturn(l,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function cg(n){const e={};for(const r of Object.keys(n.children)){const l=cg(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function _D(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new jt(n.segments.concat(e.segments),e.children)}return n}(new jt(n.segments,e))}class $0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class _i{constructor(e,t){this.component=e,this.route=t}}function ED(n,e,t){const r=n._root;return Dd(r,e?e._root:null,t,[r.value])}function Fy(n,e,t){const r=function sA(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Dd(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=Ul(e);return n.children.forEach(h=>{(function oA(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&l.routeConfig===h.routeConfig){const w=function ID(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ba(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ba(n.url,e.url)||!Ls(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!T0(n,e)||!Ls(n.queryParams,e.queryParams);default:return!T0(n,e)}}(h,l,l.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new $0(r)):(l.data=h.data,l._resolvedData=h._resolvedData),Dd(n,e,l.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new _i(m.outlet.component,h))}else h&&Gl(e,m,o),o.canActivateChecks.push(new $0(r)),Dd(n,null,l.component?m?m.children:null:t,r,o)})(h,l[h.value.outlet],t,r.concat([h.value]),o),delete l[h.value.outlet]}),Fn(l,(h,m)=>Gl(h,t.getContext(m),o)),o}function Gl(n,e,t){const r=Ul(n),o=n.value;Fn(r,(l,h)=>{Gl(l,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new _i(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class SD{}function Ly(n){return new pn.y(e=>e.error(n))}class MD{constructor(e,t,r,o,l,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h}recognize(){const e=vd(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Rt);if(null===t)return null;const r=new pd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new yt(r,t),l=new Go(this.url,o);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=Cy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const h=t.children[l],m=L0(e,l),w=this.processSegmentGroup(m,h,l);if(null===w)return null;r.push(...w)}const o=W0(r);return function qo(n){n.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const l of e){const h=this.processSegmentAgainstRoute(l,t,r,o);if(null!==h)return h}return lg(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Py(e,t,r,o))return null;let l,h=[],m=[];if("**"===e.path){const K=r.length>0?my(r).parameters:{};l=new pd(r,K,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Z0(e),Vs(e),e.component,e,Uy(t),K0(t)+r.length,Y0(e))}else{const K=Ca(t,e,r);if(!K.matched)return null;h=K.consumedSegments,m=K.remainingSegments,l=new pd(h,K.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Z0(e),Vs(e),e.component,e,Uy(t),K0(t)+h.length,Y0(e))}const w=function Vy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:x}=vd(t,h,m,w.filter(K=>void 0===K.redirectTo),this.relativeLinkResolution);if(0===x.length&&C.hasChildren()){const K=this.processChildren(w,C);return null===K?null:[new yt(l,K)]}if(0===w.length&&0===x.length)return[new yt(l,[])];const N=Vs(e)===o,G=this.processSegment(w,C,x,N?Rt:o);return null===G?null:[new yt(l,G)]}}function xD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function W0(n){const e=[],t=new Set;for(const r of n){if(!xD(r)){e.push(r);continue}const o=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=W0(r.children);e.push(new yt(r.value,o))}return e.filter(r=>!t.has(r))}function Uy(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function K0(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Z0(n){return n.data||{}}function Y0(n){return n.resolve||{}}function hg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ff(n){return Xn(e=>{const t=n(e);return t?(0,Mn.D)(t).pipe((0,Tt.U)(()=>e)):vt(e)})}class PD extends class Q0{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const $y=new g.OlP("ROUTES");class fg{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Tt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=l.create(e);return new O0(m0(h.injector.get($y,void 0,g.XFs.Self|g.XFs.Optional)).map(ug),h)}),$o(l=>{throw t._loader$=void 0,l}));return t._loader$=new uo(o,()=>new Gn.x).pipe(Yp()),t._loader$}loadModuleFactory(e){return ho(e()).pipe((0,Pr.z)(t=>t instanceof g.YKP?vt(t):(0,Mn.D)(this.compiler.compileModuleAsync(t))))}}class kD{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function J0(n){throw n}function X0(n,e,t){return e.parse("/")}function Hy(n,e){return vt(null)}const eE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ln=(()=>{class n{constructor(t,r,o,l,h,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=l,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Gn.x,this.errorHandler=J0,this.malformedUriErrorHandler=X0,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Hy,afterPreactivation:Hy},this.urlHandlingStrategy=new kD,this.routeReuseStrategy=new PD,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(g.h0i),this.console=h.get(g.c2e);const N=h.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function y0(){return new Ho(new jt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new fg(h,m,G=>this.triggerEvent(new Qp(G)),G=>this.triggerEvent(new co(G))),this.routerState=by(this.currentUrlTree,this.rootComponentType),this.transitions=new Jr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(lo(o=>0!==o.id),(0,Tt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Xn(o=>{let l=!1,h=!1;return vt(o).pipe((0,$.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Xn(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return nE(m.source)&&(this.browserUrlTree=m.extractedUrl),vt(m).pipe(Xn(N=>{const G=this.transitions.getValue();return r.next(new We(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),G!==this.transitions.getValue()?Rn.E:Promise.resolve(N)}),function vD(n,e,t,r){return Xn(o=>function B0(n,e,t,r,o){return new j0(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Tt.U)(l=>Object.assign(Object.assign({},o),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,$.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function By(n,e,t,r,o){return(0,Pr.z)(l=>function z0(n,e,t,r,o="emptyOnly",l="legacy"){try{const h=new MD(n,e,t,r,o,l).recognize();return null===h?Ly(new SD):vt(h)}catch(h){return Ly(h)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,o).pipe((0,Tt.U)(h=>Object.assign(Object.assign({},l),{targetSnapshot:h}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const K=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(K,N)}this.browserUrlTree=N.urlAfterRedirects}const G=new Bi(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(G)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:G,extractedUrl:K,source:fe,restoredState:Fe,extras:tt}=m,Wt=new We(G,this.serializeUrl(K),fe,Fe);r.next(Wt);const ht=by(K,this.rootComponentType).snapshot;return vt(Object.assign(Object.assign({},m),{targetSnapshot:ht,urlAfterRedirects:K,extras:Object.assign(Object.assign({},tt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Rn.E}),ff(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:G,replaceUrl:K}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!G,replaceUrl:!!K})}),(0,$.b)(m=>{const w=new kl(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Tt.U)(m=>Object.assign(Object.assign({},m),{guards:ED(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function H0(n,e){return(0,Pr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:h}}=t;return 0===h.length&&0===l.length?vt(Object.assign(Object.assign({},t),{guardsResult:!0})):function DD(n,e,t,r){return(0,Mn.D)(n).pipe((0,Pr.z)(o=>function AD(n,e,t,r,o){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?vt(l.map(m=>{const w=Fy(m,e,o);let C;if(function gD(n){return n&&jl(n.canDeactivate)}(w))C=ho(w.canDeactivate(n,e,t,r));else{if(!jl(w))throw new Error("Invalid CanDeactivate guard");C=ho(w(n,e,t,r))}return C.pipe(R())})).pipe($l()):vt(!0)}(o.component,o.route,t,e,r)),R(o=>!0!==o,!0))}(h,r,o,n).pipe((0,Pr.z)(m=>m&&function nA(n){return"boolean"==typeof n}(m)?function bD(n,e,t,r){return(0,Mn.D)(e).pipe(Pl(o=>Jh(function G0(n,e){return null!==n&&e&&e(new cd(n)),vt(!0)}(o.route.parent,r),function CD(n,e){return null!==n&&e&&e(new nf(n)),vt(!0)}(o.route,r),function q0(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(h=>function wD(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>Xh(()=>vt(h.guards.map(w=>{const C=Fy(w,h.node,t);let x;if(function Ry(n){return n&&jl(n.canActivateChild)}(C))x=ho(C.canActivateChild(r,n));else{if(!jl(C))throw new Error("Invalid CanActivateChild guard");x=ho(C(r,n))}return x.pipe(R())})).pipe($l())));return vt(l).pipe($l())}(n,o.path,t),function TD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return vt(!0);const o=r.map(l=>Xh(()=>{const h=Fy(l,e,t);let m;if(function yu(n){return n&&jl(n.canActivate)}(h))m=ho(h.canActivate(e,n));else{if(!jl(h))throw new Error("Invalid CanActivate guard");m=ho(h(e,n))}return m.pipe(R())}));return vt(o).pipe($l())}(n,o.route,t))),R(o=>!0!==o,!0))}(r,l,n,e):vt(m)),(0,Tt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,$.b)(m=>{if(md(m.guardsResult)){const C=py(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new ld(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),lo(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),ff(m=>{if(m.guards.canActivateChecks.length)return vt(m).pipe((0,$.b)(w=>{const C=new Fl(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Xn(w=>{let C=!1;return vt(w).pipe(function RD(n,e){return(0,Pr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return vt(t);let l=0;return(0,Mn.D)(o).pipe(Pl(h=>function ND(n,e,t,r){return function dg(n,e,t,r){const o=hg(n);if(0===o.length)return vt({});const l={};return(0,Mn.D)(o).pipe((0,Pr.z)(h=>function OD(n,e,t,r){const o=Fy(n,e,r);return ho(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,$.b)(m=>{l[h]=m}))),y(1),(0,Pr.z)(()=>hg(l).length===o.length?vt(l):Rn.E))}(n._resolve,n,e,r).pipe((0,Tt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),Cy(n,t).resolve),null)))}(h.route,r,n,e)),(0,$.b)(()=>l++),y(1),(0,Pr.z)(h=>l===o.length?vt(t):Rn.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,$.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,$.b)(w=>{const C=new ef(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),ff(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:G,replaceUrl:K}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!G,replaceUrl:!!K})}),(0,Tt.U)(m=>{const w=function A0(n,e,t){const r=sg(n,e._root,t?t._root:void 0);return new Dy(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,$.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Tt.U)(r=>(new eA(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,$.b)({next(){l=!0},complete(){l=!0}}),function re(n){return(0,Xr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;l||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),$o(m=>{if(h=!0,function f0(n){return n&&n[h0]}(m)){const w=md(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new it(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||nE(o.source)};this.scheduleNavigation(x,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new bn(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Rn.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const l={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const w=Object.assign({},h);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(l.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){F0(t),this.config=t.map(ug),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:l,fragment:h,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,x=w?this.currentUrlTree.fragment:h;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=l||null}return null!==N&&(N=this.removeEmptyProps(N)),function Ay(n,e,t,r,o){if(0===t.length)return S0(e.root,e.root,e.root,r,o);const l=function cD(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new x0(!0,0,n);let e=0,t=!1;const r=n.reduce((o,l,h)=>{if("object"==typeof l&&null!=l){if(l.outlets){const m={};return Fn(l.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===h?(l.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,l]},[]);return new x0(t,e,r)}(t);if(l.toRoot())return S0(e.root,e.root,new jt([],{}),r,o);const h=function R0(n,e,t){if(n.isAbsolute)return new Sy(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new Sy(l,l===e.root,0)}const r=gd(n.commands[0])?0:1;return function JT(n,e,t){let r=n,o=e,l=t;for(;l>o;){if(l-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Sy(r,!1,o-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),m=h.processChildren?cf(h.segmentGroup,h.index,l.commands):hD(h.segmentGroup,h.index,l.commands);return S0(e.root,h.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=md(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function pg(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},eE):!1===r?Object.assign({},tE):r,md(t))return _0(this.currentUrlTree,t,o);const l=this.parseUrl(t);return _0(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const l=t[o];return null!=l&&(r[o]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ot(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,l,h){var m,w;if(this.disposed)return Promise.resolve(!1);let C,x,N;h?(C=h.resolve,x=h.reject,N=h.promise):N=new Promise((fe,Fe)=>{C=fe,x=Fe});const G=++this.navigationId;let K;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),K=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):K=0,this.setTransition({id:G,targetPageId:K,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:C,reject:x,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(fe=>Promise.reject(fe))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(t,r=!1){var o,l;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new it(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function nE(n){return"imperative"!==n}class bd{}class gg{preload(e,t){return vt(null)}}let zy=(()=>{class n{constructor(t,r,o,l){this.router=t,this.injector=o,this.preloadingStrategy=l,this.loader=new fg(o,r,w=>t.triggerEvent(new Qp(w)),w=>t.triggerEvent(new co(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(lo(t=>t instanceof ot),Pl(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const h=l._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(t,l)):l.children&&o.push(this.processRoutes(t,l.children));return(0,Mn.D)(o).pipe((0,ad.J)(),(0,Tt.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?vt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Pr.z)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ln),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(bd))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),mg=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof We?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ot&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Jp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Jp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ql=new g.OlP("ROUTER_CONFIGURATION"),yg=new g.OlP("ROUTER_FORROOT_GUARD"),VD=[_e,{provide:I0,useClass:vy},{provide:Ln,useFactory:function Td(n,e,t,r,o,l,h={},m,w){const C=new Ln(null,n,e,t,r,o,m0(l));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function jD(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,C),h.enableTracing&&C.events.subscribe(x=>{var N,G;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(G=console.groupEnd)||void 0===G||G.call(console)}),C},deps:[I0,Hl,_e,g.zs3,g.Sil,$y,ql,[class aA{},new g.FiY],[class jy{},new g.FiY]]},Hl,{provide:yi,useFactory:function $D(n){return n.routerState.root},deps:[Ln]},zy,gg,class FD{preload(e,t){return t().pipe($o(()=>vt(null)))}},{provide:ql,useValue:{enableTracing:!1}}];function UD(){return new g.PXZ("Router",Ln)}let Wy=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[VD,oE(t),{provide:yg,useFactory:BD,deps:[[Ln,new g.FiY,new g.tp0]]},{provide:ql,useValue:r||{}},{provide:de,useFactory:sE,deps:[ce,[new g.tBr(Ze),new g.FiY],ql]},{provide:mg,useFactory:Cd,deps:[Ln,Za,ql]},{provide:bd,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:gg},{provide:g.PXZ,multi:!0,useFactory:UD},[Ky,{provide:g.ip1,multi:!0,useFactory:HD,deps:[Ky]},{provide:_g,useFactory:po,deps:[Ky]},{provide:g.tb,multi:!0,useExisting:_g}]]}}static forChild(t){return{ngModule:n,providers:[oE(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(yg,8),g.LFG(Ln,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function Cd(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new mg(n,e,t)}function sE(n,e,t={}){return t.useHash?new De(n,e):new Ge(n,e)}function BD(n){return"guarded"}function oE(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:$y,multi:!0,useValue:n}]}let Ky=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Gn.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),l=this.injector.get(Ln),h=this.injector.get(ql);return"disabled"===h.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?vt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(ql),o=this.injector.get(zy),l=this.injector.get(mg),h=this.injector.get(Ln),m=this.injector.get(g.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),l.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function HD(n){return n.appInitializer.bind(n)}function po(n){return n.bootstrapListener.bind(n)}const _g=new g.OlP("Router Initializer");class uE{constructor(){this.edadUno=0,this.edadDos=0,this.resultado=0}suma(){this.resultado=Number(this.edadUno)+Number(this.edadDos);let e=document.getElementById("inputSuma"),t=document.getElementById("inputPromedio");e.value=`${this.resultado}`,t.value=""+this.resultado/2}limpiar(){let e=document.getElementById("inputSuma"),t=document.getElementById("inputPromedio");e.value="",t.value="";let r=document.getElementById("edadUno"),o=document.getElementById("edadDos");r.value="",o.value=""}}let Zy=(()=>{class n{constructor(){this.title="Garcia Ian",this.miSuma=new uE}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:22,vars:2,consts:[["charset","utf-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","description","content",""],["name","viewport","content","width=device-width, initial-scale=1"],["rel","stylesheet","href",""],["type","text","id","edadUno",3,"ngModel","ngModelChange"],["type","text","id","edadDos",3,"ngModel","ngModelChange"],["type","button","value","sumar",3,"click"],["type","button","value","limpiar",3,"click"],["type","text","id","inputSuma","disabled",""],["type","text","id","inputPromedio","disabled",""]],template:function(t,r){1&t&&(g.TgZ(0,"html")(1,"head"),g._UZ(2,"meta",0)(3,"meta",1),g.TgZ(4,"title"),g._uU(5,"Garcia Ian"),g.qZA(),g._UZ(6,"meta",2)(7,"meta",3)(8,"link",4),g.qZA(),g.TgZ(9,"body"),g._uU(10," Garcia Ian "),g._UZ(11,"br"),g.TgZ(12,"input",5),g.NdJ("ngModelChange",function(l){return r.miSuma.edadUno=l}),g.qZA(),g.TgZ(13,"input",6),g.NdJ("ngModelChange",function(l){return r.miSuma.edadDos=l}),g.qZA(),g.TgZ(14,"input",7),g.NdJ("click",function(){return r.miSuma.suma()}),g.qZA(),g.TgZ(15,"input",8),g.NdJ("click",function(){return r.miSuma.limpiar()}),g.qZA(),g._UZ(16,"br"),g._uU(17," Suma: "),g._UZ(18,"input",9)(19,"br"),g._uU(20," Promedio: "),g._UZ(21,"input",10),g.qZA()()),2&t&&(g.xp6(12),g.Q6J("ngModel",r.miSuma.edadUno),g.xp6(1),g.Q6J("ngModel",r.miSuma.edadDos))},directives:[Fo,vl,Qc],styles:[""]}),n})();var ye=k(5861),qD=k(4986),vi=k(5813);function Yy(){return(0,Xr.e)((n,e)=>{let t,r=!1;n.subscribe((0,gn.x)(e,o=>{const l=t;t=o,r&&e.next([l,o]),r=!0}))})}function uA(n,e){return n===e}k(4087);var Ye,WD=k(3942),zl=k(9681),Qy=k(4859),Wl=k(1877),Pt=k(2090),KD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},zo={},cE=cE||{},ct=KD||self;function Jy(){}function dE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ad(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var vg="closure_uid_"+(1e9*Math.random()>>>0),ZD=0;function lA(n,e,t){return n.call.apply(n.bind,arguments)}function fE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function wr(n,e,t){return(wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lA:fE).apply(null,arguments)}function Eg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ir(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function wu(){this.s=this.s,this.o=this.o}var QD={};wu.prototype.s=!1,wu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function hE(n){return Object.prototype.hasOwnProperty.call(n,vg)&&n[vg]||(n[vg]=++ZD)}(this);delete QD[n]}},wu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},gE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function pf(n){return Array.prototype.concat.apply([],arguments)}function Iu(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function wg(n){return/^[\s\xa0]*$/.test(n)}var ei,Sd=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Oi(n,e){return-1!=n.indexOf(e)}function Xy(n,e){return n<e?-1:n>e?1:0}e:{var go=ct.navigator;if(go){var Md=go.userAgent;if(Md){ei=Md;break e}}ei=""}function kr(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Du(n){const e={};for(const t in n)e[t]=n[t];return e}var gf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ls(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<gf.length;l++)t=gf[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function mf(n){return mf[" "](n),n}mf[" "]=Jy;var Ta,n,Rd=Oi(ei,"Opera"),mo=Oi(ei,"Trident")||Oi(ei,"MSIE"),Kl=Oi(ei,"Edge"),bu=Kl||mo,Zl=Oi(ei,"Gecko")&&!(Oi(ei.toLowerCase(),"webkit")&&!Oi(ei,"Edge"))&&!(Oi(ei,"Trident")||Oi(ei,"MSIE"))&&!Oi(ei,"Edge"),Nd=Oi(ei.toLowerCase(),"webkit")&&!Oi(ei,"Edge");function Yl(){var n=ct.document;return n?n.documentMode:void 0}e:{var Ig="",Dg=(n=ei,Zl?/rv:([^\);]+)(\)|;)/.exec(n):Kl?/Edge\/([\d\.]+)/.exec(n):mo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Nd?/WebKit\/(\S+)/.exec(n):Rd?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Dg&&(Ig=Dg?Dg[1]:""),mo){var bg=Yl();if(null!=bg&&bg>parseFloat(Ig)){Ta=String(bg);break e}}Ta=Ig}var mE={};var _E=ct.document&&mo&&(Yl()||parseInt(Ta,10))||void 0,vE=function(){if(!ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ct.addEventListener("test",Jy,e),ct.removeEventListener("test",Jy,e)}catch(t){}return n}();function Ei(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function yf(n,e){if(Ei.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Zl){e:{try{mf(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:XD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&yf.Z.h.call(this)}}Ei.prototype.h=function(){this.defaultPrevented=!0},Ir(yf,Ei);var XD={2:"touch",3:"pen",4:"mouse"};yf.prototype.h=function(){yf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Od="closure_listenable_"+(1e6*Math.random()|0),EE=0;function eb(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++EE,this.ca=this.fa=!1}function Tg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function _f(n){this.src=n,this.g={},this.h=0}function t_(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=pE(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(Tg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Ag(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}_f.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var h=Ag(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new eb(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var n_="closure_lm_"+(1e6*Math.random()|0),r_={};function tb(n,e,t,r,o){if(r&&r.once)return Sg(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)tb(n,e[l],t,r,o);return null}return t=bE(t),n&&n[Od]?n.N(e,t,Ad(r)?!!r.capture:!!r,o):wE(n,e,t,!1,r,o)}function wE(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var h=Ad(o)?!!o.capture:!!o,m=s_(n);if(m||(n[n_]=m=new _f(n)),(t=m.add(e,t,r,h,l)).proxy)return t;if(r=function i_(){var e=cA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)vE||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(nb(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Sg(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Sg(n,e[l],t,r,o);return null}return t=bE(t),n&&n[Od]?n.O(e,t,Ad(r)?!!r.capture:!!r,o):wE(n,e,t,!0,r,o)}function IE(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)IE(n,e[l],t,r,o);else r=Ad(r)?!!r.capture:!!r,t=bE(t),n&&n[Od]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Ag(l=n.g[e],t,r,o))&&(Tg(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=s_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ag(e,t,r,o)),(t=-1<n?e[n]:null)&&DE(t))}function DE(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Od])t_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(nb(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=s_(e))?(t_(t,n),0==t.h&&(t.src=null,e[n_]=null)):Tg(n)}}}function nb(n){return n in r_?r_[n]:r_[n]="on"+n}function cA(n,e){if(n.ca)n=!0;else{e=new yf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&DE(n),n=t.call(r,e)}return n}function s_(n){return(n=n[n_])instanceof _f?n:null}var Mg="__closure_events_fn_"+(1e9*Math.random()>>>0);function bE(n){return"function"==typeof n?n:(n[Mg]||(n[Mg]=function(e){return n.handleEvent(e)}),n[Mg])}function Fr(){wu.call(this),this.i=new _f(this),this.P=this,this.I=null}function qn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ei(e,n);else if(e instanceof Ei)e.target=e.target||n;else{var o=e;ls(e=new Ei(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var h=e.g=t[l];o=xg(h,r,!0,e)&&o}if(o=xg(h=e.g=n,r,!0,e)&&o,o=xg(h,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=xg(h=e.g=t[l],r,!1,e)&&o}function xg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var h=e[l];if(h&&!h.ca&&h.capture==t){var m=h.listener,w=h.ia||h.src;h.fa&&t_(n.i,h),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Ir(Fr,wu),Fr.prototype[Od]=!0,Fr.prototype.removeEventListener=function(n,e,t,r){IE(this,n,e,t,r)},Fr.prototype.M=function(){if(Fr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Tg(t[r]);delete n.g[e],n.h--}}this.I=null},Fr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Fr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Rg=ct.JSON.stringify;function rb(){var n=AE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var a_,vf=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ib,n=>n.reset());class ib{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function TE(n){ct.setTimeout(()=>{throw n},0)}function o_(n,e){a_||function sb(){var n=ct.Promise.resolve(void 0);a_=function(){n.then(SE)}}(),u_||(a_(),u_=!0),AE.add(n,e)}var u_=!1,AE=new class CE{constructor(){this.h=this.g=null}add(e,t){const r=vf.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function SE(){for(var n;n=rb();){try{n.h.call(n.g)}catch(t){TE(t)}var e=vf;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}u_=!1}function Ng(n,e){Fr.call(this),this.h=n||1,this.g=e||ct,this.j=wr(this.kb,this),this.l=Date.now()}function Og(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Pg(n,e,t){if("function"==typeof n)t&&(n=wr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=wr(n.handleEvent,n)}return 2147483647<Number(e)?-1:ct.setTimeout(n,e||0)}function kg(n){n.g=Pg(()=>{n.g=null,n.i&&(n.i=!1,kg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ir(Ng,Fr),(Ye=Ng.prototype).da=!1,Ye.S=null,Ye.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),qn(this,"tick"),this.da&&(Og(this),this.start()))}},Ye.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.M=function(){Ng.Z.M.call(this),Og(this),delete this.g};class dA extends wu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kg(this)}M(){super.M(),this.g&&(ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ql(n){wu.call(this),this.h=n,this.g={}}Ir(Ql,wu);var ME=[];function ob(n,e,t,r){Array.isArray(t)||(t&&(ME[0]=t.toString()),t=ME);for(var o=0;o<t.length;o++){var l=tb(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Pd(n){kr(n.g,function(e,t){this.g.hasOwnProperty(t)&&DE(e)},n),n.g={}}function Ef(){this.g=!0}function kd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Lg(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var h=1;h<o.length;h++)o[h]=""}}}return Rg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Ql.prototype.M=function(){Ql.Z.M.call(this),Pd(this)},Ql.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ef.prototype.Aa=function(){this.g=!1},Ef.prototype.info=function(){};var Aa={},ab=null;function Vg(){return ab=ab||new Fr}function Ug(n){Ei.call(this,Aa.Ma,n)}function Jl(n){const e=Vg();qn(e,new Ug(e,n))}function d_(n,e){Ei.call(this,Aa.STAT_EVENT,n),this.stat=e}function wi(n){const e=Vg();qn(e,new d_(e,n))}function Bg(n,e){Ei.call(this,Aa.Na,n),this.size=e}function Fd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ct.setTimeout(function(){n()},e)}Aa.Ma="serverreachability",Ir(Ug,Ei),Aa.STAT_EVENT="statevent",Ir(d_,Ei),Aa.Na="timingevent",Ir(Bg,Ei);var wf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},jg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $g(){}function h_(){}$g.prototype.h=null;var p_,Ld={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function If(){Ei.call(this,"d")}function f_(){Ei.call(this,"c")}function Hg(){}function Df(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ql(this),this.P=m_,this.W=new Ng(n=bu?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new g_}function g_(){this.i=null,this.g="",this.h=!1}Ir(If,Ei),Ir(f_,Ei),Ir(Hg,$g),Hg.prototype.g=function(){return new XMLHttpRequest},Hg.prototype.i=function(){return{}},p_=new Hg;var m_=45e3,Gg={},bf={};function qg(n,e,t){n.K=1,n.v=I_(ji(e)),n.s=t,n.U=!0,y_(n,null)}function y_(n,e){n.F=Date.now(),Vd(n),n.A=ji(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Yg(t.h,"t",r),n.C=0,t=n.l.H,n.h=new g_,n.g=gt(n.l,t?e:null,!n.s),0<n.O&&(n.L=new dA(wr(n.Ia,n,n.g),n.O)),ob(n.V,n.g,"readystatechange",n.gb),e=n.H?Du(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Jl(1),function l_(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var h="",m=l.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var x=C[0];C=C[1];var N=x.split("_");h=2<=N.length&&"type"==N[1]?h+(x+"=")+C+"&":h+(x+"=redacted&")}}else h=null;else h=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function __(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function v_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=RE(n,t),o==bf){4==e&&(n.o=4,wi(14),r=!1),kd(n.j,n.m,null,"[Incomplete Response]");break}if(o==Gg){n.o=4,wi(15),kd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}kd(n.j,n.m,o,null),E_(n,o)}__(n)&&o!=bf&&o!=Gg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,wi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),k_(e),e.L=!0,wi(11))):(kd(n.j,n.m,t,"[Invalid Chunked Response]"),Cu(n),Cf(n))}function RE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?bf:(t=Number(e.substring(t,r)),isNaN(t)?Gg:(r+=1)+t>e.length?bf:(e=e.substr(r,t),n.C=r+t,e))}function Vd(n){n.Y=Date.now()+n.P,ub(n,n.P)}function ub(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Fd(wr(n.eb,n),e)}function zg(n){n.B&&(ct.clearTimeout(n.B),n.B=null)}function Cf(n){0==n.l.G||n.I||nm(n.l,n)}function Cu(n){zg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Og(n.W),Pd(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function E_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||C_(t.i,n)))if(t.I=n.N,!n.J&&C_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Fd(wr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;F_(t),kf(t)}P_(t),wi(18)}if(1>=Mf(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else xu(t,11)}else if((n.J||t.g==n)&&F_(t),!wg(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const x=C[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const G=C[5];null!=G&&"number"==typeof G&&0<G&&(t.K=r=1.5*G,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const fe=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var l=r.i;!l.g&&(Oi(fe,"spdy")||Oi(fe,"quic")||Oi(fe,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Qg(l,l.h),l.h=null))}if(r.D){const Fe=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,Cn(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=_b(r,r.H?r.la:null,r.W),h.J){T_(r.i,h);var m=h,w=r.K;w&&m.setTimeout(w),m.B&&(zg(m),Vd(m)),r.g=h}else Mu(r);0<t.l.length&&Ff(t)}else"stop"!=C[0]&&"close"!=C[0]||xu(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?xu(t,7):em(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Jl(4)}catch(C){}}function Wg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(dE(n)||"string"==typeof n)gE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(dE(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function Dr(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(dE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function Ud(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ud)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function w_(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Tu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Tu(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Tu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ye=Df.prototype).setTimeout=function(n){this.P=n},Ye.gb=function(n){n=n.target;const e=this.L;e&&3==Sa(n)?e.l():this.Ia(n)},Ye.Ia=function(n){try{if(n==this.g)e:{const x=Sa(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>x)&&(3!=x||bu||this.g&&(this.h.h||this.g.ga()||QE(this.g)))){this.I||4!=x||7==e||Jl(8==e||0>=N?3:2),zg(this);var t=this.g.ba();this.N=t;t:if(__(this)){var r=QE(this.g);n="";var o=r.length,l=4==Sa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Cu(this),Cf(this);var h="";break t}this.h.i=new ct.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function c_(n,e,t,r,o,l,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+h})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wg(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,wi(12),Cu(this),Cf(this);break e}kd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,E_(this,t)}this.U?(v_(this,x,h),bu&&this.i&&3==x&&(ob(this.V,this.W,"tick",this.fb),this.W.start())):(kd(this.j,this.m,h,null),E_(this,h)),4==x&&Cu(this),this.i&&!this.I&&(4==x?nm(this.l,this):(this.i=!1,Vd(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,wi(12)):(this.o=0,wi(13)),Cu(this),Cf(this)}}}catch(x){}},Ye.fb=function(){if(this.g){var n=Sa(this.g),e=this.g.ga();this.C<e.length&&(zg(this),v_(this,n,e),this.i&&4!=n&&Vd(this))}},Ye.cancel=function(){this.I=!0,Cu(this)},Ye.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Fg(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Jl(3),wi(17)),Cu(this),this.o=2,Cf(this)):ub(this,this.Y-n)},(Ye=Ud.prototype).R=function(){w_(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ye.T=function(){return w_(this),this.g.concat()},Ye.get=function(n,e){return Tu(this.h,n)?this.h[n]:e},Ye.set=function(n,e){Tu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ye.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var NE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Au(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Au){this.g=void 0!==e?e:n.g,Kg(this,n.j),this.s=n.s,Zg(this,n.i),Tf(this,n.m),this.l=n.l,e=n.h;var t=new Sf;t.i=e.i,e.g&&(t.g=new Ud(e.g),t.h=e.h),PE(this,t),this.o=n.o}else n&&(t=String(n).match(NE))?(this.g=!!e,Kg(this,t[1]||"",!0),this.s=$i(t[2]||""),Zg(this,t[3]||"",!0),Tf(this,t[4]),this.l=$i(t[5]||"",!0),PE(this,t[6]||"",!0),this.o=$i(t[7]||"")):(this.g=!!e,this.h=new Sf(null,this.g))}function ji(n){return new Au(n)}function Kg(n,e,t){n.j=t?$i(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Zg(n,e,t){n.i=t?$i(e,!0):e}function Tf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function PE(n,e,t){e instanceof Sf?(n.h=e,function cb(n,e){e&&!n.j&&(Su(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(VE(this,r),Yg(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Af(e,FE)),n.h=new Sf(e,n.g))}function Cn(n,e,t){n.h.set(e,t)}function I_(n){return Cn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function $i(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Af(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,lb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function lb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Au.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Af(e,yo,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Af(e,yo,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Af(t,"/"==t.charAt(0)?vo:_o,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Af(t,LE)),n.join("")};var yo=/[#\/\?@]/g,_o=/[#\?:]/g,vo=/[#\?]/g,FE=/[#\?@]/g,LE=/#/g;function Sf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Su(n){n.g||(n.g=new Ud,n.h=0,n.i&&function OE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function VE(n,e){Su(n),e=Wo(n,e),Tu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Tu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&w_(n)))}function UE(n,e){return Su(n),e=Wo(n,e),Tu(n.g.h,e)}function Yg(n,e,t){VE(n,e),0<t.length&&(n.i=null,n.g.set(Wo(n,e),Iu(t)),n.h+=t.length)}function Wo(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function jE(n){this.l=n||$E,n=ct.PerformanceNavigationTiming?0<(n=ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ct.g&&ct.g.Ea&&ct.g.Ea()&&ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=Sf.prototype).add=function(n,e){Su(this),this.i=null,n=Wo(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ye.forEach=function(n,e){Su(this),this.g.forEach(function(t,r){gE(t,function(o){n.call(e,o,r,this)},this)},this)},Ye.T=function(){Su(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},Ye.R=function(n){Su(this);var e=[];if("string"==typeof n)UE(this,n)&&(e=pf(e,this.g.get(Wo(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=pf(e,n[t])}return e},Ye.set=function(n,e){return Su(this),this.i=null,UE(this,n=Wo(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ye.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var h=o;""!==r[l]&&(h+="="+encodeURIComponent(String(r[l]))),n.push(h)}}return this.i=n.join("&")};var $E=10;function b_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Mf(n){return n.h?1:n.g?n.g.size:0}function C_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Qg(n,e){n.g?n.g.add(e):n.h=e}function T_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function A_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Iu(n.i)}function xf(){}function HE(){this.g=new xf}function GE(n,e,t){const r=t||"";try{Wg(n,function(o,l){let h=o;Ad(o)&&(h=Rg(o)),e.push(r+l+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Rf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function Bd(n){this.l=n.$b||null,this.j=n.ib||!1}function Nf(n,e){Fr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Jg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jE.prototype.cancel=function(){if(this.i=A_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},xf.prototype.stringify=function(n){return ct.JSON.stringify(n,void 0)},xf.prototype.parse=function(n){return ct.JSON.parse(n,void 0)},Ir(Bd,$g),Bd.prototype.g=function(){return new Nf(this.l,this.j)},Bd.prototype.i=function(n){return function(){return n}}({}),Ir(Nf,Fr);var Jg=0;function S_(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Of(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Pf(n)}function Pf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ye=Nf.prototype).open=function(n,e){if(this.readyState!=Jg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Pf(this)},Ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Of(this)),this.readyState=Jg},Ye.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Pf(this)),this.g&&(this.readyState=3,Pf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;S_(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ye.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Of(this):Pf(this),3==this.readyState&&S_(this)}},Ye.Ua=function(n){this.g&&(this.response=this.responseText=n,Of(this))},Ye.Ta=function(n){this.g&&(this.response=n,Of(this))},Ye.ha=function(){this.g&&Of(this)},Ye.setRequestHeader=function(n,e){this.v.append(n,e)},Ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Nf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var db=ct.JSON.parse;function lr(n){Fr.call(this),this.headers=new Ud,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zE,this.K=this.L=!1}Ir(lr,Fr);var zE="",hb=/^https?$/i,fb=["POST","PUT"];function gb(n){return"content-type"==n.toLowerCase()}function WE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,KE(n),Xg(n)}function KE(n){n.D||(n.D=!0,qn(n,"complete"),qn(n,"error"))}function ZE(n){if(n.h&&void 0!==cE&&(!n.C[1]||4!=Sa(n)||2!=n.ba()))if(n.v&&4==Sa(n))Pg(n.Fa,0,n);else if(qn(n,"readystatechange"),4==Sa(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(NE)[1]||null;if(!o&&ct.self&&ct.self.location){var l=ct.self.location.protocol;o=l.substr(0,l.length-1)}r=!hb.test(o?o.toLowerCase():"")}t=r}if(t)qn(n,"complete"),qn(n,"success");else{n.m=6;try{var h=2<Sa(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.ba()+"]",KE(n)}}finally{Xg(n)}}}function Xg(n,e){if(n.g){YE(n);const t=n.g,r=n.C[0]?Jy:null;n.g=null,n.C=null,e||qn(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function YE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(ct.clearTimeout(n.A),n.A=null)}function Sa(n){return n.g?n.g.readyState:0}function QE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case zE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function M_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function mb(n){let e="";return kr(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Cn(n,e,t))}function jd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function x_(n){this.za=0,this.l=[],this.h=new Ef,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=jd("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=jd("baseRetryDelayMs",5e3,n),this.$a=jd("retryDelaySeedMs",1e4,n),this.Ya=jd("forwardChannelMaxRetries",2,n),this.ra=jd("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new jE(n&&n.concurrentRequestLimit),this.Ca=new HE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function em(n){if(R_(n),3==n.G){var e=n.V++,t=ji(n.F);Cn(t,"SID",n.J),Cn(t,"RID",e),Cn(t,"TYPE","terminate"),$d(n,t),(e=new Df(n,n.h,e,void 0)).K=2,e.v=I_(ji(t)),t=!1,ct.navigator&&ct.navigator.sendBeacon&&(t=ct.navigator.sendBeacon(e.v.toString(),"")),!t&&ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=gt(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Vd(e)}L_(n)}function kf(n){n.g&&(k_(n),n.g.cancel(),n.g=null)}function R_(n){kf(n),n.u&&(ct.clearTimeout(n.u),n.u=null),F_(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ct.clearTimeout(n.m),n.m=null)}function tm(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Ff(n)}function Ff(n){b_(n.i)||n.m||(n.m=!0,o_(n.Ha,n),n.C=0)}function N_(n,e){var t;t=e?e.m:n.V++;const r=ji(n.F);Cn(r,"SID",n.J),Cn(r,"RID",t),Cn(r,"AID",n.U),$d(n,r),n.o&&n.s&&M_(r,n.o,n.s),t=new Df(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=O_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Qg(n.i,t),qg(t,r,e)}function $d(n,e){n.j&&Wg({},function(t,r){Cn(e,r,t)})}function O_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?wr(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const h=["count="+t];-1==l?0<t?(l=o[0].h,h.push("ofs="+l)):l=0:h.push("ofs="+l);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const x=o[w].g;if(C-=l,0>C)l=Math.max(0,o[w].h-100),m=!1;else try{GE(x,h,"req"+C+"_")}catch(N){r&&r(x)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Mu(n){n.g||n.u||(n.Y=1,o_(n.Ga,n),n.A=0)}function P_(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Fd(wr(n.Ga,n),yb(n,n.A)),n.A++,0))}function k_(n){null!=n.B&&(ct.clearTimeout(n.B),n.B=null)}function Xl(n){n.g=new Df(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ji(n.oa);Cn(e,"RID","rpc"),Cn(e,"SID",n.J),Cn(e,"CI",n.N?"0":"1"),Cn(e,"AID",n.U),$d(n,e),Cn(e,"TYPE","xmlhttp"),n.o&&n.s&&M_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=I_(ji(e)),t.s=null,t.U=!0,y_(t,n)}function F_(n){null!=n.v&&(ct.clearTimeout(n.v),n.v=null)}function nm(n,e){var t=null;if(n.g==e){F_(n),k_(n),n.g=null;var r=2}else{if(!C_(n.i,e))return;t=e.D,T_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;qn(r=Vg(),new Bg(r,t,e,o)),Ff(n)}else Mu(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function JE(n,e){return!(Mf(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Fd(wr(n.Ha,n,e),yb(n,n.C)),n.C++,0)))}(n,e)||2==r&&P_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:xu(n,5);break;case 4:xu(n,10);break;case 3:xu(n,6);break;default:xu(n,2)}}function yb(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function xu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=wr(n.jb,n);t||(t=new Au("//www.google.com/images/cleardot.gif"),ct.location&&"http"==ct.location.protocol||Kg(t,"https"),I_(t)),function qE(n,e){const t=new Ef;if(ct.Image){const r=new Image;r.onload=Eg(Rf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Eg(Rf,t,r,"TestLoadImage: error",!1,e),r.onabort=Eg(Rf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Eg(Rf,t,r,"TestLoadImage: timeout",!1,e),ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else wi(2);n.G=0,n.j&&n.j.va(e),L_(n),R_(n)}function L_(n){n.G=0,n.I=-1,n.j&&((0!=A_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Iu(n.l),n.l.length=0),n.j.ua())}function _b(n,e,t){let r=function kE(n){return n instanceof Au?ji(n):new Au(n,void 0)}(t);if(""!=r.i)e&&Zg(r,e+"."+r.i),Tf(r,r.m);else{const o=ct.location;r=function D_(n,e,t,r){var o=new Au(null,void 0);return n&&Kg(o,n),e&&Zg(o,e),t&&Tf(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&kr(n.aa,function(o,l){Cn(r,l,o)}),t=n.sa,(e=n.D)&&t&&Cn(r,e,t),Cn(r,"VER",n.ma),$d(n,r),r}function gt(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lr(t&&n.Ba&&!n.qa?new Bd({ib:!0}):n.qa)).L=n.H,e}function XE(){}function rm(){if(mo&&!(10<=Number(_E)))throw Error("Environmental error: no available transport.")}function cs(n,e){Fr.call(this),this.g=new x_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!wg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ma(this)}function Lf(n){If.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ew(){f_.call(this),this.status=1}function Ma(n){this.g=n}(Ye=lr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():p_.g(),this.C=function xE(n){return n.h||(n.h=n.i())}(this.u?this.u:p_),this.g.onreadystatechange=wr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void WE(this,l)}n=t||"";const o=new Ud(this.headers);r&&Wg(r,function(l,h){o.set(h,l)}),r=function JD(n){e:{var e=gb;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=ct.FormData&&n instanceof ct.FormData,!(0<=pE(fb,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,h){this.g.setRequestHeader(h,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{YE(this),0<this.B&&((this.K=function pb(n){return mo&&function yE(){return function xd(n){var e=mE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Sd(String(Ta)).split("."),t=Sd("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",l=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=Xy(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||Xy(0==o[2].length,0==l[2].length)||Xy(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wr(this.pa,this)):this.A=Pg(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){WE(this,l)}},Ye.pa=function(){void 0!==cE&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qn(this,"timeout"),this.abort(8))},Ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,qn(this,"complete"),qn(this,"abort"),Xg(this))},Ye.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xg(this,!0)),lr.Z.M.call(this)},Ye.Fa=function(){this.s||(this.F||this.v||this.l?ZE(this):this.cb())},Ye.cb=function(){ZE(this)},Ye.ba=function(){try{return 2<Sa(this)?this.g.status:-1}catch(n){return-1}},Ye.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ye.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),db(e)}},Ye.Da=function(){return this.m},Ye.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=x_.prototype).ma=8,Ye.G=1,Ye.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ye.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Df(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=Du(l),ls(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=O_(this,o,e),Cn(t=ji(this.F),"RID",n),Cn(t,"CVER",22),this.D&&Cn(t,"X-HTTP-Session-Id",this.D),$d(this,t),this.o&&l&&M_(t,this.o,l),Qg(this.i,o),this.Ra&&Cn(t,"TYPE","init"),this.ja?(Cn(t,"$req",e),Cn(t,"SID","null"),o.$=!0,qg(o,t,null)):qg(o,t,e),this.G=2}}else 3==this.G&&(n?N_(this,n):0==this.l.length||b_(this.i)||N_(this))},Ye.Ga=function(){if(this.u=null,Xl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Fd(wr(this.bb,this),n)}},Ye.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,wi(10),kf(this),Xl(this))},Ye.ab=function(){null!=this.v&&(this.v=null,kf(this),P_(this),wi(19))},Ye.jb=function(n){n?(this.h.info("Successfully pinged google.com"),wi(2)):(this.h.info("Failed to ping google.com"),wi(1))},(Ye=XE.prototype).xa=function(){},Ye.wa=function(){},Ye.va=function(){},Ye.ua=function(){},Ye.Oa=function(){},rm.prototype.g=function(n,e){return new cs(n,e)},Ir(cs,Fr),cs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),o_(wr(n.hb,n,e))),wi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=_b(n,null,n.W),Ff(n)},cs.prototype.close=function(){em(this.g)},cs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,tm(this.g,e)}else this.v?((e={}).__data__=Rg(n),tm(this.g,e)):tm(this.g,n)},cs.prototype.M=function(){this.g.j=null,delete this.j,em(this.g),delete this.g,cs.Z.M.call(this)},Ir(Lf,If),Ir(ew,f_),Ir(Ma,XE),Ma.prototype.xa=function(){qn(this.g,"a")},Ma.prototype.wa=function(n){qn(this.g,new Lf(n))},Ma.prototype.va=function(n){qn(this.g,new ew(n))},Ma.prototype.ua=function(){qn(this.g,"b")},rm.prototype.createWebChannel=rm.prototype.g,cs.prototype.send=cs.prototype.u,cs.prototype.open=cs.prototype.m,cs.prototype.close=cs.prototype.close,wf.NO_ERROR=0,wf.TIMEOUT=8,wf.HTTP_ERROR=6,jg.COMPLETE="complete",h_.EventType=Ld,Ld.OPEN="a",Ld.CLOSE="b",Ld.ERROR="c",Ld.MESSAGE="d",Fr.prototype.listen=Fr.prototype.N,lr.prototype.listenOnce=lr.prototype.O,lr.prototype.getLastError=lr.prototype.La,lr.prototype.getLastErrorCode=lr.prototype.Da,lr.prototype.getStatus=lr.prototype.ba,lr.prototype.getResponseJson=lr.prototype.Qa,lr.prototype.getResponseText=lr.prototype.ga,lr.prototype.send=lr.prototype.ea;var im=zo.createWebChannelTransport=function(){return new rm},zn=zo.getStatEventTarget=function(){return Vg()},tw=zo.ErrorCode=wf,nw=zo.EventType=jg,vb=zo.Event=Aa,rw=zo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},iw=zo.FetchXmlHttpFactory=Bd,Vf=zo.WebChannel=h_,sw=zo.XhrIo=lr;const V_="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let Hd="9.6.10";const Ru=new Wl.Yd("@firebase/firestore");function ec(){return Ru.logLevel}function Ne(n,...e){if(Ru.logLevel<=Wl.in.DEBUG){const t=e.map(sm);Ru.debug(`Firestore (${Hd}): ${n}`,...t)}}function cr(n,...e){if(Ru.logLevel<=Wl.in.ERROR){const t=e.map(sm);Ru.error(`Firestore (${Hd}): ${n}`,...t)}}function Nu(n,...e){if(Ru.logLevel<=Wl.in.WARN){const t=e.map(sm);Ru.warn(`Firestore (${Hd}): ${n}`,...t)}}function sm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Je(n="Unexpected state"){const e=`FIRESTORE (${Hd}) INTERNAL ASSERTION FAILED: `+n;throw cr(e),new Error(e)}function Dt(n,e){n||Je()}function $e(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Pt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ow{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class uw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lw{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let h=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Lr,e.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const C=h;e.enqueueRetryable((0,ye.Z)(function*(){yield C.promise,yield l(r.currentUser)}))},w=C=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Lr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new ow(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new ti(e)}}class Ib{constructor(e,t,r){this.type="FirstParty",this.user=ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class cw{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Ib(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Db{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.p;return this.p=l.token,Ne("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?o(l):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.p=t.token,new dw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Us{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function hA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Us.A=-1;class bb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=hA(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function xa(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function hw(n){return n+"\0"}class er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return er.fromMillis(Date.now())}static fromDate(e){return er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new er(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new er(0,0))}static max(){return new Et(new er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Gd(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function tc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Uf{constructor(e,t,r){void 0===t?t=0:t>e.length&&Je(),void 0===r?r=e.length-t:r>e.length-t&&Je(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Uf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Uf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yt extends Uf{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const Cb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class br extends Uf{construct(e,t,r){return new br(e,t,r)}static isValidIdentifier(e){return Cb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new br(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new Ae(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Ae(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(l(),o++)}if(l(),h)throw new Ae(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new br(t)}static emptyPath(){return new br([])}}class qd{constructor(e){this.fields=e,e.sort(br.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Nn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new Nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nn.EMPTY_BYTE_STRING=new Nn("");const Ab=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ra(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=Ab.exec(n);if(Dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wn(n.seconds),nanos:Wn(n.nanos)}}function Wn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ou(n){return"string"==typeof n?Nn.fromBase64String(n):Nn.fromUint8Array(n)}function U_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function B_(n){const e=n.mapValue.fields.__previous_value__;return U_(e)?B_(e):e}function Bf(n){const e=Ra(n.mapValue.fields.__local_write_time__.timestampValue);return new er(e.seconds,e.nanos)}class j_{constructor(e,t,r,o,l,h,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Na{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Na("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Na&&e.projectId===this.projectId&&e.database===this.database}}function Pu(n){return null==n}function zd(n){return 0===n&&1/n==-1/0}function pw(n){return"number"==typeof n&&Number.isInteger(n)&&!zd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Yt.fromString(e))}static fromName(e){return new Ve(Yt.fromString(e).popFirst(5))}static empty(){return new Ve(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Yt(e.slice()))}}const gw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},om={nullValue:"NULL_VALUE"};function nc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?U_(n)?4:z_(n)?9:10:Je()}function Eo(n,e){if(n===e)return!0;const t=nc(n);if(t!==nc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bf(n).isEqual(Bf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Ra(r.timestampValue),h=Ra(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ou(n.bytesValue).isEqual(Ou(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Wn(r.geoPointValue.latitude)===Wn(o.geoPointValue.latitude)&&Wn(r.geoPointValue.longitude)===Wn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Wn(r.integerValue)===Wn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=Wn(r.doubleValue),h=Wn(o.doubleValue);return l===h?zd(l)===zd(h):isNaN(l)&&isNaN(h)}return!1}(n,e);case 9:return xa(n.arrayValue.values||[],e.arrayValue.values||[],Eo);case 10:return function(r,o){const l=r.mapValue.fields||{},h=o.mapValue.fields||{};if(Gd(l)!==Gd(h))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===h[m]||!Eo(l[m],h[m])))return!1;return!0}(n,e);default:return Je()}var o}function jf(n,e){return void 0!==(n.values||[]).find(t=>Eo(t,e))}function ku(n,e){if(n===e)return 0;const t=nc(n),r=nc(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(o,l){const h=Wn(o.integerValue||o.doubleValue),m=Wn(l.integerValue||l.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return mw(n.timestampValue,e.timestampValue);case 4:return mw(Bf(n),Bf(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(o,l){const h=Ou(o),m=Ou(l);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),m=l.split("/");for(let w=0;w<h.length&&w<m.length;w++){const C=Ft(h[w],m[w]);if(0!==C)return C}return Ft(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Ft(Wn(o.latitude),Wn(l.latitude));return 0!==h?h:Ft(Wn(o.longitude),Wn(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const h=o.values||[],m=l.values||[];for(let w=0;w<h.length&&w<m.length;++w){const C=ku(h[w],m[w]);if(C)return C}return Ft(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){const h=o.fields||{},m=Object.keys(h),w=l.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let x=0;x<m.length&&x<C.length;++x){const N=Ft(m[x],C[x]);if(0!==N)return N;const G=ku(h[m[x]],w[C[x]]);if(0!==G)return G}return Ft(m.length,C.length)}(n.mapValue,e.mapValue);default:throw Je()}}function mw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=Ra(n),r=Ra(e),o=Ft(t.seconds,r.seconds);return 0!==o?o:Ft(t.nanos,r.nanos)}function Wd(n){return $_(n)}function $_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ra(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ou(n.bytesValue).toBase64():"referenceValue"in n?Ve.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const h of r.values||[])l?l=!1:o+=",",o+=$_(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",h=!0;for(const m of o)h?h=!1:l+=",",l+=`${m}:${$_(r.fields[m])}`;return l+"}"}(n.mapValue):Je();var e}function Kd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function H_(n){return!!n&&"integerValue"in n}function $f(n){return!!n&&"arrayValue"in n}function G_(n){return!!n&&"nullValue"in n}function q_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function am(n){return!!n&&"mapValue"in n}function Hf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return tc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function z_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function yw(n,e){return void 0===n?e:void 0===e||ku(n,e)>0?n:e}function _w(n,e){return void 0===n?e:void 0===e||ku(n,e)<0?n:e}class Ii{constructor(e){this.value=e}static empty(){return new Ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!am(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hf(t)}setAll(e){let t=br.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=Hf(h):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());am(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Eo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];am(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){tc(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new Ii(Hf(this.value))}}function um(n){const e=[];return tc(n.fields,(t,r)=>{const o=new br([t]);if(am(r)){const l=um(r.mapValue).fields;if(0===l.length)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new qd(e)}class mn{constructor(e,t,r,o,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new mn(e,0,Et.min(),Et.min(),Ii.empty(),0)}static newFoundDocument(e,t,r){return new mn(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new mn(e,2,t,Et.min(),Ii.empty(),0)}static newUnknownDocument(e,t){return new mn(e,3,t,Et.min(),Ii.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function qf(n){return n.fields.find(e=>2===e.kind)}function Zd(n){return n.fields.filter(e=>2!==e.kind)}Gf.UNKNOWN_ID=-1;class lm{constructor(e,t){this.fieldPath=e,this.kind=t}}class rc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rc(0,Oa.min())}}function vw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Et.fromTimestamp(1e9===r?new er(t+1,0):new er(t,r));return new Oa(o,Ve.empty(),e)}function Ew(n){return new Oa(n.readTime,n.key,-1)}class Oa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Oa(Et.min(),Ve.empty(),-1)}static max(){return new Oa(Et.max(),Ve.empty(),-1)}}function ww(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ve.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}class Sb{constructor(e,t=null,r=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.P=null}}function W_(n,e=null,t=[],r=[],o=null,l=null,h=null){return new Sb(n,e,t,r,o,l,h)}function Yd(n){const e=$e(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Wd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Pu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wd(r)).join(",")),e.P=t}return e.P}function Fu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!dm(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Eo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Cw(n.startAt,e.startAt)&&Cw(n.endAt,e.endAt)}function cm(n){return Ve.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Pa(n,e){return n.filters.filter(t=>t instanceof tr&&t.field.isEqual(e))}class tr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new xb(e,t,r):"array-contains"===t?new Rb(e,r):"in"===t?new Nb(e,r):"not-in"===t?new Ob(e,r):"array-contains-any"===t?new bw(e,r):new tr(e,t,r)}static V(e,t,r){return"in"===t?new fA(e,r):new Iw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ku(t,this.value)):null!==t&&nc(this.value)===nc(t)&&this.v(ku(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Je()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class xb extends tr{constructor(e,t,r){super(e,t,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.v(t)}}class fA extends tr{constructor(e,t){super(e,"in",t),this.keys=Dw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Iw extends tr{constructor(e,t){super(e,"not-in",t),this.keys=Dw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Dw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ve.fromName(r.referenceValue))}class Rb extends tr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $f(t)&&jf(t.arrayValue,this.value)}}class Nb extends tr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jf(this.value.arrayValue,t)}}class Ob extends tr{constructor(e,t){super(e,"not-in",t)}matches(e){if(jf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jf(this.value.arrayValue,t)}}class bw extends tr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$f(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jf(this.value.arrayValue,r))}}class ka{constructor(e,t){this.position=e,this.inclusive=t}}class Lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function dm(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Qd(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(r=l.field.isKeyField()?Ve.comparator(Ve.fromName(h.referenceValue),t.key):ku(h,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function Cw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Eo(n.position[t],e.position[t]))return!1;return!0}class Ko{constructor(e,t=null,r=[],o=[],l=null,h="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function K_(n,e,t,r,o,l,h,m){return new Ko(n,e,t,r,o,l,h,m)}function Jd(n){return new Ko(n)}function hm(n){return!Pu(n.limit)&&"F"===n.limitType}function Xd(n){return!Pu(n.limit)&&"L"===n.limitType}function Z_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Tw(n){for(const e of n.filters)if(e.S())return e.field;return null}function Y_(n){return null!==n.collectionGroup}function eh(n){const e=$e(n);if(null===e.D){e.D=[];const t=Tw(e),r=Z_(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Lu(t)),e.D.push(new Lu(br.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Lu(br.keyField(),l))}}}return e.D}function ni(n){const e=$e(n);if(!e.C)if("F"===e.limitType)e.C=W_(e.path,e.collectionGroup,eh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of eh(e))t.push(new Lu(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new ka(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new ka(e.startAt.position,!e.startAt.inclusive):null;e.C=W_(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function Q_(n,e,t){return new Ko(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zo(n,e){return Fu(ni(n),ni(e))&&n.limitType===e.limitType}function Pb(n){return`${Yd(ni(n))}|lt:${n.limitType}`}function fm(n){return`Query(target=${function Mb(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Wd(r.value)}`;var r}).join(", ")}]`),Pu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Wd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Wd(t)).join(",")),`Target(${e})`}(ni(n))}; limitType=${n.limitType})`}function J_(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ve.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,l,h){const m=Qd(o,l,h);return o.inclusive?m<=0:m<0}(t.startAt,eh(t),r)||t.endAt&&!function(o,l,h){const m=Qd(o,l,h);return o.inclusive?m>=0:m>0}(t.endAt,eh(t),r)));var t,r}function kb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function X_(n){return(e,t)=>{let r=!1;for(const o of eh(n)){const l=pA(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function pA(n,e,t){const r=n.field.isKeyField()?Ve.comparator(e.key,t.key):function(o,l,h){const m=l.data.field(o),w=h.data.field(o);return null!==m&&null!==w?ku(m,w):Je()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Je()}}function ev(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zd(e)?"-0":e}}function pm(n){return{integerValue:""+n}}function Aw(n,e){return pw(e)?pm(e):ev(n,e)}class gm{constructor(){this._=void 0}}function Fb(n,e,t){return n instanceof th?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof ic?Mw(n,e):n instanceof sc?xw(n,e):function(r,o){const l=Sw(r,o),h=tv(l)+tv(r.k);return H_(l)&&H_(r.k)?pm(h):ev(r.M,h)}(n,e)}function Lb(n,e,t){return n instanceof ic?Mw(n,e):n instanceof sc?xw(n,e):t}function Sw(n,e){return n instanceof Yo?H_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class th extends gm{}class ic extends gm{constructor(e){super(),this.elements=e}}function Mw(n,e){const t=nv(e);for(const r of n.elements)t.some(o=>Eo(o,r))||t.push(r);return{arrayValue:{values:t}}}class sc extends gm{constructor(e){super(),this.elements=e}}function xw(n,e){let t=nv(e);for(const r of n.elements)t=t.filter(o=>!Eo(o,r));return{arrayValue:{values:t}}}class Yo extends gm{constructor(e,t){super(),this.M=e,this.k=t}}function tv(n){return Wn(n.integerValue||n.doubleValue)}function nv(n){return $f(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class nh{constructor(e,t){this.field=e,this.transform=t}}class Nw{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ym{}function Vb(n,e,t){n instanceof zf?function(r,o,l){const h=r.value.clone(),m=Pw(r.fieldTransforms,o,l.transformResults);h.setAll(m),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Fa?function(r,o,l){if(!mm(r.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Pw(r.fieldTransforms,o,l.transformResults),m=o.data;m.setAll(wo(r)),m.setAll(h),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function rv(n,e,t){var o;n instanceof zf?function(r,o,l){if(!mm(r.precondition,o))return;const h=r.value.clone(),m=_m(r.fieldTransforms,l,o);h.setAll(m),o.convertToFoundDocument(rh(o),h).setHasLocalMutations()}(n,e,t):n instanceof Fa?function(r,o,l){if(!mm(r.precondition,o))return;const h=_m(r.fieldTransforms,l,o),m=o.data;m.setAll(wo(r)),m.setAll(h),o.convertToFoundDocument(rh(o),m).setHasLocalMutations()}(n,e,t):mm(n.precondition,o=e)&&o.convertToNoDocument(Et.min())}function Ub(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=Sw(r.transform,o||null);null!=l&&(null==t&&(t=Ii.empty()),t.set(r.field,l))}return t||null}function Ow(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&xa(t,r,(o,l)=>function Rw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ic&&r instanceof ic||t instanceof sc&&r instanceof sc?xa(t.elements,r.elements,Eo):t instanceof Yo&&r instanceof Yo?Eo(t.k,r.k):t instanceof th&&r instanceof th);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function rh(n){return n.isFoundDocument()?n.version:Et.min()}class zf extends ym{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Fa extends ym{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}}function wo(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Pw(n,e,t){const r=new Map;Dt(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,m=e.data.field(l.field);r.set(l.field,Lb(h,m,t[o]))}return r}function _m(n,e,t){const r=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);r.set(o.field,Fb(l,h,e))}return r}class La extends ym{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class iv extends ym{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Bb{constructor(e){this.count=e}}var hr,$t;function Wf(n){switch(n){default:return Je();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function kw(n){if(void 0===n)return cr("GRPC error has no .code"),ie.UNKNOWN;switch(n){case hr.OK:return ie.OK;case hr.CANCELLED:return ie.CANCELLED;case hr.UNKNOWN:return ie.UNKNOWN;case hr.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case hr.INTERNAL:return ie.INTERNAL;case hr.UNAVAILABLE:return ie.UNAVAILABLE;case hr.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case hr.NOT_FOUND:return ie.NOT_FOUND;case hr.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case hr.ABORTED:return ie.ABORTED;case hr.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case hr.DATA_LOSS:return ie.DATA_LOSS;default:return Je()}}($t=hr||(hr={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";class Vu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){tc(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return fw(this.inner)}size(){return this.innerSize}}class Kn{constructor(e,t){this.comparator=e,this.root=t||Cr.EMPTY}insert(e,t){return new Kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cr.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kf(this.root,e,this.comparator,!0)}}class Kf{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cr{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:Cr.RED,this.left=null!=o?o:Cr.EMPTY,this.right=null!=l?l:Cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Cr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Cr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Je();const e=this.left.check();if(e!==this.right.check())throw Je();return e+(this.isRed()?0:1)}}Cr.EMPTY=null,Cr.RED=!0,Cr.BLACK=!1,Cr.EMPTY=new class{constructor(){this.size=0}get key(){throw Je()}get value(){throw Je()}get color(){throw Je()}get left(){throw Je()}get right(){throw Je()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Cr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fw(this.data.getIterator())}getIteratorFrom(e){return new Fw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class Fw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ih(n){return n.hasNext()?n.getNext():void 0}const gA=new Kn(Ve.comparator);function Hi(){return gA}const sv=new Kn(Ve.comparator);function vm(){return sv}function oc(){return new Vu(n=>n.toString(),(n,e)=>n.isEqual(e))}const ov=new Kn(Ve.comparator),jb=new vn(Ve.comparator);function ln(...n){let e=jb;for(const t of n)e=e.add(t);return e}const $b=new vn(Ft);function Em(){return $b}class sh{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,t)),new sh(Et.min(),r,Em(),Hi(),ln())}}class ac{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ac(Nn.EMPTY_BYTE_STRING,t,ln(),ln(),ln())}}class Zf{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Lw{constructor(e,t){this.targetId=e,this.$=t}}class av{constructor(e,t,r=Nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class uv{constructor(){this.B=0,this.L=cv(),this.U=Nn.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=ln(),t=ln(),r=ln();return this.L.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Je()}}),new ac(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=cv()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Hb{constructor(e){this.nt=e,this.st=new Map,this.it=Hi(),this.rt=lv(),this.ot=new vn(Ft)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Je()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const l=o.target;if(cm(l))if(0===r){const h=new Ve(l.path);this.ct(t,h,mn.newNoDocument(h,Et.min()))}else Dt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,h)=>{const m=this.wt(h);if(m){if(l.current&&cm(m.target)){const w=new Ve(m.target.path);null!==this.it.get(w)||this.It(h,w)||this.ct(h,w,mn.newNoDocument(w,e))}l.j&&(t.set(h,l.H()),l.J())}});let r=ln();this.rt.forEach((l,h)=>{let m=!0;h.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(l))}),this.it.forEach((l,h)=>h.setReadTime(e));const o=new sh(e,t,this.ot,this.it,r);return this.it=Hi(),this.rt=lv(),this.ot=new vn(Ft),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new uv,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new vn(Ft),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new uv),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function lv(){return new Kn(Ve.comparator)}function cv(){return new Kn(Ve.comparator)}const Gb={asc:"ASCENDING",desc:"DESCENDING"},Vw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class qb{constructor(e,t){this.databaseId=e,this.N=t}}function Tr(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uc(n,e){return n.N?e.toBase64():e.toUint8Array()}function zb(n,e){return Tr(n,e.toTimestamp())}function Vr(n){return Dt(!!n),Et.fromTimestamp(function(e){const t=Ra(e);return new er(t.seconds,t.nanos)}(n))}function Uw(n,e){return(t=n,new Yt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function oh(n){const e=Yt.fromString(n);return Dt(Zw(e)),e}function Yf(n,e){return Uw(n.databaseId,e.path)}function Bs(n,e){const t=oh(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ve(Bw(t))}function dv(n,e){return Uw(n.databaseId,e)}function hv(n){const e=oh(n);return 4===e.length?Yt.emptyPath():Bw(e)}function Qf(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Bw(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function wm(n,e,t){return{name:Yf(n,e),fields:t.value.mapValue.fields}}function fv(n,e,t){const r=Bs(n,e.name),o=Vr(e.updateTime),l=new Ii({mapValue:{fields:e.fields}}),h=mn.newFoundDocument(r,o,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function lc(n,e){let t;if(e instanceof zf)t={update:wm(n,e.key,e.value)};else if(e instanceof La)t={delete:Yf(n,e.key)};else if(e instanceof Fa)t={update:wm(n,e.key,e.data),updateMask:Kw(e.fieldMask)};else{if(!(e instanceof iv))return Je();t={verify:Yf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof th)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ic)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof sc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Yo)return{fieldPath:l.field.canonicalString(),increment:h.k};throw Je()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:zb(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Je()),t;var o}function $w(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?dr.updateTime(Vr(o.updateTime)):void 0!==o.exists?dr.exists(o.exists):dr.none():dr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,h){let m=null;"setToServerValue"in h?(Dt("REQUEST_TIME"===h.setToServerValue),m=new th):"appendMissingElements"in h?m=new ic(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new sc(h.removeAllFromArray.values||[]):"increment"in h?m=new Yo(l,h.increment):Je();const w=br.fromServerFormat(h.fieldPath);return new nh(w,m)}(n,o)):[];var o;if(e.update){const o=Bs(n,e.update.name),l=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new qd((e.updateMask.fieldPaths||[]).map(C=>br.fromServerFormat(C)));return new Fa(o,l,h,t,r)}return new zf(o,l,t,r)}if(e.delete){const o=Bs(n,e.delete);return new La(o,t)}if(e.verify){const o=Bs(n,e.verify);return new iv(o,t)}return Je()}function Gw(n,e){return{documents:[dv(n,e.path)]}}function pv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=dv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=dv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(x=>function(N){if("=="===N.op){if(q_(N.value))return{unaryFilter:{field:Xf(N.field),op:"IS_NAN"}};if(G_(N.value))return{unaryFilter:{field:Xf(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(q_(N.value))return{unaryFilter:{field:Xf(N.field),op:"IS_NOT_NAN"}};if(G_(N.value))return{unaryFilter:{field:Xf(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xf(N.field),op:mv(N.op),value:N.value}}}(x));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(w){if(0!==w.length)return w.map(C=>{return{field:Xf((x=C).field),direction:gv(x.dir)};var x})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=(C=e.limit,n.N||Pu(C)?C:{value:C});var C,m,w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Jf(n){let e=hv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Dt(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=zw(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(x=>{return new Lu(ah((N=x).field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(x){let N;return N="object"==typeof x?x.value:x,Pu(N)?null:N}(t.limit));let w=null;var x;t.startAt&&(w=new ka((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new ka(x.values||[],!x.before)}(t.endAt)),K_(e,o,h,l,m,"F",w,C)}function zw(n){return n?void 0!==n.unaryFilter?[Ww(n)]:void 0!==n.fieldFilter?[Wb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>zw(e)).reduce((e,t)=>e.concat(t)):Je():[]}function gv(n){return Gb[n]}function mv(n){return Vw[n]}function Xf(n){return{fieldPath:n.canonicalString()}}function ah(n){return br.fromServerFormat(n.fieldPath)}function Wb(n){return tr.create(ah(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Je()}}(n.fieldFilter.op),n.fieldFilter.value)}function Ww(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ah(n.unaryFilter.field);return tr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ah(n.unaryFilter.field);return tr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ah(n.unaryFilter.field);return tr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ah(n.unaryFilter.field);return tr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Je()}}function Kw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Zw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ar(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Qw(e)),e=Yw(n.get(t),e);return Qw(e)}function Yw(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Qw(n){return n+"\x01\x01"}function Io(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Yt.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const h=n.indexOf("\x01",l);switch((h<0||h>t)&&Je(),n.charAt(h+1)){case"\x01":const m=n.substring(l,h);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(l,h),o+="\0";break;case"\x11":o+=n.substring(l,h+1);break;default:Je()}l=h+2}return new Yt(r)}const yv=["userId","batchId"];function Dm(n,e){return[n,Ar(e)]}function _v(n,e,t){return[n,Ar(e),t]}const Jw={},Xw=["prefixPath","collectionGroup","readTime","documentId"],eI=["prefixPath","collectionGroup","documentId"],Kb=["collectionGroup","readTime","prefixPath","documentId"],Zb=["canonicalId","targetId"],mA=["targetId","path"],tI=["path","targetId"],yA=["collectionId","parent"],_A=["indexId","uid"],vA=["uid","sequenceNumber"],EA=["indexId","uid","arrayValue","directionalValue","documentKey"],wA=["indexId","uid","documentKey"],IA=["userId","collectionPath","documentId"],DA=["userId","collectionPath","largestBatchId"],bA=["userId","collectionGroup","largestBatchId"],ep=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CA=[...ep,"documentOverlays"],vv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ev=[...vv,"indexConfiguration","indexState","indexEntries"],wv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Iv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Je(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let o=0,l=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++l,h&&l===o&&t()},w=>r(w))}),h=!0,l===o&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(o=>o?he.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}}class uh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Lr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new lh(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=Dv(r.target.error);this.At.reject(new lh(e,o))}}static open(e,t,r,o){try{return new uh(t,e.transaction(o,r))}catch(l){throw new lh(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new rI(t)}}class js{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===js.Vt((0,Pt.z$)())&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),cc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Pt.hl)())return!1;if(js.St())return!0;const e=(0,Pt.z$)(),t=js.Vt(e),r=0<t&&t<10,o=js.Dt(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=h=>{r(h.target.result)},l.onblocked=()=>{o(new lh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new Ae(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new lh(e,m))},l.onupgradeneeded=h=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Pt.kt(h.target.result,l.transaction,h.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,ye.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{l.db=yield l.Nt(e);const w=uh.open(l.db,e,h?"readonly":"readwrite",r),C=o(w).next(x=>(w.bt(),x)).catch(x=>(w.abort(x),he.reject(x))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),l.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class nI{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return cc(this.Ft.delete())}}class lh extends Ae{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ch(n){return"IndexedDbTransactionError"===n.name}class rI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cc(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),cc(this.store.add(e))}get(e){return cc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),cc(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),cc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),l=[];return this.Gt(o,(h,m)=>{l.push(m)}).next(()=>l)}{const o=this.store.getAll(r.range);return new he((l,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{l(m.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((o,l)=>{r.onerror=h=>{l(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}Qt(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Gt(o,(l,h,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Gt(o,t)}zt(e){const t=this.cursor({});return new he((r,o)=>{t.onerror=l=>{const h=Dv(l.target.error);o(h)},t.onsuccess=l=>{const h=l.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Gt(e,t){const r=[];return new he((o,l)=>{e.onerror=h=>{l(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const w=new nI(m),C=t(m.primaryKey,m.value,w);if(C instanceof he){const x=C.catch(N=>(w.done(),he.reject(N)));r.push(x)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cc(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Dv(r.target.error);t(o)}})}let bm=!1;function Dv(n){const e=js.Vt((0,Pt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bm||(bm=!0,setTimeout(()=>{throw r},0)),r}}return n}class Yb extends Iv{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function ri(n,e){const t=$e(n);return js.xt(t.Ht,e)}class iI{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Vb(l,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&rv(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&rv(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Et.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ln())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,(t,r)=>Ow(t,r))&&xa(this.baseMutations,e.baseMutations,(t,r)=>Ow(t,r))}}class bv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Dt(e.mutations.length===r.length);let o=ov;const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,r[h].version);return new bv(e,t,r,o)}}class Cv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Uu{constructor(e,t,r,o,l=Et.min(),h=Et.min(),m=Nn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new Uu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Uu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Uu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Qb{constructor(e){this.Jt=e}}function Cm(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Tm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Yf(o=n.Jt,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Tr(o,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ii(e.version)};else{if(!e.isUnknownDocument())return Je();r.unknownDocument={path:t.path.toArray(),version:ii(e.version)}}var o,l;return r}function Tm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ii(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function dc(n){const e=new er(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function Bu(n,e){const t=(e.baseMutations||[]).map(l=>$w(n.Jt,l));for(let l=0;l<e.mutations.length-1;++l){const h=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(h.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>$w(n.Jt,l)),o=er.fromMillis(e.localWriteTimeMs);return new iI(e.batchId,o,t,r)}function tp(n){const e=dc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?dc(n.lastLimboFreeSnapshotVersion):Et.min();let r;var o;return void 0!==n.query.documents?(Dt(1===(o=n.query).documents.length),r=ni(Jd(hv(o.documents[0])))):r=ni(Jf(n.query)),new Uu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Nn.fromBase64String(n.resumeToken))}function sI(n,e){const t=ii(e.snapshotVersion),r=ii(e.lastLimboFreeSnapshotVersion);let o;o=cm(e.target)?Gw(n.Jt,e.target):pv(n.Jt,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yd(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function np(n){const e=Jf({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Q_(e,e.limit,"L"):e}function Am(n,e){return new Cv(e.largestBatchId,$w(n.Jt,e.overlayMutation))}function Tv(n,e){const t=e.path.lastSegment();return[n,Ar(e.path.popLast()),t]}class Xb{getBundleMetadata(e,t){return Av(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:dc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Av(e).put({bundleId:(r=t).id,createTime:ii(Vr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Sv(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:np(o.bundledQuery),readTime:dc(o.readTime)};var o})}saveNamedQuery(e,t){return Sv(e).put({name:(r=t).name,readTime:ii(Vr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Av(n){return ri(n,"bundles")}function Sv(n){return ri(n,"namedQueries")}class Mv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Mv(e,t.uid||"")}getOverlay(e,t){return rp(e).get(Tv(this.userId,t)).next(r=>r?Am(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((l,h)=>{const m=new Cv(t,h);o.push(this.Xt(e,m))}),he.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(Ar(h.getCollectionPath())));const l=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);l.push(rp(e).Qt("collectionPathOverlayIndex",m))}),he.waitFor(l)}getOverlaysForCollection(e,t,r){const o=oc(),l=Ar(t),h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return rp(e).qt("collectionPathOverlayIndex",h).next(m=>{for(const w of m){const C=Am(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const l=oc();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rp(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,x)=>{const N=Am(this.M,C);l.size()<o||N.largestBatchId===h?(l.set(N.getKey(),N),h=N.largestBatchId):x.done()}).next(()=>l)}Xt(e,t){return rp(e).put(function(r,o,l){const[h,m,w]=Tv(o,l.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:lc(r.Jt,l.mutation)}}(this.M,this.userId,t))}}function rp(n){return ri(n,"documentOverlays")}class ju{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Wn(e.integerValue));else if("doubleValue"in e){const r=Wn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),zd(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ou(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?z_(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Je()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Ve.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Do(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function oI(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const l=Do(255&t[o]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}ju.fe=new ju;class TA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=oI(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=oI(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class eC{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class aI{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Sm{constructor(){this.De=new TA,this.Ce=new eC(this.De),this.xe=new aI(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class $u{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new $u(this.indexId,this.documentKey,this.arrayValue,r)}}function Hu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=uI(n.arrayValue,e.arrayValue),0!==t?t:(t=uI(n.directionalValue,e.directionalValue),0!==t?t:Ve.comparator(n.documentKey,e.documentKey)))}function uI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class AA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=qf(e);if(void 0!==t&&!this.Be(t))return!1;const r=Zd(e);let o=0,l=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const h=r[o];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[l++],h))return!1;++o}for(;o<r.length;++o){const h=r[o];if(l>=this.Me.length||!this.Ue(this.Me[l++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class lI{constructor(){this.qe=new Mm}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getFieldIndex(e,t){return he.resolve(null)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class Mm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new vn(Yt.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new vn(Yt.comparator)).toArray()}}const xm=new Uint8Array(0);class tC{constructor(e){this.user=e,this.Ge=new Mm,this.Ke=new Vu(t=>Yd(t),(t,r)=>Fu(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const l={collectionId:r,parent:Ar(o)};return xv(e).put(l)}return he.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[hw(t),""],!1,!0);return xv(e).qt(o).next(l=>{for(const h of l){if(h.collectionId!==t)break;r.push(Io(h.parent))}return r})}addFieldIndex(e,t){const r=dh(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=dh(e),o=ip(e),l=hc(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=hc(e);let o=!0;const l=new Map;return he.forEach(this.Qe(t),h=>this.getFieldIndex(e,h).next(m=>{o&&(o=!!m),l.set(h,m)})).next(()=>{if(o){let h=ln();return he.forEach(l,(m,w)=>{var C;Ne("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ht=>`${ht.fieldPath}:${ht.kind}`).join(",")}`} to execute ${Yd(t)}`);const x=function(ht,En){const bt=qf(En);if(void 0===bt)return null;for(const Gt of Pa(ht,bt.fieldPath))switch(Gt.op){case"array-contains-any":return Gt.value.arrayValue.values||[];case"array-contains":return[Gt.value]}return null}(w,m),N=function(ht,En){const bt=new Map;for(const Gt of Zd(En))for(const qt of Pa(ht,Gt.fieldPath))switch(qt.op){case"==":case"in":bt.set(Gt.fieldPath.canonicalString(),qt.value);break;case"not-in":case"!=":return bt.set(Gt.fieldPath.canonicalString(),qt.value),Array.from(bt.values())}return null}(w,m),G=function(ht,En){const bt=[];let Gt=!0;for(const zu of Zd(En)){let Co,vp=!0;for(const oi of Pa(ht,zu.fieldPath)){let nr,Zm=!0;switch(oi.op){case"<":case"<=":nr="nullValue"in(qt=oi.value)?om:"booleanValue"in qt?{booleanValue:!1}:"integerValue"in qt||"doubleValue"in qt?{doubleValue:NaN}:"timestampValue"in qt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in qt?{stringValue:""}:"bytesValue"in qt?{bytesValue:""}:"referenceValue"in qt?Kd(Na.empty(),Ve.empty()):"geoPointValue"in qt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in qt?{arrayValue:{}}:"mapValue"in qt?{mapValue:{}}:Je();break;case"==":case"in":case">=":nr=oi.value;break;case">":nr=oi.value,Zm=!1;break;case"!=":case"not-in":nr=om}yw(Co,nr)===nr&&(Co=nr,vp=Zm)}if(null!==ht.startAt)for(let oi=0;oi<ht.orderBy.length;++oi)if(ht.orderBy[oi].field.isEqual(zu.fieldPath)){const nr=ht.startAt.position[oi];yw(Co,nr)===nr&&(Co=nr,vp=ht.startAt.inclusive);break}if(void 0===Co)return null;bt.push(Co),Gt&&(Gt=vp)}var qt;return new ka(bt,Gt)}(w,m),K=function(ht,En){const bt=[];let Gt=!0;for(const zu of Zd(En)){let Co,vp=!0;for(const oi of Pa(ht,zu.fieldPath)){let nr,Zm=!0;switch(oi.op){case">=":case">":nr="nullValue"in(qt=oi.value)?{booleanValue:!1}:"booleanValue"in qt?{doubleValue:NaN}:"integerValue"in qt||"doubleValue"in qt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in qt?{stringValue:""}:"stringValue"in qt?{bytesValue:""}:"bytesValue"in qt?Kd(Na.empty(),Ve.empty()):"referenceValue"in qt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in qt?{arrayValue:{}}:"arrayValue"in qt?{mapValue:{}}:"mapValue"in qt?gw:Je(),Zm=!1;break;case"==":case"in":case"<=":nr=oi.value;break;case"<":nr=oi.value,Zm=!1;break;case"!=":case"not-in":nr=gw}_w(Co,nr)===nr&&(Co=nr,vp=Zm)}if(null!==ht.endAt)for(let oi=0;oi<ht.orderBy.length;++oi)if(ht.orderBy[oi].field.isEqual(zu.fieldPath)){const nr=ht.endAt.position[oi];_w(Co,nr)===nr&&(Co=nr,vp=ht.endAt.inclusive);break}if(void 0===Co)return null;bt.push(Co),Gt&&(Gt=vp)}var qt;return new ka(bt,Gt)}(w,m),fe=this.je(m,w,G),Fe=this.je(m,w,K),tt=this.We(m,w,N),Wt=this.ze(m.indexId,x,fe,!!G&&G.inclusive,Fe,!!K&&K.inclusive,tt);return he.forEach(Wt,ht=>r.Kt(ht,t.limit).next(En=>{En.forEach(bt=>{h=h.add(new Ve(Io(bt.documentKey)))})}))}).next(()=>h)}return he.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,o,l,h,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),C=w/(null!=t?t.length:1),x=[];for(let N=0;N<w;++N){const G=t?this.He(t[N/C]):xm,K=r?this.Je(e,G,r[N%C],o):this.Ye(e),fe=l?this.Xe(e,G,l[N%C],h):this.Ye(e+1);x.push(...this.createRange(K,fe,m.map(Fe=>this.Je(e,G,Fe,!0))))}return x}Je(e,t,r,o){const l=new $u(e,Ve.empty(),t,r);return o?l:l.ke()}Xe(e,t,r,o){const l=new $u(e,Ve.empty(),t,r);return o?l.ke():l}Ye(e){return new $u(e,Ve.empty(),xm,xm)}getFieldIndex(e,t){const r=new AA(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(l=>{const h=l.filter(m=>r.$e(m));return h.sort((m,w)=>w.fields.length-m.fields.length),h.length>0?h[0]:null})}Ze(e,t){const r=new Sm;for(const o of Zd(e)){const l=t.data.field(o.fieldPath);if(null==l)return null;const h=r.Ne(o.kind);ju.fe.Zt(l,h)}return r.Se()}He(e){const t=new Sm;return ju.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Sm);let l=0;for(const h of Zd(e)){const m=r[l++];for(const w of o)if(this.tn(t,h.fieldPath)&&$f(m))o=this.en(o,h,m);else{const C=w.Ne(h.kind);ju.fe.Zt(m,C)}}return this.nn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const o=[...e],l=[];for(const h of r.arrayValue.values||[])for(const m of o){const w=new Sm;w.seed(m.Se()),ju.fe.Zt(h,w.Ne(t.kind)),l.push(w)}return l}tn(e,t){return!!e.filters.find(r=>r instanceof tr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=dh(e),o=ip(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(l=>{const h=[];return he.forEach(l,m=>o.get([m.indexId,this.uid]).next(w=>{h.push(function(C,x){const N=x?new rc(x.sequenceNumber,new Oa(dc(x.readTime),new Ve(Io(x.documentKey)),x.largestBatchId)):rc.empty(),G=C.fields.map(([K,fe])=>new lm(br.fromServerFormat(K),fe));return new Gf(C.indexId,C.collectionGroup,G,N)}(m,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==l?l:Ft(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=dh(e),l=ip(e);return this.sn(e).next(h=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>he.forEach(m,w=>{return l.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:ii((G=r).readTime),documentKey:Ar(G.documentKey.path),largestBatchId:G.largestBatchId});var G})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(o,l)=>{const h=r.get(o.collectionGroup);return(h?he.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),he.forEach(m,w=>this.rn(e,o,w).next(C=>{const x=this.on(l,w);return C.isEqual(x)?he.resolve():this.un(e,l,C,x)}))))})}an(e,t,r){return hc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Ar(t.key.path)})}cn(e,t,r){return hc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Ar(t.key.path)])}rn(e,t,r){const o=hc(e);let l=new vn(Hu);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Ar(t.path)])},(h,m)=>{l=l.add(new $u(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>l)}on(e,t){let r=new vn(Hu);const o=this.Ze(t,e);if(null==o)return r;const l=qf(t);if(null!=l){const h=e.data.field(l.fieldPath);if($f(h))for(const m of h.arrayValue.values||[])r=r.add(new $u(t.indexId,e.key,this.He(m),o))}else r=r.add(new $u(t.indexId,e.key,xm,o));return r}un(e,t,r,o){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,m,w,C,x){const N=h.getIterator(),G=m.getIterator();let K=ih(N),fe=ih(G);for(;K||fe;){let Fe=!1,tt=!1;if(K&&fe){const Wt=w(K,fe);Wt<0?tt=!0:Wt>0&&(Fe=!0)}else null!=K?tt=!0:Fe=!0;Fe?(C(fe),fe=ih(G)):tt?(x(K),K=ih(N)):(K=ih(N),fe=ih(G))}}(r,o,Hu,h=>{l.push(this.an(e,t,h))},h=>{l.push(this.cn(e,t,h))}),he.waitFor(l)}sn(e){let t=1;return ip(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,l)=>{l.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,m)=>Hu(h,m)).filter((h,m,w)=>!m||0!==Hu(h,w[m-1]));const o=[];o.push(e);for(const h of r){const m=Hu(h,e),w=Hu(h,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(h),o.push(h.ke());else if(w>0)break}o.push(t);const l=[];for(let h=0;h<o.length;h+=2)l.push(IDBKeyRange.bound([o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,""],[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,""]));return l}}function xv(n){return ri(n,"collectionParents")}function hc(n){return ri(n,"indexEntries")}function dh(n){return ri(n,"indexConfiguration")}function ip(n){return ri(n,"indexState")}const cI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Pi(e,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Rv(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),l=[],h=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:h},(x,N,G)=>(m++,G.delete()));l.push(w.next(()=>{Dt(1===m)}));const C=[];for(const x of t.mutations){const N=_v(e,x.key.path,t.batchId);l.push(o.delete(N)),C.push(x.key)}return he.waitFor(l).next(()=>C)}function Rm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Je();e=n.noDocument}return JSON.stringify(e).length}Pi.DEFAULT_COLLECTION_PERCENTILE=10,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pi.DEFAULT=new Pi(41943040,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pi.DISABLED=new Pi(-1,0,0);class Nv{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.hn={}}static Yt(e,t,r,o){Dt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Nv(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fc(e).Wt({index:"userMutationsIndex",range:r},(o,l,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=pc(e),h=fc(e);return h.add({}).next(m=>{Dt("number"==typeof m);const w=new iI(m,t,r,o),C=function(G,K,fe){const Fe=fe.baseMutations.map(Wt=>lc(G.Jt,Wt)),tt=fe.mutations.map(Wt=>lc(G.Jt,Wt));return{userId:K,batchId:fe.batchId,localWriteTimeMs:fe.localWriteTime.toMillis(),baseMutations:Fe,mutations:tt}}(this.M,this.userId,w),x=[];let N=new vn((G,K)=>Ft(G.canonicalString(),K.canonicalString()));for(const G of o){const K=_v(this.userId,G.key.path,m);N=N.add(G.key.path.popLast()),x.push(h.put(C)),x.push(l.put(K,Jw))}return N.forEach(G=>{x.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.hn[m]=w.keys()}),he.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return fc(e).get(t).next(r=>r?(Dt(r.userId===this.userId),Bu(this.M,r)):null)}ln(e,t){return this.hn[t]?he.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.hn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return fc(e).Wt({index:"userMutationsIndex",range:o},(h,m,w)=>{m.userId===this.userId&&(Dt(m.batchId>=r),l=Bu(this.M,m)),w.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return fc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,l,h)=>{r=l.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fc(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Bu(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Dm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return pc(e).Wt({range:o},(h,m,w)=>{const[C,x,N]=h,G=Io(x);if(C===this.userId&&t.path.isEqual(G))return fc(e).get(N).next(K=>{if(!K)throw Je();Dt(K.userId===this.userId),l.push(Bu(this.M,K))});w.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Ft);const o=[];return t.forEach(l=>{const h=Dm(this.userId,l.path),m=IDBKeyRange.lowerBound(h),w=pc(e).Wt({range:m},(C,x,N)=>{const[G,K,fe]=C,Fe=Io(K);G===this.userId&&l.path.isEqual(Fe)?r=r.add(fe):N.done()});o.push(w)}),he.waitFor(o).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=Dm(this.userId,r),h=IDBKeyRange.lowerBound(l);let m=new vn(Ft);return pc(e).Wt({range:h},(w,C,x)=>{const[N,G,K]=w,fe=Io(G);N===this.userId&&r.isPrefixOf(fe)?fe.length===o&&(m=m.add(K)):x.done()}).next(()=>this.fn(e,m))}fn(e,t){const r=[],o=[];return t.forEach(l=>{o.push(fc(e).get(l).next(h=>{if(null===h)throw Je();Dt(h.userId===this.userId),r.push(Bu(this.M,h))}))}),he.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Rv(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),he.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return pc(e).Wt({range:r},(l,h,m)=>{if(l[0]===this.userId){const w=Io(l[1]);o.push(w)}else m.done()}).next(()=>{Dt(0===o.length)})})}containsKey(e,t){return nC(e,this.userId,t)}_n(e){return dI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function nC(n,e,t){const r=Dm(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let h=!1;return pc(n).Wt({range:l,jt:!0},(m,w,C)=>{const[x,N,G]=m;x===e&&N===o&&(h=!0),C.done()}).next(()=>h)}function fc(n){return ri(n,"mutations")}function pc(n){return ri(n,"documentMutations")}function dI(n){return ri(n,"mutationQueues")}class gc{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new gc(0)}static gn(){return new gc(-1)}}class rC{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new gc(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>Et.fromTimestamp(new er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.pn(e,o)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>sp(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return sp(e).Wt((h,m)=>{const w=tp(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,l.push(this.removeTargetData(e,w)))}).next(()=>he.waitFor(l)).next(()=>o)}forEachTarget(e,t){return sp(e).Wt((r,o)=>{const l=tp(o);t(l)})}yn(e){return iC(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}pn(e,t){return iC(e).put("targetGlobalKey",t)}In(e,t){return sp(e).put(sI(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Yd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return sp(e).Wt({range:o,index:"queryTargetsIndex"},(h,m,w)=>{const C=tp(m);Fu(t,C.target)&&(l=C,w.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=mc(e);return t.forEach(h=>{const m=Ar(h.path);o.push(l.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,h))}),he.waitFor(o)}removeMatchingKeys(e,t,r){const o=mc(e);return he.forEach(t,l=>{const h=Ar(l.path);return he.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=mc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=mc(e);let l=ln();return o.Wt({range:r,jt:!0},(h,m,w)=>{const C=Io(h[1]),x=new Ve(C);l=l.add(x)}).next(()=>l)}containsKey(e,t){const r=Ar(t.path),o=IDBKeyRange.bound([r],[hw(r)],!1,!0);let l=0;return mc(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([h,m],w,C)=>{0!==h&&(l++,C.done())}).next(()=>l>0)}Et(e,t){return sp(e).get(t).next(r=>r?tp(r):null)}}function sp(n){return ri(n,"targets")}function iC(n){return ri(n,"targetGlobal")}function mc(n){return ri(n,"targetDocuments")}function hh(n){return hI.apply(this,arguments)}function hI(){return hI=(0,ye.Z)(function*(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==wv)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),hI.apply(this,arguments)}function fI([n,e],[t,r]){const o=Ft(n,t);return 0===o?Ft(e,r):o}class Nm{constructor(e){this.En=e,this.buffer=new vn(fI),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();fI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sC{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Ne("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){ch(o)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield hh(o)}yield t.vn(e)}))}}class oC{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(Us.A);const r=new Nm(t);return this.Sn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Sn.Cn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(cI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cI):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,o,l,h,m,w,C;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,h=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(l=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),ec()<=Wl.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-x}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${l} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-x}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:N})))}}class pI{constructor(e,t){this.db=e,this.garbageCollector=new oC(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,o)=>t(o))}addReference(e,t,r){return Qo(e,r)}removeReference(e,t,r){return Qo(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Qo(e,t)}Mn(e,t){return function(r,o){let l=!1;return dI(r).zt(h=>nC(r,h,o).next(m=>(m&&(l=!0),he.resolve(!m)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.kn(e,(h,m)=>{if(m<=t){const w=this.Mn(e,h).next(C=>{if(!C)return l++,r.getEntry(e,h).next(()=>(r.removeEntry(h,Et.min()),mc(e).delete([0,Ar(h.path)])))});o.push(w)}}).next(()=>he.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Qo(e,t)}kn(e,t){const r=mc(e);let o,l=Us.A;return r.Wt({index:"documentTargetsIndex"},([h,m],{path:w,sequenceNumber:C})=>{0===h?(l!==Us.A&&t(new Ve(Io(o)),l),l=C,o=w):l=Us.A}).next(()=>{l!==Us.A&&t(new Ve(Io(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qo(n,e){return mc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ar(e.path),sequenceNumber:r}));var r}class Ov{constructor(){this.changes=new Vu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Pv{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Va(e).put(r)}removeEntry(e,t,r){return Va(e).delete(function(o,l){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Tm(l),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=mn.newInvalidDocument(t);return Va(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(yc(t))},(o,l)=>{r=this.Fn(t,l)}).next(()=>r)}$n(e,t){let r={size:0,document:mn.newInvalidDocument(t)};return Va(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(yc(t))},(o,l)=>{r={document:this.Fn(t,l),size:Rm(l)}}).next(()=>r)}getEntries(e,t){let r=Hi();return this.Bn(e,t,(o,l)=>{const h=this.Fn(o,l);r=r.insert(o,h)}).next(()=>r)}Ln(e,t){let r=Hi(),o=new Kn(Ve.comparator);return this.Bn(e,t,(l,h)=>{const m=this.Fn(l,h);r=r.insert(l,m),o=o.insert(l,Rm(h))}).next(()=>({documents:r,Un:o}))}Bn(e,t,r){if(t.isEmpty())return he.resolve();let o=new vn(aC);t.forEach(w=>o=o.add(w));const l=IDBKeyRange.bound(yc(o.first()),yc(o.last())),h=o.getIterator();let m=h.getNext();return Va(e).Wt({index:"documentKeyIndex",range:l},(w,C,x)=>{const N=Ve.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&aC(m,N)<0;)r(m,null),m=h.getNext();m&&m.isEqual(N)&&(r(m,C),m=h.hasNext()?h.getNext():null),m?x.Ut(yc(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Tm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Va(e).qt(IDBKeyRange.bound(o,l,!0)).next(h=>{let m=Hi();for(const w of h){const C=this.Fn(Ve.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let l=Hi();const h=op(t,r),m=op(t,Oa.max());return Va(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(w,C,x)=>{const N=this.Fn(Ve.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);l=l.insert(N.key,N),l.size===o&&x.done()}).next(()=>l)}newChangeBuffer(e){return new kv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gI(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}On(e,t){return gI(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function Jb(n,e){let t;if(e.document)t=fv(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ve.fromSegments(e.noDocument.path),o=dc(e.noDocument.readTime);t=mn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Je();{const r=Ve.fromSegments(e.unknownDocument.path),o=dc(e.unknownDocument.version);t=mn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new er(r[0],r[1]);return Et.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return mn.newInvalidDocument(e)}}class kv extends Ov{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new Vu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new vn((l,h)=>Ft(l.canonicalString(),h.canonicalString()));return this.changes.forEach((l,h)=>{const m=this.Gn.get(l);if(t.push(this.qn.removeEntry(e,l,m.readTime)),h.isValidDocument()){const w=Cm(this.qn.M,h);o=o.add(l.path.popLast()),r+=Rm(w)-m.size,t.push(this.qn.addEntry(e,l,w))}else if(r-=m.size,this.trackRemovals){const w=Cm(this.qn.M,h.convertToNoDocument(Et.min()));t.push(this.qn.addEntry(e,l,w))}}),o.forEach(l=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.qn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:o})=>(o.forEach((l,h)=>{this.Gn.set(l,{size:h,readTime:r.get(l).readTime})}),r))}}function gI(n){return ri(n,"remoteDocumentGlobal")}function Va(n){return ri(n,"remoteDocumentsV14")}function yc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function op(n,e){const t=e.documentKey.path.toArray();return[n,Tm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function aC(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Ve.comparator(n,e)}class SA{constructor(e){this.M=e}kt(e,t,r,o){const l=new uh("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yv,{unique:!0}),m.createObjectStore("documentMutations"),uC(e),function(m){m.createObjectStore("remoteDocuments")}(e));let h=he.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),uC(e)),h=h.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(l))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yv,{unique:!0});const x=w.store("mutations"),N=C.map(G=>x.put(G));return he.waitFor(N)})}(e,l))),h=h.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Kn(l))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(l)))),r<7&&o>=7&&(h=h.next(()=>this.jn(l))),r<8&&o>=8&&(h=h.next(()=>this.Wn(e,l))),r<9&&o>=9&&(h=h.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(h=h.next(()=>this.zn(l))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:IA});w.createIndex("collectionPathOverlayIndex",DA,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",bA,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:Xw});w.createIndex("documentKeyIndex",eI),w.createIndex("collectionGroupIndex",Kb)}(e)).next(()=>this.Hn(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:_A}).createIndex("sequenceNumberIndex",vA,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:EA}).createIndex("documentKeyIndex",wA,{unique:!1})}(e)})),h}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Rm(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>he.forEach(o,l=>{const h=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(m=>he.forEach(m,w=>{Dt(w.userId===l.userId);const C=Bu(this.M,w);return Rv(e,l.userId,C).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const l=[];return r.Wt((h,m)=>{const w=new Yt(h),C=[0,Ar(w)];l.push(t.get(C).next(x=>x?he.resolve():t.put({targetId:0,path:Ar(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>he.waitFor(l))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:yA});const r=t.store("collectionParents"),o=new Mm,l=h=>{if(o.add(h)){const m=h.lastSegment(),w=h.popLast();return r.put({collectionId:m,parent:Ar(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,m)=>{const w=new Yt(h);return l(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,m,w],C)=>{const x=Io(m);return l(x.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,o)=>{const l=tp(o),h=sI(this.M,l);return t.put(h)})}Hn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((l,h)=>{const m=t.store("remoteDocumentsV14"),w=(C=h,C.document?new Ve(Yt.fromString(C.document.name).popFirst(5)):C.noDocument?Ve.fromSegments(C.noDocument.path):C.unknownDocument?Ve.fromSegments(C.unknownDocument.path):Je()).path.toArray();var C;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(x))}).next(()=>he.waitFor(o))}}function uC(n){n.createObjectStore("targetDocuments",{keyPath:mA}).createIndex("documentTargetsIndex",tI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Zb,{unique:!0}),n.createObjectStore("targetGlobal")}const mI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Om{constructor(e,t,r,o,l,h,m,w,C,x,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=l,this.window=h,this.document=m,this.Yn=C,this.Xn=x,this.Zn=N,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=G=>Promise.resolve(),!Om.vt())throw new Ae(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pI(this,o),this.cs=t+"main",this.M=new Qb(w),this.hs=new js(this.cs,this.Zn,new SA(this.M)),this.ls=new rC(this.referenceDelegate,this.M),this.fs=new Pv(this.M),this.ds=new Xb,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===x&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ie.FAILED_PRECONDITION,mI);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Us(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(ch(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return ap(e).get("owner").next(t=>he.resolve(this.bs(t)))}Ps(e){return Pm(e).delete(this.clientId)}Vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ri(r,"clientMetadata");return o.qt().next(l=>{const h=e.Ss(l,18e5),m=l.filter(w=>-1===h.indexOf(w));return he.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?he.resolve(!0):ap(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ae(ie.FAILED_PRECONDITION,mI);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pm(e).qt().next(r=>void 0===this.Ss(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Yb(t,Us.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Pm(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return Nv.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new tC(e)}getDocumentOverlayCache(e){return Mv.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",l=14===(h=this.Zn)?Ev:13===h?vv:12===h?CA:11===h?ep:void Je();var h;let m;return this.hs.runTransaction(e,o,l,w=>(m=new Yb(w,this.ts?this.ts.next():Us.A),"readwrite-primary"===t?this.Ts(m).next(C=>!!C||this.Es(m)).next(C=>{if(!C)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Ae(ie.FAILED_PRECONDITION,wv);return r(m)}).next(C=>this.Rs(m).next(()=>C)):this.Fs(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Fs(e){return ap(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ie.FAILED_PRECONDITION,mI)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ap(e).put("owner",t)}static vt(){return js.vt()}As(e){const t=ap(e);return t.get("owner").next(r=>this.bs(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,Pt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ap(n){return ri(n,"owner")}function Pm(n){return ri(n,"clientMetadata")}function Fv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class lC{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(o=>{for(const l of r)l.applyToLocalView(o);return o})}Us(e,t){e.forEach((r,o)=>{for(const l of t)l.applyToLocalView(o)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Ve.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Qs(e,t.path):Y_(t)?this.js(e,t,r):this.Ws(e,t,r);var o}Qs(e,t){return this.Bs(e,new Ve(t)).next(r=>{let o=vm();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}js(e,t,r){const o=t.collectionGroup;let l=vm();return this.indexManager.getCollectionParents(e,o).next(h=>he.forEach(h,m=>{const w=(C=t,x=m.child(o),new Ko(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.Ws(e,w,r).next(C=>{C.forEach((x,N)=>{l=l.insert(x,N)})})}).next(()=>l))}Ws(e,t,r){let o;return this.fs.getAllFromCollection(e,t.path,r).next(l=>(o=l,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const h of l)for(const m of h.mutations){const w=m.key;let C=o.get(w);null==C&&(C=mn.newInvalidDocument(w),o=o.insert(w,C)),rv(m,C,h.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((l,h)=>{J_(t,h)||(o=o.remove(l))}),o))}}class km{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=o}static Js(e,t){let r=ln(),o=ln();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new km(e,t.fromCache,r,o)}}class Lv{Ys(e){this.Xs=e}Ks(e,t,r,o){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(Et.min())?this.Zs(e,t):this.Xs.qs(e,o).next(l=>{const h=this.ti(t,l);return(hm(t)||Xd(t))&&this.ei(t.limitType,h,o,r)?this.Zs(e,t):(ec()<=Wl.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fm(t)),this.Xs.Ks(e,t,vw(r,-1)).next(m=>(h.forEach(w=>{m=m.insert(w.key,w)}),m)))});var l}ti(e,t){let r=new vn(X_(e));return t.forEach((o,l)=>{J_(e,l)&&(r=r.add(l))}),r}ei(e,t,r,o){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Zs(e,t){return ec()<=Wl.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",fm(t)),this.Xs.Ks(e,t,Oa.min())}}class yI{constructor(e,t,r,o){this.persistence=e,this.ni=t,this.M=o,this.si=new Kn(Ft),this.ii=new Vu(l=>Yd(l),Fu),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new lC(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function _I(n,e,t,r){return new yI(n,e,t,r)}function vI(n,e){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,ye.Z)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.$s.getAllMutationBatches(r).next(l=>(o=l,t.ui(e),t.$s.getAllMutationBatches(r))).next(l=>{const h=[],m=[];let w=ln();for(const C of o){h.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}for(const C of l){m.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}return t.ai.qs(r,w).next(C=>({ci:C,removedBatchIds:h,addedBatchIds:m}))})})}),Fm.apply(this,arguments)}function Vv(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.oi.newChangeBuffer({trackRemovals:!0});return function(h,m,w,C){const x=w.batch,N=x.keys();let G=he.resolve();return N.forEach(K=>{G=G.next(()=>C.getEntry(m,K)).next(fe=>{const Fe=w.docVersions.get(K);Dt(null!==Fe),fe.version.compareTo(Fe)<0&&(x.applyToRemoteDocument(fe,w),fe.isValidDocument()&&(fe.setReadTime(w.commitVersion),C.addEntry(fe)))})}),G.next(()=>h.$s.removeMutationBatch(m,x))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,o))})}function cC(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function EI(n,e){const t=$e(n),r=e.snapshotVersion;let o=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.oi.newChangeBuffer({trackRemovals:!0});o=t.si;const m=[];e.targetChanges.forEach((C,x)=>{const N=o.get(x);if(!N)return;m.push(t.ls.removeMatchingKeys(l,C.removedDocuments,x).next(()=>t.ls.addMatchingKeys(l,C.addedDocuments,x)));let G=N.withSequenceNumber(l.currentSequenceNumber);var K,fe,Fe;e.targetMismatches.has(x)?G=G.withResumeToken(Nn.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):C.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(C.resumeToken,r)),o=o.insert(x,G),fe=G,Fe=C,(0===(K=N).resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&m.push(t.ls.updateTargetData(l,G))});let w=Hi();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,C))}),m.push(Lm(l,h,e.documentUpdates).next(C=>{w=C})),!r.isEqual(Et.min())){const C=t.ls.getLastRemoteSnapshotVersion(l).next(x=>t.ls.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(C)}return he.waitFor(m).next(()=>h.apply(l)).next(()=>t.ai.Gs(l,w)).next(()=>w)}).then(l=>(t.si=o,l))}function Lm(n,e,t){let r=ln();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Hi();return t.forEach((h,m)=>{const w=o.get(h);m.isNoDocument()&&m.version.isEqual(Et.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):Ne("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",m.version)}),l})}function dC(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function fh(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ls.getTargetData(r,e).next(l=>l?(o=l,he.resolve(o)):t.ls.allocateTargetId(r).next(h=>(o=new Uu(e,h,0,r.currentSequenceNumber),t.ls.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.si.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function up(n,e,t){return wI.apply(this,arguments)}function wI(){return wI=(0,ye.Z)(function*(n,e,t){const r=$e(n),o=r.si.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ch(h))throw h;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.si=r.si.remove(e),r.ii.delete(o.target)}),wI.apply(this,arguments)}function Uv(n,e,t){const r=$e(n);let o=Et.min(),l=ln();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,w,C){const x=$e(m),N=x.ii.get(C);return void 0!==N?he.resolve(x.si.get(N)):x.ls.getTargetData(w,C)}(r,h,ni(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(h,m.targetId).next(w=>{l=w})}).next(()=>r.ni.Ks(h,e,t?o:Et.min(),t?l:ln())).next(m=>(hC(r,kb(e),m),{documents:m,hi:l})))}function II(n,e){const t=$e(n),r=$e(t.ls),o=t.si.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,e).next(h=>h?h.target:null))}function DI(n,e){const t=$e(n),r=t.ri.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.oi.getAllFromCollectionGroup(o,e,vw(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(hC(t,e,o),o))}function hC(n,e,t){let r=Et.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.ri.set(e,r)}function bI(){return bI=(0,ye.Z)(function*(n,e,t,r){const o=$e(n);let l=ln(),h=Hi();for(const C of t){const x=e.li(C.metadata.name);C.document&&(l=l.add(x));const N=e.fi(C);N.setReadTime(e.di(C.metadata.readTime)),h=h.insert(x,N)}const m=o.oi.newChangeBuffer({trackRemovals:!0}),w=yield fh(o,(C=r,ni(Jd(Yt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>Lm(C,m,h).next(x=>(m.apply(C),x)).next(x=>o.ls.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.ls.addMatchingKeys(C,l,w.targetId)).next(()=>o.ai.Gs(C,x)).next(()=>x)))}),bI.apply(this,arguments)}function xA(n,e){return CI.apply(this,arguments)}function CI(){return CI=(0,ye.Z)(function*(n,e,t=ln()){const r=yield fh(n,ni(np(e.bundledQuery))),o=$e(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const h=Vr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.ds.saveNamedQuery(l,e);const m=r.withResumeToken(Nn.EMPTY_BYTE_STRING,h);return o.si=o.si.insert(m.targetId,m),o.ls.updateTargetData(l,m).next(()=>o.ls.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.ls.addMatchingKeys(l,t,r.targetId)).next(()=>o.ds.saveNamedQuery(l,e))})}),CI.apply(this,arguments)}class fC{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return he.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Vr(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:np(r.bundledQuery),readTime:Vr(r.readTime)}),he.resolve();var r}}class RA{constructor(){this.overlays=new Kn(Ve.comparator),this.mi=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.Xt(e,t,l)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.mi.get(r);return void 0!==o&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.mi.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const o=oc(),l=t.length+1,h=new Ve(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===l&&w.largestBatchId>r&&o.set(w.getKey(),w)}return he.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new Kn((C,x)=>C-x);const h=this.overlays.getIterator();for(;h.hasNext();){const C=h.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let x=l.get(C.largestBatchId);null===x&&(x=oc(),l=l.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const m=oc(),w=l.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,x)=>m.set(C,x)),!(m.size()>=o)););return he.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const h=this.mi.get(o.largestBatchId).delete(r.key);this.mi.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Cv(t,r));let l=this.mi.get(t);void 0===l&&(l=ln(),this.mi.set(t,l)),this.mi.set(t,l.add(r.key))}}class TI{constructor(){this.gi=new vn(si.yi),this.pi=new vn(si.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new si(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new si(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Ve(new Yt([])),r=new si(t,e),o=new si(t,e+1),l=[];return this.pi.forEachInRange([r,o],h=>{this.Ei(h),l.push(h.key)}),l}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Ve(new Yt([])),r=new si(t,e),o=new si(t,e+1);let l=ln();return this.pi.forEachInRange([r,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new si(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class si{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Ve.comparator(e.key,t.key)||Ft(e.Vi,t.Vi)}static Ii(e,t){return Ft(e.Vi,t.Vi)||Ve.comparator(e.key,t.key)}}class NA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new vn(si.yi)}checkEmpty(e){return he.resolve(0===this.$s.length)}addMutationBatch(e,t,r,o){const l=this.vi;this.vi++;const h=new iI(l,t,r,o);this.$s.push(h);for(const m of o)this.Si=this.Si.add(new si(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return he.resolve(h)}lookupMutationBatch(e,t){return he.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ci(t+1),l=o<0?0:o;return he.resolve(this.$s.length>l?this.$s[l]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return he.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new si(t,0),o=new si(t,Number.POSITIVE_INFINITY),l=[];return this.Si.forEachInRange([r,o],h=>{const m=this.Di(h.Vi);l.push(m)}),he.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Ft);return t.forEach(o=>{const l=new si(o,0),h=new si(o,Number.POSITIVE_INFINITY);this.Si.forEachInRange([l,h],m=>{r=r.add(m.Vi)})}),he.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;Ve.isDocumentKey(l)||(l=l.child(""));const h=new si(new Ve(l),0);let m=new vn(Ft);return this.Si.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.Vi)),!0)},h),he.resolve(this.xi(m))}xi(e){const t=[];return e.forEach(r=>{const o=this.Di(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Dt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return he.forEach(t.mutations,o=>{const l=new si(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new si(t,0),o=this.Si.firstAfterOrEqual(r);return he.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return he.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class i{constructor(e){this.ki=e,this.docs=new Kn(Ve.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,h=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(t))}getEntries(e,t){let r=Hi();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():mn.newInvalidDocument(o))}),he.resolve(r)}getAllFromCollection(e,t,r){let o=Hi();const l=new Ve(t.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:m,value:{document:w}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||ww(Ew(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return he.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Je()}Mi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new s(this)}getSize(e){return he.resolve(this.size)}}class s extends Ov{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.qn.addEntry(e,o)):this.qn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class a{constructor(e){this.persistence=e,this.Oi=new Vu(t=>Yd(t),Fu),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Fi=0,this.$i=new TI,this.targetCount=0,this.Bi=gc.mn()}forEachTarget(e,t){return this.Oi.forEach((r,o)=>t(o)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),he.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new gc(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.In(t),he.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Oi.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Oi.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),he.waitFor(l).next(()=>o)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),he.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.$i.containsKey(t))}}class u{constructor(e,t){this.Li={},this.overlays={},this.ts=new Us(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new a(this),this.indexManager=new lI,this.fs=new i(r=>this.referenceDelegate.Ui(r)),this.M=new Qb(t),this.ds=new fC(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new NA(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new c(this.ts.next());return this.referenceDelegate.qi(),r(o).next(l=>this.referenceDelegate.Gi(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e,t){return he.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class c extends Iv{constructor(e){super(),this.currentSequenceNumber=e}}class f{constructor(e){this.persistence=e,this.Qi=new TI,this.ji=null}static Wi(e){return new f(e)}get zi(){if(this.ji)return this.ji;throw Je()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(o=>this.zi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.zi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.zi,r=>{const o=Ve.fromPath(r);return this.Hi(e,o).next(l=>{l||t.removeEntry(o,Et.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return he.or([()=>he.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function _(n,e){return`firestore_clients_${n}_${e}`}function E(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function I(n,e){return`firestore_targets_${n}_${e}`}class T{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let l,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(l=new Ae(o.error.code,o.error.message))),h?new T(e,t,o.state,l):(cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class S{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Ae(r.error.code,r.error.message))),l?new S(e,r.state,o):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class P{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=Em();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=pw(r.activeTargetIds[h]),l=l.add(r.activeTargetIds[h]);return o?new P(e,l):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class V{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new V(t.clientId,t.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class W{constructor(){this.activeTargetIds=Em()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class me{constructor(e,t,r,o,l){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Kn(Ft),this.started=!1,this.ir=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=_(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new W),this.ar=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Os();for(const o of t){if(o===e.tr)continue;const l=e.getItem(_(e.persistenceKey,o));if(l){const h=P.Ji(o,l);h&&(e.sr=e.sr.insert(h.clientId,h))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(I(this.persistenceKey,e));if(r){const o=S.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(I(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const o=t.Vr(r.key,r.newValue);if(o)return t.vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(l){let h=Us.A;if(null!=l)try{const m=JSON.parse(l);Dt("number"==typeof m),h=m}catch(m){cr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==Us.A&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(l=>t.syncEngine.Nr(l)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new T(this.currentUser,e,t,r),l=E(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Yi())}pr(e){const t=E(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=I(this.persistenceKey,e),l=new S(e,t,r);this.setItem(o,l.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return P.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),o=Number(r[1]);return T.Ji(new ti(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return S.Ji(o,t)}wr(e){return V.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),l=this.gr(r),h=[],m=[];return l.forEach(w=>{o.has(w)||h.push(w)}),o.forEach(w=>{l.has(w)||m.push(w)}),this.syncEngine.Or(h,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Em();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Oe{constructor(){this.Fr=new W,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new W,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Be{Br(e){}shutdown(){}}class Qe{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ie={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class dt{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Ht extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,l){const h=this.oo(e,t);Ne("RestConnection","Sending: ",h,r);const m={};return this.uo(m,o,l),this.ao(e,h,m,r).then(w=>(Ne("RestConnection","Received: ",w),w),w=>{throw Nu("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}co(e,t,r,o,l){return this.ro(e,t,r,o,l)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}oo(e,t){return`${this.so}/v1/${t}:${Ie[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,o){return new Promise((l,h)=>{const m=new sw;m.listenOnce(nw.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case tw.NO_ERROR:const C=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(C)),l(C);break;case tw.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),h(new Ae(ie.DEADLINE_EXCEEDED,"Request time out"));break;case tw.HTTP_ERROR:const x=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const G=function(K){const fe=K.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(fe)>=0?fe:ie.UNKNOWN}(N.status);h(new Ae(G,N.message))}else h(new Ae(ie.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Ae(ie.UNAVAILABLE,"Connection failed."));break;default:Je()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=im(),h=zn(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new iw({})),this.uo(m.initMessageHeaders,t,r),(0,Pt.uI)()||(0,Pt.b$)()||(0,Pt.d)()||(0,Pt.w1)()||(0,Pt.Mn)()||(0,Pt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Ne("Connection","Creating WebChannel: "+w,m);const C=l.createWebChannel(w,m);let x=!1,N=!1;const G=new dt({jr:fe=>{N?Ne("Connection","Not sending because WebChannel is closed:",fe):(x||(Ne("Connection","Opening WebChannel transport."),C.open(),x=!0),Ne("Connection","WebChannel sending:",fe),C.send(fe))},Wr:()=>C.close()}),K=(fe,Fe,tt)=>{fe.listen(Fe,Wt=>{try{tt(Wt)}catch(ht){setTimeout(()=>{throw ht},0)}})};return K(C,Vf.EventType.OPEN,()=>{N||Ne("Connection","WebChannel transport opened.")}),K(C,Vf.EventType.CLOSE,()=>{N||(N=!0,Ne("Connection","WebChannel transport closed"),G.eo())}),K(C,Vf.EventType.ERROR,fe=>{N||(N=!0,Nu("Connection","WebChannel transport errored:",fe),G.eo(new Ae(ie.UNAVAILABLE,"The operation could not be completed")))}),K(C,Vf.EventType.MESSAGE,fe=>{var Fe;if(!N){const tt=fe.data[0];Dt(!!tt);const Wt=tt,ht=Wt.error||(null===(Fe=Wt[0])||void 0===Fe?void 0:Fe.error);if(ht){Ne("Connection","WebChannel received error:",ht);const En=ht.status;let bt=function(qt){const zu=hr[qt];if(void 0!==zu)return kw(zu)}(En),Gt=ht.message;void 0===bt&&(bt=ie.INTERNAL,Gt="Unknown error status: "+En+" with message "+ht.message),N=!0,G.eo(new Ae(bt,Gt)),C.close()}else Ne("Connection","WebChannel received:",tt),G.no(tt)}}),K(h,vb.STAT_EVENT,fe=>{fe.stat===rw.PROXY?Ne("Connection","Detected buffering proxy"):fe.stat===rw.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{G.Zr()},0),G}}function on(){return"undefined"!=typeof window?window:null}function Di(){return"undefined"!=typeof document?document:null}function bo(n){return new qb(n,!0)}class lp{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=o,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Vm{constructor(e,t,r,o,l,h,m,w){this.Jn=e,this.Ao=r,this.Ro=o,this.bo=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new lp(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ye.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ye.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(cr(t.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ie.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new Ae(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,ye.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bv extends Vm{constructor(e,t,r,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.M=l}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Im(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Je(),o=e.targetChange.targetIds||[],l=function(w,C){return w.N?(Dt(void 0===C||"string"==typeof C),Nn.fromBase64String(C||"")):(Dt(void 0===C||C instanceof Uint8Array),Nn.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(w){const C=void 0===w.code?ie.UNKNOWN:kw(w.code);return new Ae(C,w.message||"")}(h);t=new av(r,o,l,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Bs(n,r.document.name),l=Vr(r.document.updateTime),h=new Ii({mapValue:{fields:r.document.fields}}),m=mn.newFoundDocument(o,l,h);t=new Zf(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Bs(n,r.document),l=r.readTime?Vr(r.readTime):Et.min(),h=mn.newNoDocument(o,l);t=new Zf([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=Bs(n,r.document);t=new Zf([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Je();{const r=e.filter,l=new Bb(r.count||0);t=new Lw(r.targetId,l)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Et.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Et.min():l.readTime?Vr(l.readTime):Et.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=Qf(this.M),t.addTarget=function(o,l){let h;const m=l.target;return h=cm(m)?{documents:Gw(o,m)}:{query:pv(o,m)},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?h.resumeToken=uc(o,l.resumeToken):l.snapshotVersion.compareTo(Et.min())>0&&(h.readTime=Tr(o,l.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function qw(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Je()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Qf(this.M),t.removeTarget=e,this.Oo(t)}}class jv extends Vm{constructor(e,t,r,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.M=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function Hw(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,o){let l=Vr(r.updateTime?r.updateTime:o);return l.isEqual(Et.min())&&(l=Vr(o)),new Nw(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Vr(e.commitTime);return this.listener.Jo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Qf(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lc(this.M,r))};this.Oo(t)}}class $v extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.Zo=!1}tu(){if(this.Zo)throw new Ae(ie.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.ro(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ie.UNKNOWN,o.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.co(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ie.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class Hv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(cr(t),this.su=!1):Ne("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Gv{constructor(e,t,r,o,l){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var w;ph(h)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ye.Z)(function*(C){const x=$e(C);x.lu.add(4),yield Um(x),x._u.set("Unknown"),x.lu.delete(4),yield _c(x)}),function(C){return w.apply(this,arguments)})(h))}))}),this._u=new Hv(r,o)}}function _c(n){return cp.apply(this,arguments)}function cp(){return cp=(0,ye.Z)(function*(n){if(ph(n))for(const e of n.fu)yield e(!0)}),cp.apply(this,arguments)}function Um(n){return pC.apply(this,arguments)}function pC(){return pC=(0,ye.Z)(function*(n){for(const e of n.fu)yield e(!1)}),pC.apply(this,arguments)}function AI(n,e){const t=$e(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),yC(t)?mC(t):jm(t).Co()&&gC(t,e))}function qv(n,e){const t=$e(n),r=jm(t);t.hu.delete(e),r.Co()&&OA(t,e),0===t.hu.size&&(r.Co()?r.ko():ph(t)&&t._u.set("Unknown"))}function gC(n,e){n.wu.Z(e.targetId),jm(n).Qo(e)}function OA(n,e){n.wu.Z(e),jm(n).jo(e)}function mC(n){n.wu=new Hb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),jm(n).start(),n._u.iu()}function yC(n){return ph(n)&&!jm(n).Do()&&n.hu.size>0}function ph(n){return 0===$e(n).lu.size}function PA(n){n.wu=void 0}function RM(n){return _C.apply(this,arguments)}function _C(){return _C=(0,ye.Z)(function*(n){n.hu.forEach((e,t)=>{gC(n,e)})}),_C.apply(this,arguments)}function NM(n,e){return vC.apply(this,arguments)}function vC(){return vC=(0,ye.Z)(function*(n,e){PA(n),yC(n)?(n._u.uu(e),mC(n)):n._u.set("Unknown")}),vC.apply(this,arguments)}function OM(n,e,t){return EC.apply(this,arguments)}function EC(){return EC=(0,ye.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof av&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,l){const h=l.cause;for(const m of l.targetIds)o.hu.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o.hu.delete(m),o.wu.removeTarget(m))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield SI(n,r)}else if(e instanceof Zf?n.wu.ut(e):e instanceof Lw?n.wu._t(e):n.wu.ht(e),!t.isEqual(Et.min()))try{const r=yield cC(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const h=o.wu.yt(l);return h.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.hu.get(w);C&&o.hu.set(w,C.withResumeToken(m.resumeToken,l))}}),h.targetMismatches.forEach(m=>{const w=o.hu.get(m);if(!w)return;o.hu.set(m,w.withResumeToken(Nn.EMPTY_BYTE_STRING,w.snapshotVersion)),OA(o,m);const C=new Uu(w.target,m,1,w.sequenceNumber);gC(o,C)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield SI(n,r)}var r}),EC.apply(this,arguments)}function SI(n,e,t){return wC.apply(this,arguments)}function wC(){return wC=(0,ye.Z)(function*(n,e,t){if(!ch(e))throw e;n.lu.add(1),yield Um(n),n._u.set("Offline"),t||(t=()=>cC(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield _c(n)}))}),wC.apply(this,arguments)}function kA(n,e){return e().catch(t=>SI(n,t,e))}function Bm(n){return IC.apply(this,arguments)}function IC(){return IC=(0,ye.Z)(function*(n){const e=$e(n),t=gh(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;PM(e);)try{const o=yield dC(e.localStore,r);if(null===o){0===e.cu.length&&t.ko();break}r=o.batchId,kM(e,o)}catch(o){yield SI(e,o)}FA(e)&&LA(e)}),IC.apply(this,arguments)}function PM(n){return ph(n)&&n.cu.length<10}function kM(n,e){n.cu.push(e);const t=gh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function FA(n){return ph(n)&&!gh(n).Do()&&n.cu.length>0}function LA(n){gh(n).start()}function FM(n){return DC.apply(this,arguments)}function DC(){return DC=(0,ye.Z)(function*(n){gh(n).Xo()}),DC.apply(this,arguments)}function LM(n){return bC.apply(this,arguments)}function bC(){return bC=(0,ye.Z)(function*(n){const e=gh(n);for(const t of n.cu)e.Ho(t.mutations)}),bC.apply(this,arguments)}function VM(n,e,t){return CC.apply(this,arguments)}function CC(){return CC=(0,ye.Z)(function*(n,e,t){const r=n.cu.shift(),o=bv.from(r,e,t);yield kA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Bm(n)}),CC.apply(this,arguments)}function UM(n,e){return TC.apply(this,arguments)}function TC(){return TC=(0,ye.Z)(function*(n,e){var t;e&&gh(n).zo&&(yield(t=(0,ye.Z)(function*(r,o){if(Wf(l=o.code)&&l!==ie.ABORTED){const h=r.cu.shift();gh(r).No(),yield kA(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Bm(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),FA(n)&&LA(n)}),TC.apply(this,arguments)}function VA(n,e){return AC.apply(this,arguments)}function AC(){return AC=(0,ye.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=ph(t);t.lu.add(3),yield Um(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield _c(t)}),AC.apply(this,arguments)}function SC(n,e){return MC.apply(this,arguments)}function MC(){return MC=(0,ye.Z)(function*(n,e){const t=$e(n);e?(t.lu.delete(2),yield _c(t)):e||(t.lu.add(2),yield Um(t),t._u.set("Unknown"))}),MC.apply(this,arguments)}function jm(n){return n.mu||(n.mu=function(e,t,r){const o=$e(e);return o.tu(),new Bv(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:RM.bind(null,n),Jr:NM.bind(null,n),Ko:OM.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.mu.No(),yC(n)?mC(n):n._u.set("Unknown")):(yield n.mu.stop(),PA(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function gh(n){return n.gu||(n.gu=function(e,t,r){const o=$e(e);return o.tu(),new jv(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:FM.bind(null,n),Jr:UM.bind(null,n),Yo:LM.bind(null,n),Jo:VM.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.No(),yield Bm(n)):(yield n.gu.stop(),n.cu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class xC{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,l){const h=Date.now()+r,m=new xC(e,t,h,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $m(n,e){if(cr("AsyncQueue",`${e}: ${n}`),ch(n))return new Ae(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class Hm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ve.comparator(t.key,r.key):(t,r)=>Ve.comparator(t.key,r.key),this.keyedMap=vm(),this.sortedSet=new Kn(this.comparator)}static emptySet(e){return new Hm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Hm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class UA{constructor(){this.yu=new Kn(Ve.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Je():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Gm{constructor(e,t,r,o,l,h,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new Gm(e,t,Hm.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class BM{constructor(){this.Iu=void 0,this.listeners=[]}}class jM{constructor(){this.queries=new Vu(e=>Pb(e),Zo),this.onlineState="Unknown",this.Tu=new Set}}function RC(n,e){return NC.apply(this,arguments)}function NC(){return NC=(0,ye.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new BM),o)try{l.Iu=yield t.onListen(r)}catch(h){const m=$m(h,`Initialization of query '${fm(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.listeners.push(e),e.Eu(t.onlineState),l.Iu&&e.Au(l.Iu)&&kC(t)}),NC.apply(this,arguments)}function OC(n,e){return PC.apply(this,arguments)}function PC(){return PC=(0,ye.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const h=l.listeners.indexOf(e);h>=0&&(l.listeners.splice(h,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),PC.apply(this,arguments)}function $M(n,e){const t=$e(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.Au(o)&&(r=!0);h.Iu=o}}r&&kC(t)}function HM(n,e,t){const r=$e(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function kC(n){n.Tu.forEach(e=>{e.next()})}class FC{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Gm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Gm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class GM{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class BA{constructor(e){this.M=e}li(e){return Bs(this.M,e)}fi(e){return e.metadata.exists?fv(this.M,e.document,!1):mn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Vr(e)}}class qM{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jA(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Yt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new BA(this.M);for(const o of e)if(o.metadata.queries){const l=r.li(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||ln()).add(l);t.set(h,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function MA(n,e,t,r){return bI.apply(this,arguments)}(e.localStore,new BA(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield xA(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function jA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class $A{constructor(e){this.key=e}}class HA{constructor(e){this.key=e}}class GA{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=ln(),this.mutatedKeys=ln(),this.Lu=X_(e),this.Uu=new Hm(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new UA,o=t?t.Uu:this.Uu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const w=hm(this.query)&&o.size===this.query.limit?o.last():null,C=Xd(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,N)=>{const G=o.get(x),K=J_(this.query,N)?N:null,fe=!!G&&this.mutatedKeys.has(G.key),Fe=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let tt=!1;G&&K?G.data.isEqual(K.data)?fe!==Fe&&(r.track({type:3,doc:K}),tt=!0):this.Qu(G,K)||(r.track({type:2,doc:K}),tt=!0,(w&&this.Lu(K,w)>0||C&&this.Lu(K,C)<0)&&(m=!0)):!G&&K?(r.track({type:0,doc:K}),tt=!0):G&&!K&&(r.track({type:1,doc:G}),tt=!0,(w||C)&&(m=!0)),tt&&(K?(h=h.add(K),l=Fe?l.add(x):l.delete(x)):(h=h.delete(x),l=l.delete(x)))}),hm(this.query)||Xd(this.query))for(;h.size>this.query.limit;){const x=hm(this.query)?h.last():h.first();h=h.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{Uu:h,Ku:r,ei:m,mutatedKeys:l}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const l=e.Ku.pu();l.sort((C,x)=>function(N,G){const K=fe=>{switch(fe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Je()}};return K(N)-K(G)}(C.type,x.type)||this.Lu(C.doc,x.doc)),this.ju(r);const h=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,w=m!==this.$u;return this.$u=m,0!==l.length||w?{snapshot:new Gm(this.query,e.Uu,o,l,e.mutatedKeys,0===m,w,!1),zu:h}:{zu:h}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new UA,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=ln(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new HA(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new $A(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=ln();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Gm.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class zM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class WM{constructor(e){this.key=e,this.Xu=!1}}class KM{constructor(e,t,r,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Zu={},this.ta=new Vu(m=>Pb(m),Zo),this.ea=new Map,this.na=new Set,this.sa=new Kn(Ve.comparator),this.ia=new Map,this.ra=new TI,this.oa={},this.ua=new Map,this.aa=gc.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function ZM(n,e){return LC.apply(this,arguments)}function LC(){return LC=(0,ye.Z)(function*(n,e){const t=oT(n);let r,o;const l=t.ta.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.Yu();else{const h=yield fh(t.localStore,ni(e));t.isPrimaryClient&&AI(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield VC(t,e,r,"current"===m)}return o}),LC.apply(this,arguments)}function VC(n,e,t,r){return UC.apply(this,arguments)}function UC(){return UC=(0,ye.Z)(function*(n,e,t,r){n.ha=(x,N,G)=>{return(K=(0,ye.Z)(function*(fe,Fe,tt,Wt){let ht=Fe.view.Gu(tt);ht.ei&&(ht=yield Uv(fe.localStore,Fe.query,!1).then(({documents:Gt})=>Fe.view.Gu(Gt,ht)));const En=Wt&&Wt.targetChanges.get(Fe.targetId),bt=Fe.view.applyChanges(ht,fe.isPrimaryClient,En);return ZC(fe,Fe.targetId,bt.zu),bt.snapshot}),function(fe,Fe,tt,Wt){return K.apply(this,arguments)})(n,x,N,G);var K};const o=yield Uv(n.localStore,e,!0),l=new GA(e,o.hi),h=l.Gu(o.documents),m=ac.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=l.applyChanges(h,n.isPrimaryClient,m);ZC(n,t,w.zu);const C=new zM(e,t,l);return n.ta.set(e,C),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),w.snapshot}),UC.apply(this,arguments)}function YM(n,e){return BC.apply(this,arguments)}function BC(){return BC=(0,ye.Z)(function*(n,e){const t=$e(n),r=t.ta.get(e),o=t.ea.get(r.targetId);if(o.length>1)return t.ea.set(r.targetId,o.filter(l=>!Zo(l,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield up(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),qv(t.remoteStore,r.targetId),qm(t,r.targetId)}).catch(hh))):(qm(t,r.targetId),yield up(t.localStore,r.targetId,!0))}),BC.apply(this,arguments)}function jC(){return jC=(0,ye.Z)(function*(n,e,t){const r=aT(n);try{const o=yield function(l,h){const m=$e(l),w=er.now(),C=h.reduce((N,G)=>N.add(G.key),ln());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.ai.qs(N,C).next(G=>{x=G;const K=[];for(const fe of h){const Fe=Ub(fe,x.get(fe.key));null!=Fe&&K.push(new Fa(fe.key,Fe,um(Fe.value.mapValue),dr.exists(!0)))}return m.$s.addMutationBatch(N,w,K,h)})).then(N=>(N.applyToLocalDocumentSet(x),{batchId:N.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,h,m){let w=l.oa[l.currentUser.toKey()];w||(w=new Kn(Ft)),w=w.insert(h,m),l.oa[l.currentUser.toKey()]=w}(r,o.batchId,t),yield vc(r,o.changes),yield Bm(r.remoteStore)}catch(o){const l=$m(o,"Failed to persist write");t.reject(l)}}),jC.apply(this,arguments)}function qA(n,e){return $C.apply(this,arguments)}function $C(){return $C=(0,ye.Z)(function*(n,e){const t=$e(n);try{const r=yield EI(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.ia.get(l);h&&(Dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Xu=!0:o.modifiedDocuments.size>0?Dt(h.Xu):o.removedDocuments.size>0&&(Dt(h.Xu),h.Xu=!1))}),yield vc(t,r,e)}catch(r){yield hh(r)}}),$C.apply(this,arguments)}function zA(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ta.forEach((l,h)=>{const m=h.view.Eu(e);m.snapshot&&o.push(m.snapshot)}),function(l,h){const m=$e(l);m.onlineState=h;let w=!1;m.queries.forEach((C,x)=>{for(const N of x.listeners)N.Eu(h)&&(w=!0)}),w&&kC(m)}(r.eventManager,e),o.length&&r.Zu.Ko(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function JM(n,e,t){return HC.apply(this,arguments)}function HC(){return HC=(0,ye.Z)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ia.get(e),l=o&&o.key;if(l){let h=new Kn(Ve.comparator);h=h.insert(l,mn.newNoDocument(l,Et.min()));const m=ln().add(l),w=new sh(Et.min(),new Map,new vn(Ft),h,m);yield qA(r,w),r.sa=r.sa.remove(l),r.ia.delete(e),YC(r)}else yield up(r.localStore,e,!1).then(()=>qm(r,e,t)).catch(hh)}),HC.apply(this,arguments)}function XM(n,e){return GC.apply(this,arguments)}function GC(){return GC=(0,ye.Z)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const o=yield Vv(t.localStore,e);KC(t,r,null),WC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield vc(t,o)}catch(o){yield hh(o)}}),GC.apply(this,arguments)}function ex(n,e,t){return qC.apply(this,arguments)}function qC(){return qC=(0,ye.Z)(function*(n,e,t){const r=$e(n);try{const o=yield function(l,h){const m=$e(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.$s.lookupMutationBatch(w,h).next(x=>(Dt(null!==x),C=x.keys(),m.$s.removeMutationBatch(w,x))).next(()=>m.$s.performConsistencyCheck(w)).next(()=>m.ai.qs(w,C))})}(r.localStore,e);KC(r,e,t),WC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield vc(r,o)}catch(o){yield hh(o)}}),qC.apply(this,arguments)}function zC(){return zC=(0,ye.Z)(function*(n,e){const t=$e(n);ph(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const h=$e(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.$s.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.ua.get(r)||[];o.push(e),t.ua.set(r,o)}catch(r){const o=$m(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),zC.apply(this,arguments)}function WC(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function KC(n,e,t){const r=$e(n);let o=r.oa[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.oa[r.currentUser.toKey()]=o}}function qm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||WA(n,r)})}function WA(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(qv(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),YC(n))}function ZC(n,e,t){for(const r of t)r instanceof $A?(n.ra.addReference(r.key,e),nx(n,r)):r instanceof HA?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||WA(n,r.key)):Je()}function nx(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.na.add(r),YC(n))}function YC(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Ve(Yt.fromString(e)),r=n.aa.next();n.ia.set(r,new WM(t)),n.sa=n.sa.insert(t,r),AI(n.remoteStore,new Uu(ni(Jd(t.path)),r,2,Us.A))}}function vc(n,e,t){return QC.apply(this,arguments)}function QC(){return QC=(0,ye.Z)(function*(n,e,t){const r=$e(n),o=[],l=[],h=[];var m;r.ta.isEmpty()||(r.ta.forEach((m,w)=>{h.push(r.ha(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const x=km.Js(w.targetId,C);l.push(x)}}))}),yield Promise.all(h),r.Zu.Ko(o),yield(m=(0,ye.Z)(function*(w,C){const x=$e(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>he.forEach(C,G=>he.forEach(G.zs,K=>x.persistence.referenceDelegate.addReference(N,G.targetId,K)).next(()=>he.forEach(G.Hs,K=>x.persistence.referenceDelegate.removeReference(N,G.targetId,K)))))}catch(N){if(!ch(N))throw N;Ne("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const G=N.targetId;if(!N.fromCache){const K=x.si.get(G),Fe=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);x.si=x.si.insert(G,Fe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,l))}),QC.apply(this,arguments)}function rx(n,e){return JC.apply(this,arguments)}function JC(){return JC=(0,ye.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield vI(t.localStore,e);t.currentUser=e,(o=t).ua.forEach(h=>{h.forEach(m=>{m.reject(new Ae(ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield vc(t,r.ci)}var o}),JC.apply(this,arguments)}function ix(n,e){const t=$e(n),r=t.ia.get(e);if(r&&r.Xu)return ln().add(r.key);{let o=ln();const l=t.ea.get(e);if(!l)return o;for(const h of l){const m=t.ta.get(h);o=o.unionWith(m.view.qu)}return o}}function sx(n,e){return XC.apply(this,arguments)}function XC(){return XC=(0,ye.Z)(function*(n,e){const t=$e(n),r=yield Uv(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&ZC(t,e.targetId,o.zu),o}),XC.apply(this,arguments)}function ox(n,e){return eT.apply(this,arguments)}function eT(){return eT=(0,ye.Z)(function*(n,e){const t=$e(n);return DI(t.localStore,e).then(r=>vc(t,r))}),eT.apply(this,arguments)}function ax(n,e,t,r){return tT.apply(this,arguments)}function tT(){return tT=(0,ye.Z)(function*(n,e,t,r){const o=$e(n),l=yield function(h,m){const w=$e(h),C=$e(w.$s);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>C.ln(x,m).next(N=>N?w.ai.qs(x,N):he.resolve(null)))}(o.localStore,e);var m;null!==l?("pending"===t?yield Bm(o.remoteStore):"acknowledged"===t||"rejected"===t?(KC(o,e,r||null),WC(o,e),m=e,$e($e(o.localStore).$s).dn(m)):Je(),yield vc(o,l)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),tT.apply(this,arguments)}function nT(){return nT=(0,ye.Z)(function*(n,e){const t=$e(n);if(oT(t),aT(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield KA(t,r.toArray());t.ca=!0,yield SC(t.remoteStore,!0);for(const l of o)AI(t.remoteStore,l)}else if(!1===e&&!1!==t.ca){const r=[];let o=Promise.resolve();t.ea.forEach((l,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(qm(t,h),up(t.localStore,h,!0))),qv(t.remoteStore,h)}),yield o,yield KA(t,r),function(l){const h=$e(l);h.ia.forEach((m,w)=>{qv(h.remoteStore,w)}),h.ra.bi(),h.ia=new Map,h.sa=new Kn(Ve.comparator)}(t),t.ca=!1,yield SC(t.remoteStore,!1)}}),nT.apply(this,arguments)}function KA(n,e,t){return rT.apply(this,arguments)}function rT(){return rT=(0,ye.Z)(function*(n,e,t){const r=$e(n),o=[],l=[];for(const h of e){let m;const w=r.ea.get(h);if(w&&0!==w.length){m=yield fh(r.localStore,ni(w[0]));for(const C of w){const x=r.ta.get(C),N=yield sx(r,x);N.snapshot&&l.push(N.snapshot)}}else{const C=yield II(r.localStore,h);m=yield fh(r.localStore,C),yield VC(r,ZA(C),h,!1)}o.push(m)}return r.Zu.Ko(l),o}),rT.apply(this,arguments)}function ZA(n){return K_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function lx(n){const e=$e(n);return $e($e(e.localStore).persistence).Os()}function cx(n,e,t,r){return iT.apply(this,arguments)}function iT(){return iT=(0,ye.Z)(function*(n,e,t,r){const o=$e(n);if(o.ca)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const l=o.ea.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const h=yield DI(o.localStore,kb(l[0])),m=sh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield vc(o,h,m);break}case"rejected":yield up(o.localStore,e,!0),qm(o,e,r);break;default:Je()}}),iT.apply(this,arguments)}function dx(n,e,t){return sT.apply(this,arguments)}function sT(){return sT=(0,ye.Z)(function*(n,e,t){const r=oT(n);if(r.ca){for(const o of e){if(r.ea.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const l=yield II(r.localStore,o),h=yield fh(r.localStore,l);yield VC(r,ZA(l),h.targetId,!1),AI(r.remoteStore,h)}for(const o of t)r.ea.has(o)&&(yield up(r.localStore,o,!1).then(()=>{qv(r.remoteStore,o),qm(r,o)}).catch(hh))}}),sT.apply(this,arguments)}function oT(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ix.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JM.bind(null,e),e.Zu.Ko=$M.bind(null,e.eventManager),e.Zu.la=HM.bind(null,e.eventManager),e}function aT(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ex.bind(null,e),e}class YA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=bo(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return _I(this.persistence,new Lv,e.initialUser,this.M)}_a(e){return new u(f.Wi,this.M)}da(e){return new Oe}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class QA extends YA{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield aT(r.ga.syncEngine),yield Bm(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return _I(this.persistence,new Lv,e.initialUser,this.M)}wa(e){return new sC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=Fv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Pi.withCacheSize(this.cacheSizeBytes):Pi.DEFAULT;return new Om(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,on(),Di(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new Oe}}class fx extends QA{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.ga.syncEngine;r.sharedClientState instanceof me&&(r.sharedClientState.syncEngine={kr:ax.bind(null,o),Mr:cx.bind(null,o),Or:dx.bind(null,o),Os:lx.bind(null,o),Nr:ox.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var l=(0,ye.Z)(function*(h){yield function ux(n,e){return nT.apply(this,arguments)}(r.ga.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return l.apply(this,arguments)}}())})()}da(e){const t=on();if(!me.vt(t))throw new Ae(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Fv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new me(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class uT{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>zA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=rx.bind(null,r.syncEngine),yield SC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new jM}createDatastore(e){const t=bo(e.databaseInfo.databaseId),r=new Ht(e.databaseInfo);return new $v(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=m=>zA(this.syncEngine,m,0),h=Qe.vt()?new Qe:new Be,new Gv(t,r,o,l,h);var t,r,o,l,h}createSyncEngine(e,t){return function(r,o,l,h,m,w,C){const x=new KM(r,o,l,h,m,w);return C&&(x.ca=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=$e(t);Ne("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Um(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function JA(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class MI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class px{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),o=Number(r);isNaN(o)&&e.Ra(`length string (${r}) is not valid number`);const l=yield e.ba(o);return new GM(JSON.parse(l),t.length+o)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ye.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class gx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(l,h){const m=$e(l),w=Qf(m.M)+"/documents",C={documents:h.map(K=>Yf(m.M,K))},x=yield m.co("BatchGetDocuments",w,C),N=new Map;x.forEach(K=>{const fe=function jw(n,e){return"found"in e?function(t,r){Dt(!!r.found);const o=Bs(t,r.found.name),l=Vr(r.found.updateTime),h=new Ii({mapValue:{fields:r.found.fields}});return mn.newFoundDocument(o,l,h)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const o=Bs(t,r.missing),l=Vr(r.readTime);return mn.newNoDocument(o,l)}(n,e):Je()}(m.M,K);N.set(fe.key.toString(),fe)});const G=[];return h.forEach(K=>{const fe=N.get(K.toString());Dt(!!fe),G.push(fe)}),G}),function(l,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new La(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=Ve.fromPath(o);e.mutations.push(new iv(l,e.precondition(l)))}),yield(r=(0,ye.Z)(function*(o,l){const h=$e(o),m=Qf(h.M)+"/documents",w={writes:l.map(C=>lc(h.M,C))};yield h.ro("Commit",m,w)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Je();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?dr.updateTime(t):dr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Ae(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dr.updateTime(t)}return dr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mx{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.va=5,this.So=new lp(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ye.Z)(function*(){const t=new gx(e.datastore),r=e.Da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.Ca(l)}))}).catch(o=>{e.Ca(o)})}))}Da(e){try{const t=this.updateFunction(e);return!Pu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Wf(t)}return!1}}class yx{constructor(e,t,r,o){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ti.UNAUTHENTICATED,this.clientId=bb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,ye.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield l.authCredentialListener(m),l.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Ne("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=$m(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function XA(n,e){return lT.apply(this,arguments)}function lT(){return lT=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(l){r.isEqual(l)||(yield vI(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),lT.apply(this,arguments)}function eS(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield dT(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>VA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,l)=>VA(e.remoteStore,l)),n.onlineComponents=e}),cT.apply(this,arguments)}function dT(n){return hT.apply(this,arguments)}function hT(){return hT=(0,ye.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield XA(n,new YA)),n.offlineComponents}),hT.apply(this,arguments)}function xI(n){return fT.apply(this,arguments)}function fT(){return fT=(0,ye.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield eS(n,new uT)),n.onlineComponents}),fT.apply(this,arguments)}function tS(n){return dT(n).then(e=>e.persistence)}function pT(n){return dT(n).then(e=>e.localStore)}function nS(n){return xI(n).then(e=>e.remoteStore)}function gT(n){return xI(n).then(e=>e.syncEngine)}function zm(n){return mT.apply(this,arguments)}function mT(){return mT=(0,ye.Z)(function*(n){const e=yield xI(n),t=e.eventManager;return t.onListen=ZM.bind(null,e.syncEngine),t.onUnlisten=YM.bind(null,e.syncEngine),t}),mT.apply(this,arguments)}function rS(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,l,h,m,w){const C=new MI({next:N=>{l.enqueueAndForget(()=>OC(o,x));const G=N.docs.has(h);!G&&N.fromCache?w.reject(new Ae(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&N.fromCache&&m&&"server"===m.source?w.reject(new Ae(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new FC(Jd(h.path),C,{includeMetadataChanges:!0,Du:!0});return RC(o,x)}(yield zm(n),n.asyncQueue,e,t,r)})),r.promise}function iS(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,l,h,m,w){const C=new MI({next:N=>{l.enqueueAndForget(()=>OC(o,x)),N.fromCache&&"server"===m.source?w.reject(new Ae(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),x=new FC(h,C,{includeMetadataChanges:!0,Du:!0});return RC(o,x)}(yield zm(n),n.asyncQueue,e,t,r)})),r.promise}const sS=new Map;function yT(n,e,t){if(!t)throw new Ae(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oS(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aS(n){if(!Ve.isDocumentKey(n))throw new Ae(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uS(n){if(Ve.isDocumentKey(n))throw new Ae(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function RI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Je()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=RI(n);throw new Ae(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lS(n,e){if(e<=0)throw new Ae(ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class cS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,oS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cS({}),this._settingsFrozen=!1,e instanceof Na?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Ae(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Na(o.options.projectId)}(e))}get app(){if(!this._app)throw new Ae(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new aw;switch(t.type){case"gapi":const r=t.client;return Dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new cw(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ae(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sS.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),sS.delete(e),t.terminate())}(this),Promise.resolve()}}class Vn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class Gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gi(this.firestore,e,this._query)}}class Gu extends Gi{constructor(e,t,r){super(e,t,Jd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new Ve(e))}withConverter(e){return new Gu(this.firestore,e,this._path)}}function dS(n,e,...t){if(n=(0,Pt.m9)(n),yT("collection","path",e),n instanceof zv){const r=Yt.fromString(e,...t);return uS(r),new Gu(n,null,r)}{if(!(n instanceof Vn||n instanceof Gu))throw new Ae(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return uS(r),new Gu(n.firestore,null,r)}}function NI(n,e,...t){if(n=(0,Pt.m9)(n),1===arguments.length&&(e=bb.R()),yT("doc","path",e),n instanceof zv){const r=Yt.fromString(e,...t);return aS(r),new Vn(n,null,new Ve(r))}{if(!(n instanceof Vn||n instanceof Gu))throw new Ae(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return aS(r),new Vn(n.firestore,n instanceof Gu?n.converter:null,new Ve(r))}}function hS(n,e){return n=(0,Pt.m9)(n),e=(0,Pt.m9)(e),(n instanceof Vn||n instanceof Gu)&&(e instanceof Vn||e instanceof Gu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function fS(n,e){return n=(0,Pt.m9)(n),e=(0,Pt.m9)(e),n instanceof Gi&&e instanceof Gi&&n.firestore===e.firestore&&Zo(n._query,e._query)&&n.converter===e.converter}class Sx{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new lp(this,"async_queue_retry"),this.Ua=()=>{const t=Di();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Di();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Di();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Lr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ye.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!ch(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,cr("INTERNAL UNHANDLED ERROR: ",function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),h}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const o=xC.createAndSchedule(this,e,t,r,l=>this.Qa(l));return this.Oa.push(o),o}qa(){this.Fa&&Je()}verifyOperationInProgress(){}ja(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function _T(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Mx{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Zn extends zv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Sx,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||pS(this),this._firestoreClient.terminate()}}function Ur(n){return n._firestoreClient||pS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function pS(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new j_(n._databaseId,l,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var l,m;n._firestoreClient=new yx(n._authCredentials,n._appCheckCredentials,n._queue,r)}function gS(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield XA(n,t),yield eS(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(l=o).name?l.code===ie.FAILED_PRECONDITION||l.code===ie.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function mS(n){if(n._initialized||n._terminated)throw new Ae(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ec{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qu(Nn.fromBase64String(e))}catch(t){throw new Ae(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qu(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dp{constructor(e){this._methodName=e}}class OI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const Ux=/^__.*__$/;class Bx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Fa(e,this.data,this.fieldMask,t,this.fieldTransforms):new zf(e,this.data,t,this.fieldTransforms)}}class yS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _S(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Je()}}class PI{constructor(e,t,r,o,l,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===l&&this.Ja(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new PI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.ec(e),o}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.Ja(),o}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return LI(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(_S(this.Ya)&&Ux.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class jx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||bo(e)}uc(e,t,r,o=!1){return new PI({Ya:e,methodName:t,oc:r,path:br.emptyPath(),tc:!1,rc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function hp(n){const e=n._freezeSettings(),t=bo(n._databaseId);return new jx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kI(n,e,t,r,o,l={}){const h=n.uc(l.merge||l.mergeFields?2:0,e,t,o);IT("Data must be an object, but it was:",h,r);const m=wS(r,h);let w,C;if(l.merge)w=new qd(h.fieldMask),C=h.fieldTransforms;else if(l.mergeFields){const x=[];for(const N of l.mergeFields){const G=DT(e,N,t);if(!h.contains(G))throw new Ae(ie.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);DS(x,G)||x.push(G)}w=new qd(x),C=h.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=h.fieldTransforms;return new Bx(new Ii(m),w,C)}class Wv extends dp{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wv}}function vS(n,e,t){return new PI({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class vT extends dp{_toFieldTransform(e){return new nh(e.path,new th)}isEqual(e){return e instanceof vT}}class $x extends dp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=vS(this,e,!0),r=this.ac.map(l=>fp(l,t)),o=new ic(r);return new nh(e.path,o)}isEqual(e){return this===e}}class Hx extends dp{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=vS(this,e,!0),r=this.ac.map(l=>fp(l,t)),o=new sc(r);return new nh(e.path,o)}isEqual(e){return this===e}}class Gx extends dp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Yo(e.M,Aw(e.M,this.cc));return new nh(e.path,t)}isEqual(e){return this===e}}function ET(n,e,t,r){const o=n.uc(1,e,t);IT("Data must be an object, but it was:",o,r);const l=[],h=Ii.empty();tc(r,(w,C)=>{const x=FI(e,w,t);C=(0,Pt.m9)(C);const N=o.nc(x);if(C instanceof Wv)l.push(x);else{const G=fp(C,N);null!=G&&(l.push(x),h.set(x,G))}});const m=new qd(l);return new yS(h,m,o.fieldTransforms)}function wT(n,e,t,r,o,l){const h=n.uc(1,e,t),m=[DT(e,r,t)],w=[o];if(l.length%2!=0)throw new Ae(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<l.length;G+=2)m.push(DT(e,l[G])),w.push(l[G+1]);const C=[],x=Ii.empty();for(let G=m.length-1;G>=0;--G)if(!DS(C,m[G])){const K=m[G];let fe=w[G];fe=(0,Pt.m9)(fe);const Fe=h.nc(K);if(fe instanceof Wv)C.push(K);else{const tt=fp(fe,Fe);null!=tt&&(C.push(K),x.set(K,tt))}}const N=new qd(C);return new yS(x,N,h.fieldTransforms)}function ES(n,e,t,r=!1){return fp(t,n.uc(r?4:3,e))}function fp(n,e){if(IS(n=(0,Pt.m9)(n)))return IT("Unsupported field value:",e,n),wS(n,e);if(n instanceof dp)return function(t,r){if(!_S(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const h of t){let m=fp(h,r.sc(l));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Pt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Aw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=er.fromDate(t);return{timestampValue:Tr(r.M,o)}}if(t instanceof er){const o=new er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tr(r.M,o)}}if(t instanceof OI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qu)return{bytesValue:uc(r.M,t._byteString)};if(t instanceof Vn){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.ic(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Uw(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${RI(t)}`)}(n,e)}function wS(n,e){const t={};return fw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tc(n,(r,o)=>{const l=fp(o,e.Za(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function IS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof er||n instanceof OI||n instanceof qu||n instanceof Vn||n instanceof dp)}function IT(n,e,t){if(!IS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=RI(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function DT(n,e,t){if((e=(0,Pt.m9)(e))instanceof Ec)return e._internalPath;if("string"==typeof e)return FI(n,e);throw LI("Field path arguments must be of type string or ",n,!1,void 0,t)}const qx=new RegExp("[~\\*/\\[\\]]");function FI(n,e,t){if(e.search(qx)>=0)throw LI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ec(...e.split("."))._internalPath}catch(r){throw LI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function LI(n,e,t,r,o){const l=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(l||h)&&(w+=" (found",l&&(w+=` in field ${r}`),h&&(w+=` in document ${o}`),w+=")"),new Ae(ie.INVALID_ARGUMENT,m+n+w)}function DS(n,e){return n.some(t=>t.isEqual(e))}class Kv{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(VI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zx extends Kv{data(){return super.data()}}function VI(n,e){return"string"==typeof e?FI(n,e):e instanceof Ec?e._internalPath:e._delegate._internalPath}class pp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wc extends Kv{constructor(e,t,r,o,l,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(VI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Zv extends wc{data(e={}){return super.data(e)}}class mh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new pp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zv(this._firestore,this._userDataWriter,r.key,r,new pp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new Zv(r._firestore,r._userDataWriter,h.doc.key,h.doc,new pp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new Zv(r._firestore,r._userDataWriter,h.doc.key,h.doc,new pp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==h.type&&(w=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),1!==h.type&&(l=l.add(h.doc),C=l.indexOf(h.doc.key)),{type:Wx(h.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Wx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Je()}}function bS(n,e){return n instanceof wc&&e instanceof wc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mh&&e instanceof mh&&n._firestore===e._firestore&&fS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function CS(n){if(Xd(n)&&0===n.explicitOrderBy.length)throw new Ae(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yv{}function yh(n,...e){for(const t of e)n=t._apply(n);return n}class Kx extends Yv{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=hp(e.firestore),r=function(o,l,h,m,w,C,x){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ae(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){RS(x,C);const K=[];for(const fe of x)K.push(xS(m,o,fe));N={arrayValue:{values:K}}}else N=xS(m,o,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||RS(x,C),N=ES(h,"where",x,"in"===C||"not-in"===C);const G=tr.create(w,C,N);return function(K,fe){if(fe.S()){const tt=Tw(K);if(null!==tt&&!tt.isEqual(fe.field))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${tt.toString()}' and '${fe.field.toString()}'`);const Wt=Z_(K);null!==Wt&&NS(0,fe.field,Wt)}const Fe=function(tt,Wt){for(const ht of tt.filters)if(Wt.indexOf(ht.op)>=0)return ht.op;return null}(K,function(tt){switch(tt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(fe.op));if(null!==Fe)throw new Ae(ie.INVALID_ARGUMENT,Fe===fe.op?`Invalid query. You cannot use more than one '${fe.op.toString()}' filter.`:`Invalid query. You cannot use '${fe.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,G),G}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Gi(e.firestore,e.converter,function(o,l){const h=o.filters.concat([l]);return new Ko(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class Yx extends Yv{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new Ae(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Lu(o,l);return function(m,w){if(null===Z_(m)){const C=Tw(m);null!==C&&NS(0,C,w.field)}}(r,h),h}(e._query,this.hc,this.dc);return new Gi(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new Ko(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class TS extends Yv{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new Gi(e.firestore,e.converter,Q_(e._query,this._c,this.wc))}}class AS extends Yv{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=MS(e,this.type,this.mc,this.gc);return new Gi(e.firestore,e.converter,(o=t,new Ko((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class SS extends Yv{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=MS(e,this.type,this.mc,this.gc);return new Gi(e.firestore,e.converter,(o=t,new Ko((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function MS(n,e,t,r){if(t[0]=(0,Pt.m9)(t[0]),t[0]instanceof Kv)return function(o,l,h,m,w){if(!m)throw new Ae(ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const C=[];for(const x of eh(o))if(x.field.isKeyField())C.push(Kd(l,m.key));else{const N=m.data.field(x.field);if(U_(N))throw new Ae(ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const G=x.field.canonicalString();throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${G}' (used as the orderBy) does not exist.`)}C.push(N)}return new ka(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=hp(n.firestore);return function(l,h,m,w,C,x){const N=l.explicitOrderBy;if(C.length>N.length)throw new Ae(ie.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const G=[];for(let K=0;K<C.length;K++){const fe=C[K];if(N[K].field.isKeyField()){if("string"!=typeof fe)throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof fe}`);if(!Y_(l)&&-1!==fe.indexOf("/"))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${fe}' contains a slash.`);const Fe=l.path.child(Yt.fromString(fe));if(!Ve.isDocumentKey(Fe))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const tt=new Ve(Fe);G.push(Kd(h,tt))}else{const Fe=ES(m,w,fe);G.push(Fe)}}return new ka(G,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function xS(n,e,t){if("string"==typeof(t=(0,Pt.m9)(t))){if(""===t)throw new Ae(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y_(e)&&-1!==t.indexOf("/"))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Yt.fromString(t));if(!Ve.isDocumentKey(r))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kd(n,new Ve(r))}if(t instanceof Vn)return Kd(n,t._key);throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${RI(t)}.`)}function RS(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(ie.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function NS(n,e,t){if(!t.isEqual(e))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class bT{convertValue(e,t="none"){switch(nc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ou(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Je()}}convertObject(e,t){const r={};return tc(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new OI(Wn(e.latitude),Wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=B_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bf(e));default:return null}}convertTimestamp(e){const t=Ra(e);return new er(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);Dt(Zw(r));const o=new Na(r.get(1),r.get(3)),l=new Ve(r.popFirst(5));return o.isEqual(t)||cr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function UI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class iR extends bT{constructor(e){super(),this.firestore=e}convertBytes(e){return new qu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}class OS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=hp(e)}set(e,t,r){this._verifyNotCommitted();const o=_h(e,this._firestore),l=UI(o.converter,t,r),h=kI(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,dr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=_h(e,this._firestore);let h;return h="string"==typeof(t=(0,Pt.m9)(t))||t instanceof Ec?wT(this._dataReader,"WriteBatch.update",l._key,t,r,o):ET(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_h(e,this._firestore);return this._mutations=this._mutations.concat(new La(t._key,dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _h(n,e){if((n=(0,Pt.m9)(n)).firestore!==e)throw new Ae(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class gp extends bT{constructor(e){super(),this.firestore=e}convertBytes(e){return new qu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}function PS(n,e,t){n=Jt(n,Vn);const r=Jt(n.firestore,Zn),o=UI(n.converter,e,t);return Wm(r,[kI(hp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,dr.none())])}function kS(n,e,t,...r){n=Jt(n,Vn);const o=Jt(n.firestore,Zn),l=hp(o);let h;return h="string"==typeof(e=(0,Pt.m9)(e))||e instanceof Ec?wT(l,"updateDoc",n._key,e,t,r):ET(l,"updateDoc",n._key,e),Wm(o,[h.toMutation(n._key,dr.exists(!0))])}function FS(n,...e){var t,r,o;n=(0,Pt.m9)(n);let l={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||_T(e[h])||(l=e[h],h++);const m={includeMetadataChanges:l.includeMetadataChanges};if(_T(e[h])){const N=e[h];e[h]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[h+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[h+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,x;if(n instanceof Vn)C=Jt(n.firestore,Zn),x=Jd(n._key.path),w={next:N=>{e[h]&&e[h](CT(C,n,N))},error:e[h+1],complete:e[h+2]};else{const N=Jt(n,Gi);C=Jt(N.firestore,Zn),x=N._query;const G=new gp(C);w={next:K=>{e[h]&&e[h](new mh(C,G,N,K))},error:e[h+1],complete:e[h+2]},CS(n._query)}return function(N,G,K,fe){const Fe=new MI(fe),tt=new FC(G,Fe,K);return N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return RC(yield zm(N),tt)})),()=>{Fe.pa(),N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return OC(yield zm(N),tt)}))}}(Ur(C),x,m,w)}function Wm(n,e){return function(t,r){const o=new Lr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function QM(n,e,t){return jC.apply(this,arguments)}(yield gT(t),r,o)})),o.promise}(Ur(n),e)}function CT(n,e,t){const r=t.docs.get(e._key),o=new gp(n);return new wc(n,o,e._key,r,new pp(t.hasPendingWrites,t.fromCache),e.converter)}class pR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=hp(e)}get(e){const t=_h(e,this._firestore),r=new iR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Je();const l=o[0];if(l.isFoundDocument())return new Kv(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Kv(this._firestore,r,t._key,null,t.converter);throw Je()})}set(e,t,r){const o=_h(e,this._firestore),l=UI(o.converter,t,r),h=kI(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const l=_h(e,this._firestore);let h;return h="string"==typeof(t=(0,Pt.m9)(t))||t instanceof Ec?wT(this._dataReader,"Transaction.update",l._key,t,r,o):ET(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=_h(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_h(e,this._firestore),r=new gp(this._firestore);return super.get(e).then(o=>new wc(this._firestore,r,t._key,o._document,new pp(!1,!1),t.converter))}}function TT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function VS(){if("undefined"==typeof Uint8Array)throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function US(){if(!function Tb(){return"undefined"!=typeof atob}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Hd=zl.SDK_VERSION,(0,zl._registerComponent)(new Qy.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),l=new Zn(o,new lw(t.getProvider("auth-internal")),new Db(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,zl.registerVersion)(V_,"3.4.7",n),(0,zl.registerVersion)(V_,"3.4.7","esm2017")}();class Qv{constructor(e){this._delegate=e}static fromBase64String(e){return US(),new Qv(qu.fromBase64String(e))}static fromUint8Array(e){return VS(),new Qv(qu.fromUint8Array(e))}toBase64(){return US(),this._delegate.toBase64()}toUint8Array(){return VS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function AT(n){return function DR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class bR{enableIndexedDbPersistence(e,t){return function Rx(n,e){mS(n=Jt(n,Zn));const t=Ur(n),r=n._freezeSettings(),o=new uT;return gS(t,o,new QA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Nx(n){mS(n=Jt(n,Zn));const e=Ur(n),t=n._freezeSettings(),r=new uT;return gS(e,r,new fx(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ox(n){if(n._initialized&&!n._terminated)throw new Ae(ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!js.vt())return Promise.resolve();const o=r+"main";yield js.delete(o)}),function(r){return t.apply(this,arguments)})(Fv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class BS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Na||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Tx(n,e,t,r={}){var o;const l=(n=Jt(n,zv))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Nu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=ti.MOCK_USER;else{h=(0,Pt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ti(w)}n._authCredentials=new uw(new ow(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function kx(n){return function _x(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield tS(n),t=yield nS(n);return e.setNetworkEnabled(!0),function(r){const o=$e(r);return o.lu.delete(0),_c(o)}(t)}))}(Ur(n=Jt(n,Zn)))}(this._delegate)}disableNetwork(){return function Fx(n){return function vx(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield tS(n),t=yield nS(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const l=$e(o);l.lu.add(0),yield Um(l),l._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ur(n=Jt(n,Zn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,oS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Px(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function tx(n,e){return zC.apply(this,arguments)}(yield gT(e),t)})),t.promise}(Ur(n=Jt(n,Zn)))}(this._delegate)}onSnapshotsInSync(e){return function fR(n,e){return function Ix(n,e){const t=new MI(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield zm(n),o=t,$e(r).Tu.add(o),void o.next();var r,o})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield zm(n),o=t,void $e(r).Tu.delete(o);var r,o}))}}(Ur(n=Jt(n,Zn)),_T(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Km(this,dS(this._delegate,e))}catch(t){throw ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new Jo(this,NI(this._delegate,e))}catch(t){throw ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hs(this,function Ax(n,e){if(n=Jt(n,zv),yT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gi(n,null,(t=e,new Ko(Yt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gR(n,e){return function Dx(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(o=n,xI(o).then(l=>l.datastore));var o;new mx(n.asyncQueue,r,e,t).run()})),t.promise}(Ur(n=Jt(n,Zn)),t=>e(new pR(n,t)))}(this._delegate,t=>e(new jS(this,t)))}batch(){return Ur(this._delegate),new $S(new OS(this._delegate,e=>Wm(this._delegate,e)))}loadBundle(e){return function Lx(n,e){const t=Ur(n=Jt(n,Zn)),r=new Mx;return function bx(n,e,t,r){const o=function(l,h){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,w=function(w,C){if(w instanceof Uint8Array)return JA(w,C);if(w instanceof ArrayBuffer)return JA(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new px(w,h);var w}(t,bo(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function hx(n,e,t){const r=$e(n);var o;(o=(0,ye.Z)(function*(l,h,m){try{const w=yield h.getMetadata();if(yield function(G,K){const fe=$e(G),Fe=Vr(K.createTime);return fe.persistence.runTransaction("hasNewerBundle","readonly",tt=>fe.ds.getBundleMetadata(tt,K.id)).then(tt=>!!tt&&tt.createTime.compareTo(Fe)>=0)}(l.localStore,w))return yield h.close(),m._completeWith({taskState:"Success",documentsLoaded:(G=w).totalDocuments,bytesLoaded:G.totalBytes,totalDocuments:G.totalDocuments,totalBytes:G.totalBytes}),Promise.resolve(new Set);m._updateProgress(jA(w));const C=new qM(w,l.localStore,h.M);let x=yield h.fa();for(;x;){const G=yield C.Nu(x);G&&m._updateProgress(G),x=yield h.fa()}const N=yield C.complete();return yield vc(l,N.Ou,void 0),yield function(G,K){const fe=$e(G);return fe.persistence.runTransaction("Save bundle","readwrite",Fe=>fe.ds.saveBundleMetadata(Fe,K))}(l.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Mu)}catch(w){return Nu("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var G}),function(l,h,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield gT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Vx(n,e){return function Cx(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=$e(t);return o.persistence.runTransaction("Get named query","readonly",l=>o.ds.getNamedQuery(l,r))}(yield pT(n),e)}))}(Ur(n=Jt(n,Zn)),e).then(t=>t?new Gi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new hs(this,t):null)}}class BI extends bT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qv(new qu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Jo.forKey(t,this.firestore,null)}}class jS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new BI(e)}get(e){const t=yp(e);return this._delegate.get(t).then(r=>new Jv(this._firestore,new wc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=yp(e);return r?(TT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=yp(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=yp(e);return this._delegate.delete(t),this}}class $S{constructor(e){this._delegate=e}set(e,t,r){const o=yp(e);return r?(TT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=yp(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=yp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class mp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Zv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xv(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=mp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new mp(e,new BI(e),t),o.set(t,l)),l}}mp.INSTANCES=new WeakMap;class Jo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Jo(t,new Vn(t._delegate,r,new Ve(e)))}static forKey(e,t,r){return new Jo(t,new Vn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Km(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Km(this.firestore,dS(this._delegate,e))}catch(t){throw ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Pt.m9)(e))instanceof Vn&&hS(this._delegate,e)}set(e,t){t=TT("DocumentReference.set",t);try{return t?PS(this._delegate,e,t):PS(this._delegate,e)}catch(r){throw ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?kS(this._delegate,e):kS(this._delegate,e,t,...r)}catch(o){throw ds(o,"updateDoc()","DocumentReference.update()")}}delete(){return function dR(n){return Wm(Jt(n.firestore,Zn),[new La(n._key,dr.none())])}(this._delegate)}onSnapshot(...e){const t=HS(e),r=GS(e,o=>new Jv(this.firestore,new wc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return FS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function oR(n){n=Jt(n,Vn);const e=Jt(n.firestore,Zn),t=Ur(e),r=new gp(e);return function Ex(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,l,h){try{const m=yield function(w,C){const x=$e(w);return x.persistence.runTransaction("read document","readonly",N=>x.ai.Bs(N,C))}(o,l);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Ae(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=$m(m,`Failed to get document '${l} from cache`);h.reject(w)}}),function(o,l,h){return r.apply(this,arguments)})(yield pT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new wc(e,r,n._key,o,new pp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function aR(n){n=Jt(n,Vn);const e=Jt(n.firestore,Zn);return rS(Ur(e),n._key,{source:"server"}).then(t=>CT(e,n,t))}(this._delegate):function sR(n){n=Jt(n,Vn);const e=Jt(n.firestore,Zn);return rS(Ur(e),n._key).then(t=>CT(e,n,t))}(this._delegate),t.then(r=>new Jv(this.firestore,new wc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Jo(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}function ds(n,e,t){return n.message=n.message.replace(e,t),n}function HS(n){for(const e of n)if("object"==typeof e&&!AT(e))return e;return{}}function GS(n,e){var t,r;let o;return o=AT(n[0])?n[0]:AT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Jv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Jo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bS(this._delegate,e._delegate)}}class Xv extends Jv{data(e){const t=this._delegate.data(e);return function wb(n,e){n||Je()}(void 0!==t),t}}class hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BI(e)}where(e,t,r){try{return new hs(this.firestore,yh(this._delegate,function Zx(n,e,t){const r=e,o=VI("where",n);return new Kx(o,r,t)}(e,t,r)))}catch(o){throw ds(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new hs(this.firestore,yh(this._delegate,function Qx(n,e="asc"){const t=e,r=VI("orderBy",n);return new Yx(r,t)}(e,t)))}catch(r){throw ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hs(this.firestore,yh(this._delegate,function Jx(n){return lS("limit",n),new TS("limit",n,"F")}(e)))}catch(t){throw ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new hs(this.firestore,yh(this._delegate,function Xx(n){return lS("limitToLast",n),new TS("limitToLast",n,"L")}(e)))}catch(t){throw ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hs(this.firestore,yh(this._delegate,function eR(...n){return new AS("startAt",n,!0)}(...e)))}catch(t){throw ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hs(this.firestore,yh(this._delegate,function tR(...n){return new AS("startAfter",n,!1)}(...e)))}catch(t){throw ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hs(this.firestore,yh(this._delegate,function nR(...n){return new SS("endBefore",n,!1)}(...e)))}catch(t){throw ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hs(this.firestore,yh(this._delegate,function rR(...n){return new SS("endAt",n,!0)}(...e)))}catch(t){throw ds(t,"endAt()","Query.endAt()")}}isEqual(e){return fS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function lR(n){n=Jt(n,Gi);const e=Jt(n.firestore,Zn),t=Ur(e),r=new gp(e);return function wx(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,l,h){try{const m=yield Uv(o,l,!0),w=new GA(l,m.hi),C=w.Gu(m.documents),x=w.applyChanges(C,!1);h.resolve(x.snapshot)}catch(m){const w=$m(m,`Failed to execute query '${l} against cache`);h.reject(w)}}),function(o,l,h){return r.apply(this,arguments)})(yield pT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new mh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function cR(n){n=Jt(n,Gi);const e=Jt(n.firestore,Zn),t=Ur(e),r=new gp(e);return iS(t,n._query,{source:"server"}).then(o=>new mh(e,r,n,o))}(this._delegate):function uR(n){n=Jt(n,Gi);const e=Jt(n.firestore,Zn),t=Ur(e),r=new gp(e);return CS(n._query),iS(t,n._query).then(o=>new mh(e,r,n,o))}(this._delegate),t.then(r=>new ST(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=HS(e),r=GS(e,o=>new ST(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return FS(this._delegate,t,r)}withConverter(e){return new hs(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}class TR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ST{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new TR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xv(this._firestore,r))})}isEqual(e){return bS(this._delegate,e._delegate)}}class Km extends hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Jo(this.firestore,e):null}doc(e){try{return new Jo(this.firestore,void 0===e?NI(this._delegate):NI(this._delegate,e))}catch(t){throw ds(t,"doc()","CollectionReference.doc()")}}add(e){return function hR(n,e){const t=Jt(n.firestore,Zn),r=NI(n),o=UI(n.converter,e);return Wm(t,[kI(hp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,dr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Jo(this.firestore,t))}isEqual(e){return hS(this._delegate,e._delegate)}withConverter(e){return new Km(this.firestore,this._delegate.withConverter(e?mp.getInstance(this.firestore,e):null))}}function yp(n){return Jt(n,Vn)}class MT{constructor(...e){this._delegate=new Ec(...e)}static documentId(){return new MT(br.keyField().canonicalString())}isEqual(e){return(e=(0,Pt.m9)(e))instanceof Ec&&this._delegate._internalPath.isEqual(e._internalPath)}}class _p{constructor(e){this._delegate=e}static serverTimestamp(){const e=function yR(){return new vT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new _p(e)}static delete(){const e=function mR(){return new Wv("deleteField")}();return e._methodName="FieldValue.delete",new _p(e)}static arrayUnion(...e){const t=function _R(...n){return new $x("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new _p(t)}static arrayRemove(...e){const t=function vR(...n){return new Hx("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new _p(t)}static increment(e){const t=function ER(n){return new Gx("increment",n)}(e);return t._methodName="FieldValue.increment",new _p(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const AR={Firestore:BS,GeoPoint:OI,Timestamp:er,Blob:Qv,Transaction:jS,WriteBatch:$S,DocumentReference:Jo,DocumentSnapshot:Jv,Query:hs,QueryDocumentSnapshot:Xv,QuerySnapshot:ST,CollectionReference:Km,FieldPath:MT,FieldValue:_p,setLogLevel:function CR(n){!function Eb(n){Ru.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function MR(n){(function SR(n,e){n.INTERNAL.registerComponent(new Qy.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},AR)))})(n,(e,t)=>new BS(e,t,new bR)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(WD.Z);var xR=k(6451),jI=k(5363),RR=k(6063);class NR extends Gn.x{constructor(e=1/0,t=1/0,r=RR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:l,_windowTime:h}=this;t||(r.push(e),!o&&r.push(l.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,l=o.slice();for(let h=0;h<l.length&&!e.closed;h+=r?1:2)e.next(l[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,l=(o?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!o){const h=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=h;w+=2)m=w;m&&r.splice(0,m+1)}}}var OR=k(3099);function qS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,OR.B)({connector:()=>new NR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function zS(n,e){return(0,sd.m)(e)?Xn(()=>n,e):Xn(()=>n)}var xT=k(9468);k(5867);const KS=new Map,VR={activated:!1,tokenObservers:[]},UR={initialized:!1,enabled:!1};function bi(n){return KS.get(n)||VR}function Ua(n,e){KS.set(n,e)}function HI(){return UR}class GR{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Pt.BH,yield function qR(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Pt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const fs=new Pt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function YS(n){if(!bi(n).activated)throw fs.create("use-before-activation",{appName:n.name})}function PT(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const l={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,l)}catch(N){throw fs.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==h.status)throw fs.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(N){throw fs.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw fs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),x=Date.now();return{token:m.attestationToken,expireTimeMillis:x+C,issuedAtTimeMillis:x}}),kT.apply(this,arguments)}function YR(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const e0="firebase-app-check-store";let zI=null;function JS(){return zI||(zI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(fs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(e0,{keyPath:"compositeKey"})}}catch(t){e(fs.create("storage-open",{originalErrorMessage:t.message}))}}),zI)}function FT(){return FT=(0,ye.Z)(function*(n,e){const r=(yield JS()).transaction(e0,"readwrite"),l=r.objectStore(e0).put({compositeKey:n,value:e});return new Promise((h,m)=>{l.onsuccess=w=>{h()},r.onerror=w=>{var C;m(fs.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),FT.apply(this,arguments)}const t0=new Wl.Yd("@firebase/app-check");function nM(n,e){return(0,Pt.hl)()?function eN(n,e){return function XS(n,e){return FT.apply(this,arguments)}(function tM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{t0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rM(){return HI().enabled}function iM(){return BT.apply(this,arguments)}function BT(){return BT=(0,ye.Z)(function*(){const n=HI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),BT.apply(this,arguments)}const oN={error:"UNKNOWN_ERROR"};function aN(n){return Pt.US.encodeString(JSON.stringify(n),!1)}function WI(n){return jT.apply(this,arguments)}function jT(){return jT=(0,ye.Z)(function*(n,e=!1){const t=n.app;YS(t);const r=bi(t);let l,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&KI(w)&&(o=w)}if(!e&&o&&KI(o))return{token:o.token};let m,h=!1;if(rM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=PT(YR(t,yield iM()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),h=!0);const w=yield r.exchangeTokenPromise;return yield nM(t,w),Ua(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),h=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?t0.warn(w.message):t0.error(w),l=w}return o?(m={token:o.token},Ua(t,Object.assign(Object.assign({},r),{token:o})),yield nM(t,o)):m=lN(l),h&&oM(t,m),m}),jT.apply(this,arguments)}function HT(n,e){const t=bi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ua(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function sM(n){const{app:e}=n,t=bi(e);let r=t.tokenRefresher;r||(r=function uN(n){const{app:e}=n;return new GR((0,ye.Z)(function*(){let r;if(r=bi(e).token?yield WI(n,!0):yield WI(n),r.error)throw r.error}),()=>!0,()=>{const t=bi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ua(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function oM(n,e){const t=bi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function KI(n){return n.expireTimeMillis-Date.now()>0}function lN(n){return{token:aN(oN),error:n}}class cN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=bi(this.app);for(const t of e)HT(this.app,t.next);return Promise.resolve()}}const pM="app-check-internal";!function bN(){(0,zl._registerComponent)(new Qy.wA("app-check",n=>function dN(n,e){return new cN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(pM).initialize()})),(0,zl._registerComponent)(new Qy.wA(pM,n=>function hN(n){return{getToken:e=>WI(n,e),addTokenListener:e=>function $T(n,e,t,r){const{app:o}=n,l=bi(o),h={next:t,error:r,type:e};if(Ua(o,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,h]})),l.token&&KI(l.token)){const m=l.token;Promise.resolve().then(()=>{t({token:m.token}),sM(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>sM(n))}(n,"INTERNAL",e),removeTokenListener:e=>HT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,zl.registerVersion)("@firebase/app-check","0.5.5")}();class WT{constructor(){return(0,vi.vb)("app-check")}}"undefined"!=typeof window&&window;var MN=k(127);const mM=new g.OlP("angularfire2.auth.use-emulator"),yM=new g.OlP("angularfire2.auth.settings"),_M=new g.OlP("angularfire2.auth.tenant-id"),vM=new g.OlP("angularfire2.auth.langugage-code"),EM=new g.OlP("angularfire2.auth.use-device-language"),wM=new g.OlP("angularfire.auth.persistence"),IM=(n,e,t,r,o,l,h,m)=>(0,hn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,l&&w.useDeviceLanguage(),h)for(const[C,x]of Object.entries(h))w.settings[C]=x;return m&&w.setPersistence(m),w},[t,r,o,l,h,m]);let YI=(()=>{class n{constructor(t,r,o,l,h,m,w,C,x,N,G,K){const fe=new Gn.x,Fe=vt(void 0).pipe((0,jI.Q)(h.outsideAngular),Xn(()=>l.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,4087)))),(0,Tt.U)(()=>(0,hn.on)(t,l,r)),(0,Tt.U)(tt=>IM(tt,l,m,C,x,N,w,G)),qS({bufferSize:1,refCount:!1}));if(ar(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=vt(null);else{Fe.pipe(R()).subscribe();const Wt=Fe.pipe(Xn(bt=>bt.getRedirectResult().then(Gt=>Gt,()=>null)),vi.iC,qS({bufferSize:1,refCount:!1})),ht=Fe.pipe(Xn(bt=>new pn.y(Gt=>({unsubscribe:l.runOutsideAngular(()=>bt.onAuthStateChanged(qt=>Gt.next(qt),qt=>Gt.error(qt),()=>Gt.complete()))})))),En=Fe.pipe(Xn(bt=>new pn.y(Gt=>({unsubscribe:l.runOutsideAngular(()=>bt.onIdTokenChanged(qt=>Gt.next(qt),qt=>Gt.error(qt),()=>Gt.complete()))}))));this.authState=Wt.pipe(zS(ht),(0,xT.R)(h.outsideAngular),(0,jI.Q)(h.insideAngular)),this.user=Wt.pipe(zS(En),(0,xT.R)(h.outsideAngular),(0,jI.Q)(h.insideAngular)),this.idToken=this.user.pipe(Xn(bt=>bt?(0,Mn.D)(bt.getIdToken()):vt(null))),this.idTokenResult=this.user.pipe(Xn(bt=>bt?(0,Mn.D)(bt.getIdTokenResult()):vt(null))),this.credential=(0,xR.T)(Wt,fe,this.authState.pipe(lo(bt=>!bt))).pipe((0,Tt.U)(bt=>(null==bt?void 0:bt.user)?bt:null),(0,xT.R)(h.outsideAngular),(0,jI.Q)(h.insideAngular))}return(0,hn.pX)(this,Fe,l,{spy:{apply:(tt,Wt,ht)=>{(tt.startsWith("signIn")||tt.startsWith("createUser"))&&ht.then(En=>fe.next(En))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(hn.Dh),g.LFG(hn.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(vi.HU),g.LFG(mM,8),g.LFG(yM,8),g.LFG(_M,8),g.LFG(vM,8),g.LFG(EM,8),g.LFG(wM,8),g.LFG(WT,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function DM(n,e){return function RN(n,e=qD.z){return new pn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function ZT(n,e){return DM(n,e).pipe((0,Tt.U)(t=>({payload:t,type:"query"})))}function QI(n,e){return ZT(n,e).pipe(Ol(void 0),Yy(),(0,Tt.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const w=o.find(x=>x.doc.ref.isEqual(h.ref)),C=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(h.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),l}))}function bM(n,e,t){return QI(n,t).pipe(Da((r,o)=>function ON(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function PN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),function lE(n,e=Ia.y){return n=null!=n?n:uA,(0,Xr.e)((t,r)=>{let o,l=!0;t.subscribe((0,gn.x)(r,h=>{const m=e(h);(l||!n(o,m))&&(l=!1,o=m,r.next(h))}))})}(),(0,Tt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function YT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function CM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class TM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=QI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Tt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Ol(void 0),Yy(),lo(([r,o])=>o.length>0||!r),(0,Tt.U)(([r,o])=>o),vi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Da((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=CM(e);return bM(this.query,t,this.afs.schedulers.outsideAngular).pipe(vi.iC)}valueChanges(e={}){return ZT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),vi.iC)}get(e){return(0,Mn.D)(this.query.get(e)).pipe(vi.iC)}add(e){return this.ref.add(e)}doc(e){return new AM(this.ref.doc(e),this.afs)}}class AM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=SM(r,t);return new TM(o,l,this.afs)}snapshotChanges(){return function NN(n,e){return DM(n,e).pipe(Ol(void 0),Yy(),(0,Tt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Mn.D)(this.ref.get(e)).pipe(vi.iC)}}class kN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?QI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),lo(t=>t.length>0),vi.iC):QI(this.query,this.afs.schedulers.outsideAngular).pipe(vi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Da((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=CM(e);return bM(this.query,t,this.afs.schedulers.outsideAngular).pipe(vi.iC)}valueChanges(e={}){return ZT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),vi.iC)}get(e){return(0,Mn.D)(this.query.get(e)).pipe(vi.iC)}}const FN=new g.OlP("angularfire2.enableFirestorePersistence"),LN=new g.OlP("angularfire2.firestore.persistenceSettings"),VN=new g.OlP("angularfire2.firestore.settings"),UN=new g.OlP("angularfire2.firestore.use-emulator");function SM(n,e=(t=>t)){return{query:e(n),ref:n}}let BN=(()=>{class n{constructor(t,r,o,l,h,m,w,C,x,N,G,K,fe,Fe,tt,Wt,ht){this.schedulers=w;const En=(0,hn.on)(t,m,r),bt=x;N&&IM(En,m,G,fe,Fe,tt,K,Wt),[this.firestore,this.persistenceEnabled$]=(0,hn.cc)(`${En.name}.firestore`,"AngularFirestore",En.name,()=>{const Gt=m.runOutsideAngular(()=>En.firestore());if(l&&Gt.settings(l),bt&&Gt.useEmulator(...bt),o&&!ar(h)){const qt=()=>{try{return(0,Mn.D)(Gt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(zu){return"undefined"!=typeof console&&console.warn(zu),vt(!1)}};return[Gt,m.runOutsideAngular(qt)]}return[Gt,vt(!1)]},[l,bt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:h}=SM(o,r),m=this.schedulers.ngZone.run(()=>l);return new TM(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),l=this.firestore.collectionGroup(t);return new kN(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new AM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(hn.Dh),g.LFG(hn.xv,8),g.LFG(FN,8),g.LFG(VN,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(vi.HU),g.LFG(LN,8),g.LFG(UN,8),g.LFG(YI,8),g.LFG(mM,8),g.LFG(yM,8),g.LFG(_M,8),g.LFG(vM,8),g.LFG(EM,8),g.LFG(wM,8),g.LFG(WT,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jN=(()=>{class n{constructor(t,r,o,l){this.afStore=t,this.ngFireAuth=r,this.router=o,this.ngZone=l,this.ngFireAuth.authState.subscribe(h=>{h?(this.userData=h,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user")||"{}")):(localStorage.setItem("user",""),JSON.parse(localStorage.getItem("user")||"{}"))})}SignIn(t,r){return this.ngFireAuth.signInWithEmailAndPassword(t,r)}RegisterUser(t,r){return this.ngFireAuth.createUserWithEmailAndPassword(t,r)}PasswordRecover(t){return this.ngFireAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email has been sent, please check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user")||"{}");return null!==t&&!1!==t.emailVerified}SetUserData(t){return this.afStore.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.ngFireAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["login"])})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(BN),g.LFG(YI),g.LFG(Ln),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$N=(()=>{class n{constructor(t){this.afauth=t}logInGoogle(){var t=this;return(0,ye.Z)(function*(){try{return yield t.afauth.signInWithPopup(new MN.Z.auth.GoogleAuthProvider)}catch(r){return console.log("error en login ",r),null}})()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(YI))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HN=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",pathMatch:"full",component:(()=>{class n{constructor(t,r,o){this.authService=t,this.authServiceLogin=r,this.router=o}ngOnInit(){}logIn(t,r){this.authService.SignIn(t.value,r.value).then(o=>{window.alert("Logueado Correctamente")}).catch(o=>(window.alert(o.message),null))}registro(t,r){var o=this;return(0,ye.Z)(function*(){console.log(t.value+r.value),o.authService.RegisterUser(t.value,r.value).then(l=>{window.alert("Registrado Correctamente")}).catch(l=>(window.alert(l.message),null))})()}logInGoogle(){var t=this;return(0,ye.Z)(function*(){t.authServiceLogin.logInGoogle().then(r=>{window.alert("Logueado Correctamente")}).catch(r=>(window.alert(r.message),null))})()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(jN),g.Y36($N),g.Y36(Ln))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:37,vars:0,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","stylesheet","href","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"],["action","#","id","login-form"],[1,"heading"],[1,"left"],["for","email"],["type","email","name","email","id","email"],["email",""],["for","password"],["type","password","name","password","id","pass"],["password",""],["type","submit","value","Login",3,"click"],[2,"font-size","1em"],[2,"color","blue","text-decoration","underline","font-size","1em","cursor","pointer",3,"click"],[1,"right"],[1,"connect"],[1,"google-plus",3,"click"],[1,"fontawesome-google-plus"],["aria-hidden","true",1,"bi","bi-google"]],template:function(t,r){if(1&t){const o=g.EpF();g.TgZ(0,"html",0)(1,"head"),g._UZ(2,"meta",1)(3,"meta",2)(4,"meta",3)(5,"link",4),g.TgZ(6,"title"),g._uU(7,"Ian Garcia"),g.qZA()(),g.TgZ(8,"body")(9,"form",5)(10,"div",6),g._uU(11,"Registro/Login"),g.qZA(),g.TgZ(12,"div",7)(13,"label",8),g._uU(14,"Email"),g.qZA(),g._UZ(15,"br")(16,"input",9,10)(18,"br"),g.TgZ(19,"label",11),g._uU(20,"Password"),g.qZA(),g._UZ(21,"br")(22,"input",12,13)(24,"br"),g.TgZ(25,"input",14),g.NdJ("click",function(){g.CHM(o);const h=g.MAs(17),m=g.MAs(23);return r.logIn(h,m)}),g.qZA(),g._UZ(26,"br"),g.TgZ(27,"label",15),g._uU(28,"No tenes cuenta? "),g.TgZ(29,"a",16),g.NdJ("click",function(){g.CHM(o);const h=g.MAs(17),m=g.MAs(23);return r.registro(h,m)}),g._uU(30,"Registrate"),g.qZA()()(),g.TgZ(31,"div",17)(32,"div",18),g._uU(33,"Entrar con"),g.qZA(),g.TgZ(34,"a",19),g.NdJ("click",function(){return r.logInGoogle()}),g.TgZ(35,"span",20),g._UZ(36,"i",21),g.qZA()()()()()()}},styles:['[class*=fontawesome-][_ngcontent-%COMP%]:before{font-family:FontAwesome,sans-serif}body[_ngcontent-%COMP%]{background:-owg-linear-gradient(left,#272838,#2b2d41,#393549,#433545);background:linear-gradient(left,#272838,#2b2d41,#393549,#433545);font-family:Raleway,sans-serif}form#login-form[_ngcontent-%COMP%]{background:#fff;width:40em;margin:2em auto;overflow:hidden;position:relative;border-radius:.3em;box-shadow:0 0 .2em #000}form#login-form[_ngcontent-%COMP%]   div.heading[_ngcontent-%COMP%]{background:#f85f64;color:#fff;text-align:center;text-transform:uppercase;font-weight:700;padding:1.5em;font-size:1.1em}form#login-form[_ngcontent-%COMP%]   div.left[_ngcontent-%COMP%]{width:45%;float:left;padding:1.7em 1.5em 2.5em;box-sizing:border-box}form#login-form[_ngcontent-%COMP%]   div.right[_ngcontent-%COMP%]{width:45%;float:right;padding:1.7em 1.5em 2.5em;box-sizing:border-box}form#login-form[_ngcontent-%COMP%]:before, form#login-form[_ngcontent-%COMP%]:after{position:absolute;top:0;right:0;left:0;bottom:0;margin:auto}form#login-form[_ngcontent-%COMP%]:before{content:"or";color:gray;height:.5em;width:.5em;top:1.75em}form#login-form[_ngcontent-%COMP%]:after{content:"";background:rgba(128,128,128,.3);height:8em;width:.12em;top:-7em;left:.5em;z-index:900;box-shadow:0 9.6em #8080804d}div.left[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;color:gray;font-size:1.1em;margin-top:.6em}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{border:.1em solid #dfdfdf;padding:1em;margin:.6em 0;max-width:88.5%;border-radius:.2em;box-shadow:0 0 .2em #dfdfdf33;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, div.left[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border:.1em solid #919191}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{background:#f85f64;color:#fff;outline:none;text-transform:uppercase;padding:1.2em;overflow:hidden;border:none;letter-spacing:.1em;margin:.5em 0;font-weight:700;border-radius:.4em;transition:.15s all ease-in-out}div.left[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{background:rgba(248,95,100,.8)}div.right[_ngcontent-%COMP%]   div.connect[_ngcontent-%COMP%]{color:gray;font-size:1.1em;text-align:center}div.right[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;font-size:1.5em;text-decoration:none;color:#fff;width:9em;padding:.55em .3em;clear:both;text-align:center;margin:.5em .1em;border-radius:.3em}div.right[_ngcontent-%COMP%]   a.facebook[_ngcontent-%COMP%]{background:#3a589a;margin-top:.8em;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.facebook[_ngcontent-%COMP%]:hover{background:rgba(58,88,154,.8)}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]{background:#4099ff;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]:hover{background:rgba(64,153,255,.8)}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]{background:#e9544f;transition:.15s all ease-in-out}div.right[_ngcontent-%COMP%]   a.google-plus[_ngcontent-%COMP%]:hover{background:rgba(233,84,79,.8)}']}),n})()},{path:"",component:Zy}];let GN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[Wy.forRoot(HN)],Wy]}),n})(),qN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[Zy]}),n.\u0275inj=g.cJS({providers:[],imports:[[ua,GN,xl,hn.hO.initializeApp(jo_firebaseConfig)]]}),n})();(0,g.G48)(),rl().bootstrapModule(qN).catch(n=>console.error(n))},5867:(nt,Ce,k)=>{k.d(Ce,{Mq:()=>g.getApp,C6:()=>g.getApps});var g=k(9681);(0,g.registerVersion)("firebase","9.6.10","app")},127:(nt,Ce,k)=>{k.d(Ce,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(nt,Ce,k)=>{k.r(Ce);var g=k(5861),Z=k(3942),O=k(2090),ae=k(9681),J=k(655),pe=k(1877),se=k(4859);const xe=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ke=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ze=new pe.Yd("@firebase/auth");function Ge(y,...d){Ze.logLevel<=pe.in.ERROR&&Ze.error(`Auth (${ae.SDK_VERSION}): ${y}`,...d)}function De(y,...d){throw Ue(y,...d)}function _e(y,...d){return Ue(y,...d)}function ve(y,d,p){const v=Object.assign(Object.assign({},ke()),{[d]:p});return new O.LL("auth","Firebase",v).create(d,{appName:y.name})}function je(y,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&De(y,"argument-error"),ve(y,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ue(y,...d){if("string"!=typeof y){const p=d[0],v=[...d.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return de.create(y,...d)}function ee(y,d,...p){if(!y)throw Ue(d,...p)}function q(y){const d="INTERNAL ASSERTION FAILED: "+y;throw Ge(d),new Error(d)}function te(y,d){y||q(d)}const ge=new Map;function ne(y){te(y instanceof Function,"Expected a class definition");let d=ge.get(y);return d?(te(d instanceof y,"Instance stored in cache mismatched with class"),d):(d=new y,ge.set(y,d),d)}function wt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Kt(){return"http:"===Tn()||"https:"===Tn()}function Tn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class rn{constructor(d,p){this.shortDelay=d,this.longDelay=p,te(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function rt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sn(y,d){te(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class Ci{static initialize(d,p,v){this.fetchImpl=d,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void q("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void q("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void q("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},qi=new rn(3e4,6e4);function Zt(y,d){return y.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:y.tenantId}):d}function Lt(y,d,p,v){return rr.apply(this,arguments)}function rr(){return(rr=(0,g.Z)(function*(y,d,p,v,A={}){return ai(y,A,(0,g.Z)(function*(){let R={},$={};v&&("GET"===d?$=v:R={body:JSON.stringify(v)});const re=(0,O.xO)(Object.assign({key:y.config.apiKey},$)).slice(1),Pe=yield y._getAdditionalHeaders();return Pe["Content-Type"]="application/json",y.languageCode&&(Pe["X-Firebase-Locale"]=y.languageCode),Ci.fetch()(Mr(y,y.config.apiHost,p,re),Object.assign({method:d,headers:Pe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ai(y,d,p){return ps.apply(this,arguments)}function ps(){return(ps=(0,g.Z)(function*(y,d,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Xt),d);try{const A=new zi(y),R=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const $=yield R.json();if("needConfirmation"in $)throw Wi(y,"account-exists-with-different-credential",$);if(R.ok&&!("errorMessage"in $))return $;{const re=R.ok?$.errorMessage:$.error.message,[Pe,We]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw Wi(y,"credential-already-in-use",$);if("EMAIL_EXISTS"===Pe)throw Wi(y,"email-already-in-use",$);const ot=v[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(We)throw ve(y,ot,We);De(y,ot)}}catch(A){if(A instanceof O.ZR)throw A;De(y,"network-request-failed")}})).apply(this,arguments)}function Sr(y,d,p,v){return ki.apply(this,arguments)}function ki(){return(ki=(0,g.Z)(function*(y,d,p,v,A={}){const R=yield Lt(y,d,p,v,A);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Mr(y,d,p,v){const A=`${d}${p}?${v}`;return y.config.emulator?sn(y.config,A):`${y.config.apiScheme}://${A}`}class zi{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(_e(this.auth,"network-request-failed")),qi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wi(y,d,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const A=_e(y,d,v);return A.customData._tokenResponse=p,A}function Br(){return(Br=(0,g.Z)(function*(y,d){return Lt(y,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Yn(y,d){return Un.apply(this,arguments)}function Un(){return(Un=(0,g.Z)(function*(y,d){return Lt(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ui(y,d){return $s.apply(this,arguments)}function $s(){return($s=(0,g.Z)(function*(y,d){return Lt(y,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function dn(y){if(y)try{const d=new Date(Number(y));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function Xo(){return(Xo=(0,g.Z)(function*(y,d=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(d),A=et(v);ee(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,$=null==R?void 0:R.sign_in_provider;return{claims:A,token:v,authTime:dn(Vt(A.auth_time)),issuedAtTime:dn(Vt(A.iat)),expirationTime:dn(Vt(A.exp)),signInProvider:$||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Vt(y){return 1e3*Number(y)}function et(y){const[d,p,v]=y.split(".");if(void 0===d||void 0===p||void 0===v)return Ge("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,O.tV)(p);return A?JSON.parse(A):(Ge("Failed to decode base64 JWT payload"),null)}catch(A){return Ge("Caught error parsing JWT payload as JSON",A),null}}function ir(y,d){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,g.Z)(function*(y,d,p=!1){if(p)return d;try{return yield d}catch(v){throw v instanceof O.ZR&&kt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function kt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Hs{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(d);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var d=this;return(0,g.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&d.schedule(!0))}d.schedule()})()}}class fr{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=dn(this.lastLoginAt),this.creationTime=dn(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sr(y){return at.apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(y){var d;const p=y.auth,v=yield y.getIdToken(),A=yield ir(y,ui(p,{idToken:v}));ee(null==A?void 0:A.users.length,p,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const $=(null===(d=R.providerUserInfo)||void 0===d?void 0:d.length)?be(R.providerUserInfo):[],re=qe(y.providerData,$),ot=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==re?void 0:re.length)),it={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:re,metadata:new fr(R.createdAt,R.lastLoginAt),isAnonymous:ot};Object.assign(y,it)})).apply(this,arguments)}function Nt(){return(Nt=(0,g.Z)(function*(y){const d=(0,O.m9)(y);yield sr(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function qe(y,d){return[...y.filter(v=>!d.some(A=>A.providerId===v.providerId)),...d]}function be(y){return y.map(d=>{var{providerId:p}=d,v=(0,J._T)(d,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ut(){return(ut=(0,g.Z)(function*(y,d){const p=yield ai(y,{},(0,g.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,$=Mr(y,A,"/v1/token",`key=${R}`),re=yield y._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",Ci.fetch()($,{method:"POST",headers:re,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ot{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ee(d.idToken,"internal-error"),ee(void 0!==d.idToken,"internal-error"),ee(void 0!==d.refreshToken,"internal-error");const p="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function _t(y){const d=et(y);return ee(d,"internal-error"),ee(void 0!==d.exp,"internal-error"),ee(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var v=this;return(0,g.Z)(function*(){return ee(!v.accessToken||v.refreshToken,d,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(d,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var v=this;return(0,g.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:$}=yield function Ke(y,d){return ut.apply(this,arguments)}(d,p);v.updateTokensAndExpiration(A,R,Number($))})()}updateTokensAndExpiration(d,p,v){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(d,p){const{refreshToken:v,accessToken:A,expirationTime:R}=p,$=new Ot;return v&&(ee("string"==typeof v,"internal-error",{appName:d}),$.refreshToken=v),A&&(ee("string"==typeof A,"internal-error",{appName:d}),$.accessToken=A),R&&(ee("number"==typeof R,"internal-error",{appName:d}),$.expirationTime=R),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Ot,this.toJSON())}_performRefresh(){return q("not implemented")}}function Mt(y,d){ee("string"==typeof y||void 0===y,"internal-error",{appName:d})}class U{constructor(d){var{uid:p,auth:v,stsTokenManager:A}=d,R=(0,J._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new fr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,g.Z)(function*(){const v=yield ir(p,p.stsTokenManager.getToken(p.auth,d));return ee(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(d){return function gs(y){return Xo.apply(this,arguments)}(this,d)}reload(){return function pr(y){return Nt.apply(this,arguments)}(this)}_assign(d){this!==d&&(ee(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new U(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var v=this;return(0,g.Z)(function*(){let A=!1;d.idToken&&d.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(d),A=!0),p&&(yield sr(v)),yield v.auth._persistUserIfCurrent(v),A&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var d=this;return(0,g.Z)(function*(){const p=yield d.getIdToken();return yield ir(d,function st(y,d){return Br.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var v,A,R,$,re,Pe,We,ot;const it=null!==(v=p.displayName)&&void 0!==v?v:void 0,bn=null!==(A=p.email)&&void 0!==A?A:void 0,Bi=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,kl=null!==($=p.photoURL)&&void 0!==$?$:void 0,ld=null!==(re=p.tenantId)&&void 0!==re?re:void 0,Fl=null!==(Pe=p._redirectEventId)&&void 0!==Pe?Pe:void 0,ef=null!==(We=p.createdAt)&&void 0!==We?We:void 0,Qp=null!==(ot=p.lastLoginAt)&&void 0!==ot?ot:void 0,{uid:co,emailVerified:cd,isAnonymous:tf,providerData:nf,stsTokenManager:dd}=p;ee(co&&dd,d,"internal-error");const Jp=Ot.fromJSON(this.name,dd);ee("string"==typeof co,d,"internal-error"),Mt(it,d.name),Mt(bn,d.name),ee("boolean"==typeof cd,d,"internal-error"),ee("boolean"==typeof tf,d,"internal-error"),Mt(Bi,d.name),Mt(kl,d.name),Mt(ld,d.name),Mt(Fl,d.name),Mt(ef,d.name),Mt(Qp,d.name);const Rt=new U({uid:co,auth:d,email:bn,emailVerified:cd,displayName:it,isAnonymous:tf,photoURL:kl,phoneNumber:Bi,tenantId:ld,stsTokenManager:Jp,createdAt:ef,lastLoginAt:Qp});return nf&&Array.isArray(nf)&&(Rt.providerData=nf.map(fy=>Object.assign({},fy))),Fl&&(Rt._redirectEventId=Fl),Rt}static _fromIdTokenResponse(d,p,v=!1){return(0,g.Z)(function*(){const A=new Ot;A.updateFromServerResponse(p);const R=new U({uid:p.localId,auth:d,stsTokenManager:A,isAnonymous:v});return yield sr(R),R})()}}const H=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var A=this;return(0,g.Z)(function*(){A.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const A=v.storage[p];return void 0===A?null:A})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function le(y,d,p){return`firebase:${y}:${d}:${p}`}class Y{constructor(d,p,v){this.persistence=d,this.auth=p,this.userKey=v;const{config:A,name:R}=this.auth;this.fullUserKey=le(this.userKey,A.apiKey,R),this.fullPersistenceKey=le("persistence",A.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,g.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?U._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,g.Z)(function*(){if(p.persistence===d)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new Y(ne(H),d,v);const A=(yield Promise.all(p.map(function(){var We=(0,g.Z)(function*(ot){if(yield ot._isAvailable())return ot});return function(ot){return We.apply(this,arguments)}}()))).filter(We=>We);let R=A[0]||ne(H);const $=le(v,d.config.apiKey,d.name);let re=null;for(const We of p)try{const ot=yield We._get($);if(ot){const it=U._fromJSON(d,ot);We!==R&&(re=it),R=We;break}}catch(ot){}const Pe=A.filter(We=>We._shouldAllowMigration);return R._shouldAllowMigration&&Pe.length?(R=Pe[0],re&&(yield R._set($,re.toJSON())),yield Promise.all(p.map(function(){var We=(0,g.Z)(function*(ot){if(ot!==R)try{yield ot._remove($)}catch(it){}});return function(ot){return We.apply(this,arguments)}}())),new Y(R,d,v)):new Y(R,d,v)})()}}function Le(y){const d=y.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Ut(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(pt(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(At(d))return"Blackberry";if(an(d))return"Webos";if(zt(d))return"Safari";if((d.includes("chrome/")||gr(d))&&!d.includes("edge/"))return"Chrome";if(wn(d))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function pt(y=(0,O.z$)()){return/firefox\//i.test(y)}function zt(y=(0,O.z$)()){const d=y.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function gr(y=(0,O.z$)()){return/crios\//i.test(y)}function Ut(y=(0,O.z$)()){return/iemobile/i.test(y)}function wn(y=(0,O.z$)()){return/android/i.test(y)}function At(y=(0,O.z$)()){return/blackberry/i.test(y)}function an(y=(0,O.z$)()){return/webos/i.test(y)}function Jn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ki(y=(0,O.z$)()){return Jn(y)||wn(y)||an(y)||At(y)||/windows phone/i.test(y)||Ut(y)}function ta(y,d=[]){let p;switch(y){case"Browser":p=Le((0,O.z$)());break;case"Worker":p=`${Le((0,O.z$)())}-${y}`;break;default:p=y}const v=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${ae.SDK_VERSION}/${v}`}class li{constructor(d,p,v){this.app=d,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new St(this),this.idTokenSubscription=new St(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(d,p){var v=this;return p&&(this._popupRedirectResolver=ne(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var A,R;if(!v._deleted&&(v.persistenceManager=yield Y.create(v,d),!v._deleted)){if(null===(A=v._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch($){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,g.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p)}})()}initializeCurrentUser(d){var p=this;return(0,g.Z)(function*(){var v;let A=yield p.assertedPersistence.getCurrentUser();if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const R=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,$=null==A?void 0:A._redirectEventId,re=yield p.tryRedirectSignIn(d);(!R||R===$)&&(null==re?void 0:re.user)&&(A=re.user)}return A?A._redirectEventId?(ee(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===A._redirectEventId?p.directlySetCurrentUser(A):p.reloadAndSetCurrentUserOrClear(A)):p.reloadAndSetCurrentUserOrClear(A):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(d){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch(A){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,g.Z)(function*(){try{yield sr(d)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function ft(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var d=this;return(0,g.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,g.Z)(function*(){const v=d?(0,O.m9)(d):null;return v&&ee(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(d){var p=this;return(0,g.Z)(function*(){if(!p._deleted)return d&&ee(p.tenantId===d.tenantId,p,"tenant-id-mismatch"),p.queue((0,g.Z)(function*(){yield p.directlySetCurrentUser(d),p.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,g.Z)(function*(){return(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null)})()}setPersistence(d){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ne(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new O.LL("auth","Firebase",d())}onAuthStateChanged(d,p,v){return this.registerStateListener(this.authStateSubscription,d,p,v)}onIdTokenChanged(d,p,v){return this.registerStateListener(this.idTokenSubscription,d,p,v)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var v=this;return(0,g.Z)(function*(){const A=yield v.getOrInitRedirectPersistenceManager(p);return null===d?A.removeCurrentUser():A.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=d&&ne(d)||p._popupRedirectResolver;ee(v,p,"argument-error"),p.redirectPersistenceManager=yield Y.create(p,[ne(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,g.Z)(function*(){var v,A;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===d?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,g.Z)(function*(){if(d===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,v,A){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),$=this._isInitialized?Promise.resolve():this._initializationPromise;return ee($,this,"internal-error"),$.then(()=>R(this.currentUser)),"function"==typeof p?d.addObserver(p,v,A):d.addObserver(p)}directlySetCurrentUser(d){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==d&&(p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh()),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=ta(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":d.clientVersion};d.app.options.appId&&(v["X-Firebase-gmpid"]=d.app.options.appId);const A=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return A&&(v["X-Firebase-Client"]=A),v})()}}function Re(y){return(0,O.m9)(y)}class St{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function or(y){const d=y.indexOf(":");return d<0?"":y.substr(0,d+1)}function On(y){if(!y)return null;const d=Number(y);return isNaN(d)?null:d}class en{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return q("not implemented")}_getIdTokenResponse(d){return q("not implemented")}_linkToIdToken(d,p){return q("not implemented")}_getReauthenticationResolver(d){return q("not implemented")}}function An(y,d){return ys.apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,d){return Lt(y,"POST","/v1/accounts:resetPassword",Zt(y,d))})).apply(this,arguments)}function Ct(y,d){return To.apply(this,arguments)}function To(){return(To=(0,g.Z)(function*(y,d){return Lt(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function qs(y,d){return na.apply(this,arguments)}function na(){return(na=(0,g.Z)(function*(y,d){return Lt(y,"POST","/v1/accounts:update",Zt(y,d))})).apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(y,d){return Sr(y,"POST","/v1/accounts:signInWithPassword",Zt(y,d))})).apply(this,arguments)}function Zi(y,d){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,g.Z)(function*(y,d){return Lt(y,"POST","/v1/accounts:sendOobCode",Zt(y,d))})).apply(this,arguments)}function Ti(y,d){return tn.apply(this,arguments)}function tn(){return(tn=(0,g.Z)(function*(y,d){return Zi(y,d)})).apply(this,arguments)}function ja(y,d){return $a.apply(this,arguments)}function $a(){return($a=(0,g.Z)(function*(y,d){return Zi(y,d)})).apply(this,arguments)}function Ai(y,d){return ci.apply(this,arguments)}function ci(){return(ci=(0,g.Z)(function*(y,d){return Zi(y,d)})).apply(this,arguments)}function Ic(y,d){return vs.apply(this,arguments)}function vs(){return(vs=(0,g.Z)(function*(y,d){return Zi(y,d)})).apply(this,arguments)}function jr(){return(jr=(0,g.Z)(function*(y,d){return Sr(y,"POST","/v1/accounts:signInWithEmailLink",Zt(y,d))})).apply(this,arguments)}function Dc(){return(Dc=(0,g.Z)(function*(y,d){return Sr(y,"POST","/v1/accounts:signInWithEmailLink",Zt(y,d))})).apply(this,arguments)}class Ga extends en{constructor(d,p,v,A=null){super("password",v),this._email=d,this._password=p,this._tenantId=A}static _fromEmailAndPassword(d,p){return new Ga(d,p,"password")}static _fromEmailAndCode(d,p,v=null){return new Ga(d,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function _s(y,d){return mr.apply(this,arguments)}(d,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ha(y,d){return jr.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:De(d,"internal-error")}})()}_linkToIdToken(d,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return Ct(d,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function vh(y,d){return Dc.apply(this,arguments)}(d,{idToken:p,email:v._email,oobCode:v._password});default:De(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Pn(y,d){return bc.apply(this,arguments)}function bc(){return(bc=(0,g.Z)(function*(y,d){return Sr(y,"POST","/v1/accounts:signInWithIdp",Zt(y,d))})).apply(this,arguments)}class Qi extends en{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new Qi(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):De("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:A}=p,R=(0,J._T)(p,["providerId","signInMethod"]);if(!v||!A)return null;const $=new Qi(v,A);return $.idToken=R.idToken||void 0,$.accessToken=R.accessToken||void 0,$.secret=R.secret,$.nonce=R.nonce,$.pendingToken=R.pendingToken||null,$}_getIdTokenResponse(d){return Pn(d,this.buildRequest())}_linkToIdToken(d,p){const v=this.buildRequest();return v.idToken=p,Pn(d,v)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Pn(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,O.xO)(p)}return d}}function wp(y,d){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,g.Z)(function*(y,d){return Lt(y,"POST","/v1/accounts:sendVerificationCode",Zt(y,d))})).apply(this,arguments)}function Es(){return(Es=(0,g.Z)(function*(y,d){return Sr(y,"POST","/v1/accounts:signInWithPhoneNumber",Zt(y,d))})).apply(this,arguments)}function Tc(){return(Tc=(0,g.Z)(function*(y,d){const p=yield Sr(y,"POST","/v1/accounts:signInWithPhoneNumber",Zt(y,d));if(p.temporaryProof)throw Wi(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Dp={USER_NOT_FOUND:"user-not-found"};function Ac(){return(Ac=(0,g.Z)(function*(y,d){return Sr(y,"POST","/v1/accounts:signInWithPhoneNumber",Zt(y,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Dp)})).apply(this,arguments)}class Ao extends en{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new Ao({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new Ao({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function Wu(y,d){return Es.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function Ip(y,d){return Tc.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function bp(y,d){return Ac.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:v,verificationCode:A}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:v,code:A}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:v,phoneNumber:A,temporaryProof:R}=d;return v||p||A||R?new Ao({verificationId:p,verificationCode:v,phoneNumber:A,temporaryProof:R}):null}}class zs{constructor(d){var p,v,A,R,$,re;const Pe=(0,O.zd)((0,O.pd)(d)),We=null!==(p=Pe.apiKey)&&void 0!==p?p:null,ot=null!==(v=Pe.oobCode)&&void 0!==v?v:null,it=function Ym(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Pe.mode)&&void 0!==A?A:null);ee(We&&ot&&it,"argument-error"),this.apiKey=We,this.operation=it,this.code=ot,this.continueUrl=null!==(R=Pe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==($=Pe.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(re=Pe.tenantId)&&void 0!==re?re:null}static parseLink(d){const p=function qa(y){const d=(0,O.zd)((0,O.pd)(y)).link,p=d?(0,O.zd)((0,O.pd)(d)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||d||y}(d);try{return new zs(p)}catch(v){return null}}}let Ku=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return Ga._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const A=zs.parseLink(v);return ee(A,"argument-error"),Ga._fromEmailAndCode(p,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ws{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class $r extends ws{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class So extends $r{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return ee("providerId"in p&&"signInMethod"in p,"argument-error"),Qi._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ee(d.idToken||d.accessToken,"argument-error"),Qi._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return So.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return So.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:A,pendingToken:R,nonce:$,providerId:re}=d;if(!v&&!A&&!p&&!R||!re)return null;try{return new So(re)._credential({idToken:p,accessToken:v,nonce:$,pendingToken:R})}catch(Pe){return null}}}let Ws=(()=>{class y extends $r{constructor(){super("facebook.com")}static credential(p){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ra=(()=>{class y extends $r{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:A}=p;if(!v&&!A)return null;try{return y.credential(v,A)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Sc=(()=>{class y extends $r{constructor(){super("github.com")}static credential(p){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Mo extends en{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return Pn(d,this.buildRequest())}_linkToIdToken(d,p){const v=this.buildRequest();return v.idToken=p,Pn(d,v)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Pn(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:A,pendingToken:R}=p;return v&&A&&R&&v===A?new Mo(v,R):null}static _create(d,p){return new Mo(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class di extends ws{constructor(d){ee(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return di.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return di.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=Mo.fromJSON(d);return ee(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:v}=d;if(!p||!v)return null;try{return Mo._create(v,p)}catch(A){return null}}}let za=(()=>{class y extends $r{constructor(){super("twitter.com")}static credential(p,v){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=p;if(!v||!A)return null;try{return y.credential(v,A)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Wa(y,d){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*(y,d){return Sr(y,"POST","/v1/accounts:signUp",Zt(y,d))})).apply(this,arguments)}class ar{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,v,A=!1){return(0,g.Z)(function*(){const R=yield U._fromIdTokenResponse(d,v,A),$=wh(v);return new ar({user:R,providerId:$,_tokenResponse:v,operationType:p})})()}static _forOperation(d,p,v){return(0,g.Z)(function*(){yield d._updateTokensIfNecessary(v,!0);const A=wh(v);return new ar({user:d,providerId:A,_tokenResponse:v,operationType:p})})()}}function wh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Mc(){return(Mc=(0,g.Z)(function*(y){var d;const p=Re(y);if(yield p._initializationPromise,null===(d=p.currentUser)||void 0===d?void 0:d.isAnonymous)return new ar({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield Wa(p,{returnSecureToken:!0}),A=yield ar._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Za extends O.ZR{constructor(d,p,v,A){var R;super(p.code,p.message),this.operationType=v,this.user=A,Object.setPrototypeOf(this,Za.prototype),this.customData={appName:d.name,tenantId:null!==(R=d.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(d,p,v,A){return new Za(d,p,v,A)}}function Ya(y,d,p,v){return("reauthenticate"===d?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Za._fromErrorAndOperation(y,R,d,v):R})}function Ji(y){return new Set(y.map(({providerId:d})=>d).filter(d=>!!d))}function Zu(){return(Zu=(0,g.Z)(function*(y,d){const p=(0,O.m9)(y);yield Ds(!0,p,d);const{providerUserInfo:v}=yield Yn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),A=Ji(v||[]);return p.providerData=p.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function cn(y,d){return xo.apply(this,arguments)}function xo(){return(xo=(0,g.Z)(function*(y,d,p=!1){const v=yield ir(y,d._linkToIdToken(y.auth,yield y.getIdToken()),p);return ar._forOperation(y,"link",v)})).apply(this,arguments)}function Ds(y,d,p){return nn.apply(this,arguments)}function nn(){return(nn=(0,g.Z)(function*(y,d,p){yield sr(d);const A=!1===y?"provider-already-linked":"no-such-provider";ee(Ji(d.providerData).has(p)===y,d.auth,A)})).apply(this,arguments)}function xc(y,d){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,g.Z)(function*(y,d,p=!1){const{auth:v}=y,A="reauthenticate";try{const R=yield ir(y,Ya(v,A,d,y),p);ee(R.idToken,v,"internal-error");const $=et(R.idToken);ee($,v,"internal-error");const{sub:re}=$;return ee(y.uid===re,v,"user-mismatch"),ar._forOperation(y,A,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(v,"user-mismatch"),R}})).apply(this,arguments)}function Zs(y,d){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(y,d,p=!1){const v="signIn",A=yield Ya(y,v,d),R=yield ar._fromIdTokenResponse(y,v,A);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Sn(y,d){return sa.apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(y,d){return Zs(Re(y),d)})).apply(this,arguments)}function Si(y,d){return _r.apply(this,arguments)}function _r(){return(_r=(0,g.Z)(function*(y,d){const p=(0,O.m9)(y);return yield Ds(!1,p,d.providerId),cn(p,d)})).apply(this,arguments)}function bs(y,d){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,g.Z)(function*(y,d){return xc((0,O.m9)(y),d)})).apply(this,arguments)}function Qa(y,d){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,g.Z)(function*(y,d){return Sr(y,"POST","/v1/accounts:signInWithCustomToken",Zt(y,d))})).apply(this,arguments)}function Ts(){return(Ts=(0,g.Z)(function*(y,d){const p=Re(y),v=yield Qa(p,{token:d,returnSecureToken:!0}),A=yield ar._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class lt{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?Ja._fromServerResponse(d,p):De(d,"internal-error")}}class Ja extends lt{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new Ja(p)}}function oa(y,d,p){var v;ee((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ee(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ee(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(ee(p.android.packageName.length>0,y,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function eu(){return(eu=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:d};p&&oa(v,A,p),yield ja(v,A)})).apply(this,arguments)}function Yu(){return(Yu=(0,g.Z)(function*(y,d,p){yield An((0,O.m9)(y),{oobCode:d,newPassword:p})})).apply(this,arguments)}function we(){return(we=(0,g.Z)(function*(y,d){yield qs((0,O.m9)(y),{oobCode:d})})).apply(this,arguments)}function xt(y,d){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,g.Z)(function*(y,d){const p=(0,O.m9)(y),v=yield An(p,{oobCode:d}),A=v.requestType;switch(ee(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(v.mfaInfo,p,"internal-error");default:ee(v.email,p,"internal-error")}let R=null;return v.mfaInfo&&(R=lt._fromServerResponse(Re(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Ro(){return(Ro=(0,g.Z)(function*(y,d){const{data:p}=yield xt((0,O.m9)(y),d);return p.email})).apply(this,arguments)}function qr(){return(qr=(0,g.Z)(function*(y,d,p){const v=Re(y),A=yield Wa(v,{returnSecureToken:!0,email:d,password:p}),R=yield ar._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Rc(){return(Rc=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:d};ee(p.handleCodeInApp,v,"argument-error"),p&&oa(v,A,p),yield Ai(v,A)})).apply(this,arguments)}function As(){return(As=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y),A=Ku.credentialWithLink(d,p||wt());return ee(A._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Sn(v,A)})).apply(this,arguments)}function ur(y,d){return hi.apply(this,arguments)}function hi(){return(hi=(0,g.Z)(function*(y,d){return Lt(y,"POST","/v1/accounts:createAuthUri",Zt(y,d))})).apply(this,arguments)}function Ss(){return(Ss=(0,g.Z)(function*(y,d){const v={identifier:d,continueUri:Kt()?wt():"http://localhost"},{signinMethods:A}=yield ur((0,O.m9)(y),v);return A||[]})).apply(this,arguments)}function nl(){return(nl=(0,g.Z)(function*(y,d){const p=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};d&&oa(p.auth,A,d);const{email:R}=yield Ti(p.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function su(){return(su=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:d};p&&oa(v.auth,R,p);const{email:$}=yield Ic(v.auth,R);$!==y.email&&(yield y.reload())})).apply(this,arguments)}function rl(y,d){return aa.apply(this,arguments)}function aa(){return(aa=(0,g.Z)(function*(y,d){return Lt(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function il(){return(il=(0,g.Z)(function*(y,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},$=yield ir(v,rl(v.auth,R));v.displayName=$.displayName||null,v.photoURL=$.photoUrl||null;const re=v.providerData.find(({providerId:Pe})=>"password"===Pe);re&&(re.displayName=v.displayName,re.photoURL=v.photoURL),yield v._updateTokensIfNecessary($)})).apply(this,arguments)}function ol(y,d,p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,g.Z)(function*(y,d,p){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};d&&(R.email=d),p&&(R.password=p);const $=yield ir(y,Ct(v,R));yield y._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class Qs{constructor(d,p,v={}){this.isNewUser=d,this.providerId=p,this.profile=v}}class Pc extends Qs{constructor(d,p,v,A){super(d,p,v),this.username=A}}class kc extends Qs{constructor(d,p){super(d,"facebook.com",p)}}class Js extends Pc{constructor(d,p){super(d,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Ms extends Qs{constructor(d,p){super(d,"google.com",p)}}class al extends Pc{constructor(d,p,v){super(d,"twitter.com",p,v)}}function vr(y){const{user:d,_tokenResponse:p}=y;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Oc(y){var d,p;if(!y)return null;const{providerId:v}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const $=null===(p=null===(d=et(y.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if($)return new Qs(R,"anonymous"!==$&&"custom"!==$?$:null)}if(!v)return null;switch(v){case"facebook.com":return new kc(R,A);case"github.com":return new Js(R,A);case"google.com":return new Ms(R,A);case"twitter.com":return new al(R,A,y.screenName||null);case"custom":case"anonymous":return new Qs(R,null);default:return new Qs(R,v,A)}}(p)}class es{constructor(d,p){this.type=d,this.credential=p}static _fromIdtoken(d){return new es("enroll",d)}static _fromMfaPendingCredential(d){return new es("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,v;if(null==d?void 0:d.multiFactorSession){if(null===(p=d.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return es._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(v=d.multiFactorSession)||void 0===v?void 0:v.idToken)return es._fromIdtoken(d.multiFactorSession.idToken)}return null}}class la{constructor(d,p,v){this.session=d,this.hints=p,this.signInResolver=v}static _fromError(d,p){const v=Re(d),A=p.customData._serverResponse,R=(A.mfaInfo||[]).map(re=>lt._fromServerResponse(v,re));ee(A.mfaPendingCredential,v,"internal-error");const $=es._fromMfaPendingCredential(A.mfaPendingCredential);return new la($,R,function(){var re=(0,g.Z)(function*(Pe){const We=yield Pe._process(v,$);delete A.mfaInfo,delete A.mfaPendingCredential;const ot=Object.assign(Object.assign({},A),{idToken:We.idToken,refreshToken:We.refreshToken});switch(p.operationType){case"signIn":const it=yield ar._fromIdTokenResponse(v,p.operationType,ot);return yield v._updateCurrentUser(it.user),it;case"reauthenticate":return ee(p.user,v,"internal-error"),ar._forOperation(p.user,p.operationType,ot);default:De(v,"internal-error")}});return function(Pe){return re.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,g.Z)(function*(){return p.signInResolver(d)})()}}function kn(y,d){return Lt(y,"POST","/v2/accounts/mfaEnrollment:start",Zt(y,d))}class ts{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>lt._fromServerResponse(d.auth,v)))})}static _fromUser(d){return new ts(d)}getSession(){var d=this;return(0,g.Z)(function*(){return es._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,p){var v=this;return(0,g.Z)(function*(){const A=d,R=yield v.getSession(),$=yield ir(v.user,A._process(v.user.auth,R,p));return yield v.user._updateTokensIfNecessary($),v.user.reload()})()}unenroll(d){var p=this;return(0,g.Z)(function*(){const v="string"==typeof d?d:d.uid,A=yield p.user.getIdToken(),R=yield ir(p.user,function Tp(y,d){return Lt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(y,d))}(p.user.auth,{idToken:A,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:$})=>$!==v),yield p.user._updateTokensIfNecessary(R);try{yield p.user.reload()}catch($){if("auth/user-token-expired"!==$.code)throw $}})()}}const Oo=new WeakMap,cl="__sak";class Xs{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(cl,"1"),this.storage.removeItem(cl),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const pn=(()=>{class y extends Xs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Vc(){const y=(0,O.z$)();return zt(y)||Jn(y)}()&&function Bn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ki(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),R=this.localCache[v];A!==R&&p(v,R,A)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((re,Pe,We)=>{this.notifyListeners(re,We)});const A=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(A);if(p.newValue!==re)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!v)return}const R=()=>{const re=this.storage.getItem(A);!v&&this.localCache[A]===re||this.notifyListeners(A,re)},$=this.storage.getItem(A);!function ea(){return(0,O.w1)()&&10===document.documentMode}()||$===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,v){this.localCache[p]=v;const A=this.listeners[p];if(A)for(const R of Array.from(A))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var A=()=>super._set,R=this;return(0,g.Z)(function*(){yield A().call(R,p,v),R.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,A=this;return(0,g.Z)(function*(){const R=yield v().call(A,p);return A.localCache[p]=JSON.stringify(R),R})()}_remove(p){var v=()=>super._remove,A=this;return(0,g.Z)(function*(){yield v().call(A,p),delete A.localCache[p]})()}}return y.type="LOCAL",y})(),ns=(()=>{class y extends Xs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let ca=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(R=>R.isListeningto(p));if(v)return v;const A=new y(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const A=p,{eventId:R,eventType:$,data:re}=A.data,Pe=v.handlersMap[$];if(!(null==Pe?void 0:Pe.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:$});const We=Array.from(Pe).map(function(){var it=(0,g.Z)(function*(bn){return bn(A.origin,re)});return function(bn){return it.apply(this,arguments)}}()),ot=yield function hl(y){return Promise.all(y.map(function(){var d=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return d.apply(this,arguments)}}()))}(We);A.ports[0].postMessage({status:"done",eventId:R,eventType:$,response:ot})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function eo(y="",d=10){let p="";for(let v=0;v<d;v++)p+=Math.floor(10*Math.random());return y+p}class Uc{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,v=50){var A=this;return(0,g.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let $,re;return new Promise((Pe,We)=>{const ot=eo("",20);R.port1.start();const it=setTimeout(()=>{We(new Error("unsupported_event"))},v);re={messageChannel:R,onMessage(bn){const Bi=bn;if(Bi.data.eventId===ot)switch(Bi.data.status){case"ack":clearTimeout(it),$=setTimeout(()=>{We(new Error("timeout"))},3e3);break;case"done":clearTimeout($),Pe(Bi.data.response);break;default:clearTimeout(it),clearTimeout($),We(new Error("invalid_response"))}}},A.handlers.add(re),R.port1.addEventListener("message",re.onMessage),A.target.postMessage({eventType:d,eventId:ot,data:p},[R.port2])}).finally(()=>{re&&A.removeMessageHandler(re)})})()}}function Qt(){return window}function gn(){return void 0!==Qt().WorkerGlobalScope&&"function"==typeof Qt().importScripts}function Rs(){return(Rs=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const au="firebaseLocalStorageDb",to="firebaseLocalStorage",fi="fbase_key";class jn{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ko(y,d){return y.transaction([to],d?"readwrite":"readonly").objectStore(to)}function no(){const y=indexedDB.open(au,1);return new Promise((d,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(to,{keyPath:fi})}catch(A){p(A)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(to)?d(v):(v.close(),yield function zr(){const y=indexedDB.deleteDatabase(au);return new jn(y).toPromise()}(),d(yield no()))}))})}function pl(y,d,p){return ro.apply(this,arguments)}function ro(){return(ro=(0,g.Z)(function*(y,d,p){const v=ko(y,!0).put({[fi]:d,value:p});return new jn(v).toPromise()})).apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(y,d){const p=ko(y,!1).get(d),v=yield new jn(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Ns(y,d){const p=ko(y,!0).delete(d);return new jn(p).toPromise()}const rs=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield no()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let A=0;for(;;)try{const R=yield v._openDb();return yield p(R)}catch(R){if(A++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return gn()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=ca._getInstance(function fl(){return gn()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(A,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(A,R){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,A;if(p.activeServiceWorker=yield function Tt(){return Rs.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Uc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Sp(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield no();return yield pl(p,cl,"1"),yield Ns(p,cl),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var A=this;return(0,g.Z)(function*(){return A._withPendingWrite((0,g.Z)(function*(){return yield A._withRetries(R=>pl(R,p,v)),A.localCache[p]=v,A.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const A=yield v._withRetries(R=>function Fo(y,d){return pi.apply(this,arguments)}(R,p));return v.localCache[p]=A,A})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(A=>Ns(A,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries($=>{const re=ko($,!1).getAll();return new jn(re).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:$,value:re}of v)R.add($),JSON.stringify(p.localCache[$])!==JSON.stringify(re)&&(p.notifyListeners($,re),A.push($));for(const $ of Object.keys(p.localCache))p.localCache[$]&&!R.has($)&&(p.notifyListeners($,null),A.push($));return A})()}notifyListeners(p,v){this.localCache[p]=v;const A=this.listeners[p];if(A)for(const R of Array.from(A))R(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Bc(y,d){return Lt(y,"POST","/v2/accounts/mfaSignIn:start",Zt(y,d))}function xi(){return(xi=(0,g.Z)(function*(y){return(yield Lt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function so(y){return new Promise((d,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=d,v.onerror=A=>{const R=_e("internal-error");R.customData=A,p(R)},v.type="text/javascript",v.charset="UTF-8",function yl(){var y,d;return null!==(d=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==d?d:document}().appendChild(v)})}function ha(y){return`__${y}${Math.floor(1e6*Math.random())}`}const gi=1e12;class jc{constructor(d){this.auth=d,this.counter=gi,this._widgets=new Map}render(d,p){const v=this.counter;return this._widgets.set(v,new uu(d,this.auth.name,p||{})),this.counter++,v}reset(d){var p;const v=d||gi;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(d){var p;return(null===(p=this._widgets.get(d||gi))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(d||gi))||void 0===v||v.execute(),""})()}}class uu{constructor(d,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof d?document.getElementById(d):d;ee(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function oo(y){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)d.push(p.charAt(Math.floor(Math.random()*p.length)));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lu=ha("rcb"),Ch=new rn(3e4,6e4);class $c{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Qt().grecaptcha}load(d,p=""){return ee(function Mp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),d,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Qt().grecaptcha):new Promise((v,A)=>{const R=Qt().setTimeout(()=>{A(_e(d,"network-request-failed"))},Ch.get());Qt()[lu]=()=>{Qt().clearTimeout(R),delete Qt()[lu];const re=Qt().grecaptcha;if(!re)return void A(_e(d,"internal-error"));const Pe=re.render;re.render=(We,ot)=>{const it=Pe(We,ot);return this.counter++,it},this.hostLanguage=p,v(re)},so(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:lu,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),A(_e(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!Qt().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hc{load(d){return(0,g.Z)(function*(){return new jc(d)})()}clearedOneInstance(){}}const _l="recaptcha",Gc={theme:"light",type:"image"};class Th{constructor(d,p=Object.assign({},Gc),v){this.parameters=p,this.type=_l,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Re(v),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof d?document.getElementById(d):d;ee(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hc:new $c,this.validateStartingState()}verify(){var d=this;return(0,g.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),v=d.getAssertedRecaptcha();return v.getResponse(p)||new Promise(R=>{const $=re=>{!re||(d.tokenChangeListeners.delete($),R(re))};d.tokenChangeListeners.add($),d.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof d)d(p);else if("string"==typeof d){const v=Qt()[d];"function"==typeof v&&v(p)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,g.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,g.Z)(function*(){ee(Kt()&&!gn(),d.auth,"internal-error"),yield function qc(){let y=null;return new Promise(d=>{"complete"!==document.readyState?(y=()=>d(),window.addEventListener("load",y)):d()}).catch(d=>{throw y&&window.removeEventListener("load",y),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function ml(y){return xi.apply(this,arguments)}(d.auth);ee(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vi{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=Ao._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function yn(){return(yn=(0,g.Z)(function*(y,d,p){const v=Re(y),A=yield Rr(v,d,(0,O.m9)(p));return new Vi(A,R=>Sn(v,R))})).apply(this,arguments)}function Wr(){return(Wr=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y);yield Ds(!1,v,"phone");const A=yield Rr(v.auth,d,(0,O.m9)(p));return new Vi(A,R=>Si(v,R))})).apply(this,arguments)}function du(){return(du=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y),A=yield Rr(v.auth,d,(0,O.m9)(p));return new Vi(A,R=>bs(v,R))})).apply(this,arguments)}function Rr(y,d,p){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,g.Z)(function*(y,d,p){var v;const A=yield p.verify();try{let R;if(ee("string"==typeof A,y,"argument-error"),ee(p.type===_l,y,"argument-error"),R="string"==typeof d?{phoneNumber:d}:d,"session"in R){const $=R.session;if("phoneNumber"in R)return ee("enroll"===$.type,y,"internal-error"),(yield kn(y,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ee("signin"===$.type,y,"internal-error");const re=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return ee(re,y,"missing-multi-factor-info"),(yield Bc(y,{mfaPendingCredential:$.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield wp(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return $}}finally{p._reset()}})).apply(this,arguments)}function Os(){return(Os=(0,g.Z)(function*(y,d){yield cn((0,O.m9)(y),d)})).apply(this,arguments)}let Kr=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Re(p)}verifyPhoneNumber(p,v){return Rr(this.auth,p,(0,O.m9)(v))}static credential(p,v){return Ao._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:A}=p;return v&&A?Ao._fromTokenResponse(v,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Zr(y,d){return d?ne(d):(ee(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class fa extends en{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Pn(d,this._buildIdpRequest())}_linkToIdToken(d,p){return Pn(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return Pn(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function pa(y){return Zs(y.auth,new fa(y),y.bypassAuthState)}function zc(y){const{auth:d,user:p}=y;return ee(p,d,"internal-error"),xc(p,new fa(y),y.bypassAuthState)}function Sh(y){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,g.Z)(function*(y){const{auth:d,user:p}=y;return ee(p,d,"internal-error"),cn(p,new fa(y),y.bypassAuthState)})).apply(this,arguments)}class mi{constructor(d,p,v,A,R=!1){this.auth=d,this.resolver=v,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,g.Z)(function*(v,A){d.pendingPromise={resolve:v,reject:A};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(R){d.reject(R)}});return function(v,A){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:A,postBody:R,tenantId:$,error:re,type:Pe}=d;if(re)return void p.reject(re);const We={auth:p.auth,requestUri:v,sessionId:A,tenantId:$||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Pe)(We))}catch(ot){p.reject(ot)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return pa;case"linkViaPopup":case"linkViaRedirect":return Sh;case"reauthViaPopup":case"reauthViaRedirect":return zc;default:De(this.auth,"internal-error")}}resolve(d){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Mh=new rn(2e3,1e4);function xh(){return(xh=(0,g.Z)(function*(y,d,p){const v=Re(y);je(y,d,ws);const A=Zr(v,p);return new os(v,"signInViaPopup",d,A).executeNotNull()})).apply(this,arguments)}function ma(){return(ma=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y);je(v.auth,d,ws);const A=Zr(v.auth,p);return new os(v.auth,"reauthViaPopup",d,A,v).executeNotNull()})).apply(this,arguments)}function El(){return(El=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y);je(v.auth,d,ws);const A=Zr(v.auth,p);return new os(v.auth,"linkViaPopup",d,A,v).executeNotNull()})).apply(this,arguments)}let os=(()=>{class y extends mi{constructor(p,v,A,R,$){super(p,v,R,$),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return ee(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){te(1===p.filter.length,"Popup operations only handle one event");const v=eo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,A;this.pollId=(null===(A=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Mh.get())};p()}}return y.currentPopupAction=null,y})();const Er=new Map;class ya extends mi{constructor(d,p,v=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=Er.get(p.auth._key());if(!v){try{const R=(yield function Lo(y,d){return wl.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;v=()=>Promise.resolve(R)}catch(A){v=()=>Promise.reject(A)}Er.set(p.auth._key(),v)}return p.bypassAuthState||Er.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(v,d);if("unknown"!==d.type){if(d.eventId){const A=yield v.auth._redirectUserForId(d.eventId);if(A)return v.user=A,p().call(v,d);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function wl(){return(wl=(0,g.Z)(function*(y,d){const p=b(d),v=D(y);if(!(yield v._isAvailable()))return!1;const A="true"===(yield v._get(p));return yield v._remove(p),A})).apply(this,arguments)}function as(y,d){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,g.Z)(function*(y,d){return D(y)._set(b(d),"true")})).apply(this,arguments)}function D(y){return ne(y._redirectPersistence)}function b(y){return le("pendingRedirect",y.config.apiKey,y.name)}function z(){return(z=(0,g.Z)(function*(y,d,p){const v=Re(y);je(y,d,ws);const A=Zr(v,p);return yield as(A,v),A._openRedirect(v,d,"signInViaRedirect")})).apply(this,arguments)}function ze(){return(ze=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y);je(v.auth,d,ws);const A=Zr(v.auth,p);yield as(A,v.auth);const R=yield Vo(v);return A._openRedirect(v.auth,d,"reauthViaRedirect",R)})).apply(this,arguments)}function Bt(){return(Bt=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y);je(v.auth,d,ws);const A=Zr(v.auth,p);yield Ds(!1,v,d.providerId),yield as(A,v.auth);const R=yield Vo(v);return A._openRedirect(v.auth,d,"linkViaRedirect",R)})).apply(this,arguments)}function xn(){return(xn=(0,g.Z)(function*(y,d){return yield Re(y)._initializationPromise,_n(y,d,!1)})).apply(this,arguments)}function _n(y,d){return _a.apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(y,d,p=!1){const v=Re(y),A=Zr(v,d),$=yield new ya(v,A,p).execute();return $&&!p&&(delete $.user._redirectEventId,yield v._persistUserIfCurrent($.user),yield v._setRedirectUser(null,d)),$})).apply(this,arguments)}function Vo(y){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,g.Z)(function*(y){const d=eo(`${y.uid}:::`);return y._redirectEventId=d,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),d})).apply(this,arguments)}class Yr{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(d,v)&&(p=!0,this.sendToConsumer(d,v),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Kc(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xp(y);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var v;if(d.error&&!xp(d)){const A=(null===(v=d.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,A))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const v=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&v}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ni(d))}saveEventToCache(d){this.cachedEventUids.add(Ni(d)),this.lastProcessedEventTime=Date.now()}}function Ni(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(d=>d).join("-")}function xp({type:y,error:d}){return"unknown"===y&&"auth/no-auth-event"===(null==d?void 0:d.code)}function Dl(y){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,g.Z)(function*(y,d={}){return Lt(y,"GET","/v1/projects",d)})).apply(this,arguments)}const Nh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zc=/^https?/;function ks(){return(ks=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:d}=yield Dl(y);for(const p of d)try{if(bl(p))return}catch(v){}De(y,"unauthorized-domain")})).apply(this,arguments)}function bl(y){const d=wt(),{protocol:p,hostname:v}=new URL(d);if(y.startsWith("chrome-extension://")){const $=new URL(y);return""===$.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&$.hostname===v}if(!Zc.test(p))return!1;if(Nh.test(y))return v===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(v)}const Np=new rn(3e4,6e4);function Op(){const y=Qt().___jsl;if(null==y?void 0:y.H)for(const d of Object.keys(y.H))if(y.H[d].r=y.H[d].r||[],y.H[d].L=y.H[d].L||[],y.H[d].r=[...y.H[d].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let fu=null;function Jm(y){return fu=fu||function Oh(y){return new Promise((d,p)=>{var v,A,R;function $(){Op(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Op(),p(_e(y,"network-request-failed"))},timeout:Np.get()})}if(null===(A=null===(v=Qt().gapi)||void 0===v?void 0:v.iframes)||void 0===A?void 0:A.Iframe)d(gapi.iframes.getContext());else{if(!(null===(R=Qt().gapi)||void 0===R?void 0:R.load)){const re=ha("iframefcb");return Qt()[re]=()=>{gapi.load?$():p(_e(y,"network-request-failed"))},so(`https://apis.google.com/js/api.js?onload=${re}`).catch(Pe=>p(Pe))}$()}}).catch(d=>{throw fu=null,d})}(y),fu}const Ph=new rn(5e3,15e3),Bo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function va(y){const d=y.config;ee(d.authDomain,y,"auth-domain-config-required");const p=d.emulator?sn(d,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:d.apiKey,appName:y.name,v:ae.SDK_VERSION},A=Cl.get(y.config.apiHost);A&&(v.eid=A);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function Pp(){return Pp=(0,g.Z)(function*(y){const d=yield Jm(y),p=Qt().gapi;return ee(p,y,"internal-error"),d.open({where:document.body,url:va(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Bo,dontclear:!0},v=>new Promise(function(){var A=(0,g.Z)(function*(R,$){yield v.restyle({setHideOnLeave:!1});const re=_e(y,"network-request-failed"),Pe=Qt().setTimeout(()=>{$(re)},Ph.get());function We(){Qt().clearTimeout(Pe),R(v)}v.ping(We).then(We,()=>{$(re)})});return function(R,$){return A.apply(this,arguments)}}()))}),Pp.apply(this,arguments)}const JI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Yc{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function Vh(y,d,p,v,A,R){ee(y.config.authDomain,y,"auth-domain-config-required"),ee(y.config.apiKey,y,"invalid-api-key");const $={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:ae.SDK_VERSION,eventId:A};if(d instanceof ws){d.setDefaultLanguage(y.languageCode),$.providerId=d.providerId||"",(0,O.xb)(d.getCustomParameters())||($.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Pe,We]of Object.entries(R||{}))$[Pe]=We}if(d instanceof $r){const Pe=d.getScopes().filter(We=>""!==We);Pe.length>0&&($.scopes=Pe.join(","))}y.tenantId&&($.tid=y.tenantId);const re=$;for(const Pe of Object.keys(re))void 0===re[Pe]&&delete re[Pe];return`${function o0({config:y}){return y.emulator?sn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(re).slice(1)}`}const us="webStorageSupport";class Bh extends class a0{constructor(d){this.factorId=d}_process(d,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,v);case"signin":return this._finalizeSignIn(d,p.credential);default:return q("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Bh(d)}_finalizeEnroll(d,p,v){return function Fc(y,d){return Lt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(y,d))}(d,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function da(y,d){return Lt(y,"POST","/v2/accounts/mfaSignIn:finalize",Zt(y,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ry=(()=>{class y{constructor(){}static assertion(p){return Bh._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var iy="@firebase/auth",Lp="0.19.11";class Vp{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(v=>{var A;d((null===(A=v)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);!p||(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ea(){return window}function pu(){return(pu=(0,g.Z)(function*(y,d,p){var v;const{BuildInfo:A}=Ea();te(d.sessionId,"AuthEvent did not contain a session ID");const R=yield u0(d.sessionId),$={};return Jn()?$.ibi=A.packageName:wn()?$.apn=A.packageName:De(y,"operation-not-supported-in-this-environment"),A.displayName&&($.appDisplayName=A.displayName),$.sessionId=R,Vh(y,p,d.type,void 0,null!==(v=d.eventId)&&void 0!==v?v:void 0,$)})).apply(this,arguments)}function Ui(){return(Ui=(0,g.Z)(function*(y){const{BuildInfo:d}=Ea(),p={};Jn()?p.iosBundleId=d.packageName:wn()?p.androidPackageName=d.packageName:De(y,"operation-not-supported-in-this-environment"),yield Dl(y,p)})).apply(this,arguments)}function mu(){return(mu=(0,g.Z)(function*(y,d,p){const{cordova:v}=Ea();let A=()=>{};try{yield new Promise((R,$)=>{let re=null;function Pe(){var it;R();const bn=null===(it=v.plugins.browsertab)||void 0===it?void 0:it.close;"function"==typeof bn&&bn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function We(){re||(re=window.setTimeout(()=>{$(_e(y,"redirect-cancelled-by-user"))},2e3))}function ot(){"visible"===(null==document?void 0:document.visibilityState)&&We()}d.addPassiveListener(Pe),document.addEventListener("resume",We,!1),wn()&&document.addEventListener("visibilitychange",ot,!1),A=()=>{d.removePassiveListener(Pe),document.removeEventListener("resume",We,!1),document.removeEventListener("visibilitychange",ot,!1),re&&window.clearTimeout(re)}})}finally{A()}})).apply(this,arguments)}function u0(y){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,g.Z)(function*(y){const d=l0(y),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function l0(y){if(te(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const d=new ArrayBuffer(y.length),p=new Uint8Array(d);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function sy(y){(0,ae._registerComponent)(new se.wA("auth",(d,{options:p})=>{const v=d.getProvider("app").getImmediate(),A=d.getProvider("heartbeat"),{apiKey:R,authDomain:$}=v.options;return((re,Pe)=>{ee(R&&!R.includes(":"),"invalid-api-key",{appName:re.name}),ee(!(null==$?void 0:$.includes(":")),"argument-error",{appName:re.name});const We={apiKey:R,authDomain:$,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ta(y)},ot=new li(re,Pe,We);return function oe(y,d){const p=(null==d?void 0:d.persistence)||[],v=(Array.isArray(p)?p:[p]).map(ne);(null==d?void 0:d.errorMap)&&y._updateErrorMap(d.errorMap),y._initializeWithPersistence(v,null==d?void 0:d.popupRedirectResolver)}(ot,p),ot})(v,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,v)=>{d.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new se.wA("auth-internal",d=>{const p=Re(d.getProvider("auth").getImmediate());return new Vp(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(iy,Lp,function jh(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(iy,Lp,"esm2017")}("Browser");class Al extends Yr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,g.Z)(function*(){yield d.initPromise})()}}function ay(y){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,g.Z)(function*(y){const d=yield Jc()._get(qh(y));return d&&(yield Jc()._remove(qh(y))),d})).apply(this,arguments)}function uy(){const y=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*d.length);y.push(d.charAt(v))}return y.join("")}function Jc(){return ne(pn)}function qh(y){return le("authEvent",y.config.apiKey,y.name)}function ed(y){if(!(null==y?void 0:y.includes("?")))return{};const[d,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function Wh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function nd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function cy(y=(0,O.z$)()){return!("file:"!==nd()&&"ionic:"!==nd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qr(){try{const y=self.localStorage,d=eo();if(y)return y.setItem(d,"1"),y.removeItem(d),!function xl(y=(0,O.z$)()){return function XI(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function d0(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return rd()&&(0,O.hl)()}return!1}function rd(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kh(){return(function Kp(){return"http:"===nd()||"https:"===nd()}()||(0,O.ru)()||cy())&&!function c0(){return(0,O.b$)()||(0,O.UG)()}()&&Qr()&&!rd()}function Zp(){return cy()&&"undefined"!=typeof document}function jo(){return(jo=(0,g.Z)(function*(){return!!Zp()&&new Promise(y=>{const d=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),y(!0)})})})).apply(this,arguments)}const Gn={LOCAL:"local",NONE:"none",SESSION:"session"},Jr=ee,Ia="persistence";function id(y){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,g.Z)(function*(y){yield y._initializationPromise;const d=sd(),p=le(Ia,y.config.apiKey,y.name);d&&d.setItem(p,y._getPersistence())})).apply(this,arguments)}function sd(){var y;try{return(null===(y=function vt(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(d){return null}}const od=ee;class Fs{constructor(){this.browserResolver=ne(class Tl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ns,this._completeRedirectFn=_n}_openPopup(d,p,v,A){var R=this;return(0,g.Z)(function*(){var $;te(null===($=R.eventManagers[d._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const re=Vh(d,p,v,wt(),A);return function Qc(y,d,p,v=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),$=Math.max((window.screen.availWidth-v)/2,0).toString();let re="";const Pe=Object.assign(Object.assign({},JI),{width:v.toString(),height:A.toString(),top:R,left:$}),We=(0,O.z$)().toLowerCase();p&&(re=gr(We)?"_blank":p),pt(We)&&(d=d||"http://localhost",Pe.scrollbars="yes");const ot=Object.entries(Pe).reduce((bn,[Bi,kl])=>`${bn}${Bi}=${kl},`,"");if(function Ba(y=(0,O.z$)()){var d;return Jn(y)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(We)&&"_self"!==re)return function ty(y,d){const p=document.createElement("a");p.href=y,p.target=d;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(d||"",re),new Yc(null);const it=window.open(d||"",re,ot);ee(it,y,"popup-blocked");try{it.focus()}catch(bn){}return new Yc(it)}(d,re,eo())})()}_openRedirect(d,p,v,A){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(d),function Po(y){Qt().location.href=y}(Vh(d,p,v,wt(),A)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:A,promise:R}=this.eventManagers[p];return A?Promise.resolve(A):(te(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(d);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(d){var p=this;return(0,g.Z)(function*(){const v=yield function s0(y){return Pp.apply(this,arguments)}(d),A=new Yr(d);return v.register("authEvent",R=>(ee(null==R?void 0:R.authEvent,d,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:A},p.iframes[d._key()]=v,A})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(us,{type:us},A=>{var R;const $=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[us];void 0!==$&&p(!!$),De(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Rp(y){return ks.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ki()||zt()||Jn()}}),this.cordovaResolver=ne(class qp{constructor(){this._redirectPersistence=ns,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_n}_initialize(d){var p=this;return(0,g.Z)(function*(){const v=d._key();let A=p.eventManagers.get(v);return A||(A=new Al(d),p.eventManagers.set(v,A),p.attachCallbackListeners(d,A)),A})()}_openPopup(d){De(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,v,A){var R=this;return(0,g.Z)(function*(){!function Hp(y){var d,p,v,A,R,$,re,Pe,We,ot;const it=Ea();ee("function"==typeof(null===(d=null==it?void 0:it.universalLinks)||void 0===d?void 0:d.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(p=null==it?void 0:it.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(R=null===(A=null===(v=null==it?void 0:it.cordova)||void 0===v?void 0:v.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Pe=null===(re=null===($=null==it?void 0:it.cordova)||void 0===$?void 0:$.plugins)||void 0===re?void 0:re.browsertab)||void 0===Pe?void 0:Pe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(ot=null===(We=null==it?void 0:it.cordova)||void 0===We?void 0:We.InAppBrowser)||void 0===ot?void 0:ot.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const $=yield R._initialize(d);yield $.initialized(),$.resetRedirect(),function Il(){Er.clear()}(),yield R._originValidation(d);const re=function Gh(y,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:uy(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(d,v,A);yield function oy(y,d){return Jc()._set(qh(y),d)}(d,re);const Pe=yield function jp(y,d,p){return pu.apply(this,arguments)}(d,re,p),We=yield function gu(y){const{cordova:d}=Ea();return new Promise(p=>{d.plugins.browsertab.isAvailable(v=>{let A=null;v?d.plugins.browsertab.openUrl(y):A=d.InAppBrowser.open(y,function Gs(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(A)})})}(Pe);return function $p(y,d,p){return mu.apply(this,arguments)}(d,$,We)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function $h(y){return Ui.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:v,handleOpenURL:A,BuildInfo:R}=Ea(),$=setTimeout((0,g.Z)(function*(){yield ay(d),p.onEvent(Wh())}),500),re=function(){var ot=(0,g.Z)(function*(it){clearTimeout($);const bn=yield ay(d);let Bi=null;bn&&(null==it?void 0:it.url)&&(Bi=function wa(y,d){var p,v;const A=function Xc(y){const d=ed(y),p=d.link?decodeURIComponent(d.link):void 0,v=ed(p).link,A=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return ed(A).link||A||v||p||y}(d);if(A.includes("/__/auth/callback")){const R=ed(A),$=R.firebaseError?function zh(y){try{return JSON.parse(y)}catch(d){return null}}(decodeURIComponent(R.firebaseError)):null,re=null===(v=null===(p=null==$?void 0:$.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Pe=re?_e(re):null;return Pe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(bn,it.url)),p.onEvent(Bi||Wh())});return function(bn){return ot.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,re);const Pe=A,We=`${R.packageName.toLowerCase()}://`;Ea().handleOpenURL=function(){var ot=(0,g.Z)(function*(it){if(it.toLowerCase().startsWith(We)&&re({url:it}),"function"==typeof Pe)try{Pe(it)}catch(bn){console.error(bn)}});return function(it){return ot.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ns,this._completeRedirectFn=_n}_initialize(d){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,v,A){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(d,p,v,A)})()}_openRedirect(d,p,v,A){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(d,p,v,A)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Zp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return od(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,g.Z)(function*(){if(d.underlyingResolver)return;const p=yield function hn(){return jo.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function Rl(y){return y.unwrap()}function Qh(y){return Xh(y)}function Xh(y){const{_tokenResponse:d}=y instanceof O.ZR?y.customData:y;if(!d)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Kr.credentialFromResult(y);const p=d.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=ra;break;case"facebook.com":v=Ws;break;case"github.com":v=Sc;break;case"twitter.com":v=za;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:$,pendingToken:re,nonce:Pe}=d;return R||$||A||re?re?p.startsWith("saml.")?Mo._create(p,re):Qi._fromParams({providerId:p,signInMethod:p,pendingToken:re,idToken:A,accessToken:R}):new So(p).credential({idToken:A,accessToken:R,rawNonce:Pe}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function Rn(y,d){return d.catch(p=>{throw p instanceof O.ZR&&function Jh(y,d){var p;const v=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new Yp(y,function ou(y,d){var p;const v=(0,O.m9)(y),A=d;return ee(d.customData.operationType,v,"argument-error"),ee(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),la._fromError(v,A)}(y,d));else if(v){const A=Xh(d),R=d;A&&(R.credential=A,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const A=p.user;return{operationType:p.operationType,credential:Qh(p),additionalUserInfo:vr(p),user:uo.getOrCreate(A)}})}function ud(y,d){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(y,d){const p=yield d;return{verificationId:p.verificationId,confirm:v=>Rn(y,p.confirm(v))}})).apply(this,arguments)}class Yp{constructor(d,p){this.resolver=p,this.auth=function ad(y){return y.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return Rn(Rl(this.auth),this.resolver.resolveSignIn(d))}}class uo{constructor(d){this._delegate=d,this.multiFactor=function Lc(y){const d=(0,O.m9)(y);return Oo.has(d)||Oo.set(d,ts._fromUser(d)),Oo.get(d)}(d)}static getOrCreate(d){return uo.USER_MAP.has(d)||uo.USER_MAP.set(d,new uo(d)),uo.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,g.Z)(function*(){return Rn(p.auth,Si(p._delegate,d))})()}linkWithPhoneNumber(d,p){var v=this;return(0,g.Z)(function*(){return ud(v.auth,function cu(y,d,p){return Wr.apply(this,arguments)}(v._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,g.Z)(function*(){return Rn(p.auth,function Rh(y,d,p){return El.apply(this,arguments)}(p._delegate,d,Fs))})()}linkWithRedirect(d){var p=this;return(0,g.Z)(function*(){return yield id(Re(p.auth)),function Xe(y,d,p){return function mt(y,d,p){return Bt.apply(this,arguments)}(y,d,p)}(p._delegate,d,Fs)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,g.Z)(function*(){return Rn(p.auth,bs(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return ud(this.auth,function xr(y,d,p){return du.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return Rn(this.auth,function ao(y,d,p){return ma.apply(this,arguments)}(this._delegate,d,Fs))}reauthenticateWithRedirect(d){var p=this;return(0,g.Z)(function*(){return yield id(Re(p.auth)),function X(y,d,p){return function Se(y,d,p){return ze.apply(this,arguments)}(y,d,p)}(p._delegate,d,Fs)})()}sendEmailVerification(d){return function Mi(y,d){return nl.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,g.Z)(function*(){return yield function ia(y,d){return Zu.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function sl(y,d){return ol((0,O.m9)(y),d,null)}(this._delegate,d)}updatePassword(d){return function Nc(y,d){return ol((0,O.m9)(y),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function vl(y,d){return Os.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function ua(y,d){return il.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function iu(y,d,p){return su.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}uo.USER_MAP=new WeakMap;const Xn=ee;let Nl=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=p.options;Xn(A,"invalid-api-key",{appName:p.name}),Xn(A,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?Fs:void 0;this._delegate=v.initialize({options:{persistence:hy(A,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?uo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function un(y,d,p){const v=Re(y);ee(v._canInitEmulator,v,"emulator-config-failed"),ee(/^https?:\/\//.test(d),v,"invalid-emulator-scheme");const A=!!(null==p?void 0:p.disableWarnings),R=or(d),{host:$,port:re}=function ms(y){const d=or(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(d.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(v);if(A){const R=A[1];return{host:R,port:On(v.substr(R.length+1))}}{const[R,$]=v.split(":");return{host:R,port:On($)}}}(d);v.config.emulator={url:`${R}//${$}${null===re?"":`:${re}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:$,port:re,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Li(){function y(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function Qu(y,d){return we.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return xt(this._delegate,p)}confirmPasswordReset(p,v){return function tu(y,d,p){return Yu.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var A=this;return(0,g.Z)(function*(){return Rn(A._delegate,function No(y,d,p){return qr.apply(this,arguments)}(A._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function ru(y,d){return Ss.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function tl(y,d){const p=zs.parseLink(d);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Xn(Kh(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function It(y,d){return xn.apply(this,arguments)}(p._delegate,Fs);return v?Rn(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function ly(y,d){Re(y)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,v,A){const{next:R,error:$,complete:re}=Ol(p,v,A);return this._delegate.onAuthStateChanged(R,$,re)}onIdTokenChanged(p,v,A){const{next:R,error:$,complete:re}=Ol(p,v,A);return this._delegate.onIdTokenChanged(R,$,re)}sendSignInLinkToEmail(p,v){return function el(y,d,p){return Rc.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function Xa(y,d,p){return eu.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let A;switch(function dy(y,d){Jr(Object.values(Gn).includes(d),y,"invalid-persistence-type"),(0,O.b$)()?Jr(d!==Gn.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Jr(d===Gn.NONE,y,"unsupported-persistence-type"):rd()?Jr(d===Gn.NONE||d===Gn.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Jr(d===Gn.NONE||Qr(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Gn.SESSION:A=ns;break;case Gn.LOCAL:A=(yield ne(rs)._isAvailable())?rs:pn;break;case Gn.NONE:A=H;break;default:return De("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Rn(this._delegate,function Ka(y){return Mc.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Rn(this._delegate,Sn(this._delegate,p))}signInWithCustomToken(p){return Rn(this._delegate,function Cs(y,d){return Ts.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return Rn(this._delegate,function Xu(y,d,p){return Sn((0,O.m9)(y),Ku.credential(d,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return Rn(this._delegate,function nu(y,d,p){return As.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return ud(this._delegate,function Ah(y,d,p){return yn.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return Xn(Kh(),v._delegate,"operation-not-supported-in-this-environment"),Rn(v._delegate,function ga(y,d,p){return xh.apply(this,arguments)}(v._delegate,p,Fs))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return Xn(Kh(),v._delegate,"operation-not-supported-in-this-environment"),yield id(v._delegate),function M(y,d,p){return function F(y,d,p){return z.apply(this,arguments)}(y,d,p)}(v._delegate,p,Fs)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function fn(y,d){return Ro.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Gn,y})();function Ol(y,d,p){let v=y;"function"!=typeof y&&({next:v,error:d,complete:p}=y);const A=v;return{next:$=>A($&&uo.getOrCreate($)),error:d,complete:p}}function hy(y,d){const p=function Yh(y,d){const p=sd();if(!p)return[];const v=le(Ia,y,d);switch(p.getItem(v)){case Gn.NONE:return[H];case Gn.LOCAL:return[rs,ns];case Gn.SESSION:return[ns];default:return[]}}(y,d);if("undefined"!=typeof self&&!p.includes(rs)&&p.push(rs),"undefined"!=typeof window)for(const v of[pn,ns])p.includes(v)||p.push(v);return p.includes(H)||p.push(H),p}class Da{constructor(){this.providerId="phone",this._delegate=new Kr(Rl(Z.Z.auth()))}static credential(d,p){return Kr.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}Da.PHONE_SIGN_IN_METHOD=Kr.PHONE_SIGN_IN_METHOD,Da.PROVIDER_ID=Kr.PROVIDER_ID;const lo=ee;class $o{constructor(d,p,v=Z.Z.app()){var A;lo(null===(A=v.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Th(d,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Pl(y){y.INTERNAL.registerComponent(new se.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),v=d.getProvider("auth");return new Nl(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ku,FacebookAuthProvider:Ws,GithubAuthProvider:Sc,GoogleAuthProvider:ra,OAuthProvider:So,SAMLAuthProvider:di,PhoneAuthProvider:Da,PhoneMultiFactorGenerator:ry,RecaptchaVerifier:$o,TwitterAuthProvider:za,Auth:Nl,AuthCredential:en,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(Z.Z)},8306:(nt,Ce,k)=>{k.d(Ce,{y:()=>B});var g=k(2961),Z=k(727),O=k(8822),ae=k(4671);var se=k(2416),ce=k(576),ue=k(2806);let B=(()=>{class Te{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const de=new Te;return de.source=this,de.operator=ke,de}subscribe(ke,de,Ee){const Ze=function He(Te){return Te&&Te instanceof g.Lv||function Q(Te){return Te&&(0,ce.m)(Te.next)&&(0,ce.m)(Te.error)&&(0,ce.m)(Te.complete)}(Te)&&(0,Z.Nn)(Te)}(ke)?ke:new g.Hp(ke,de,Ee);return(0,ue.x)(()=>{const{operator:Ge,source:De}=this;Ze.add(Ge?Ge.call(Ze,De):De?this._subscribe(Ze):this._trySubscribe(Ze))}),Ze}_trySubscribe(ke){try{return this._subscribe(ke)}catch(de){ke.error(de)}}forEach(ke,de){return new(de=j(de))((Ee,Ze)=>{const Ge=new g.Hp({next:De=>{try{ke(De)}catch(_e){Ze(_e),Ge.unsubscribe()}},error:Ze,complete:Ee});this.subscribe(Ge)})}_subscribe(ke){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(ke)}[O.L](){return this}pipe(...ke){return function pe(Te){return 0===Te.length?ae.y:1===Te.length?Te[0]:function(ke){return Te.reduce((de,Ee)=>Ee(de),ke)}}(ke)(this)}toPromise(ke){return new(ke=j(ke))((de,Ee)=>{let Ze;this.subscribe(Ge=>Ze=Ge,Ge=>Ee(Ge),()=>de(Ze))})}}return Te.create=xe=>new Te(xe),Te})();function j(Te){var xe;return null!==(xe=null!=Te?Te:se.v.Promise)&&void 0!==xe?xe:Promise}},7579:(nt,Ce,k)=>{k.d(Ce,{x:()=>se});var g=k(8306),Z=k(727);const ae=(0,k(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=k(8737),pe=k(2806);let se=(()=>{class ue extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Q=new ce(this,this);return Q.operator=j,Q}_throwIfClosed(){if(this.closed)throw new ae}next(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(j)}})}error(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Q}=this;for(;Q.length;)Q.shift().error(j)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Q,isStopped:He,observers:Te}=this;return Q||He?Z.Lc:(this.currentObservers=null,Te.push(j),new Z.w0(()=>{this.currentObservers=null,(0,J.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:Q,thrownError:He,isStopped:Te}=this;Q?j.error(He):Te&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return ue.create=(B,j)=>new ce(B,j),ue})();class ce extends se{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Q||Q.call(j,B)}error(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Q||Q.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Q;return null!==(Q=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Q?Q:Z.Lc}}},2961:(nt,Ce,k)=>{k.d(Ce,{Hp:()=>ke,Lv:()=>Q});var g=k(576),Z=k(727),O=k(2416),ae=k(7849);function J(){}const pe=ue("C",void 0,void 0);function ue(De,_e,ve){return{kind:De,value:_e,error:ve}}var B=k(3410),j=k(2806);class Q extends Z.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Z.Nn)(_e)&&_e.add(this)):this.destination=Ge}static create(_e,ve,je){return new ke(_e,ve,je)}next(_e){this.isStopped?Ze(function ce(De){return ue("N",De,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Ze(function se(De){return ue("E",void 0,De)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Ze(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Te(De,_e){return He.call(De,_e)}class xe{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:ve}=this;if(ve.next)try{ve.next(_e)}catch(je){de(je)}}error(_e){const{partialObserver:ve}=this;if(ve.error)try{ve.error(_e)}catch(je){de(je)}else de(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(ve){de(ve)}}}class ke extends Q{constructor(_e,ve,je){let Ue;if(super(),(0,g.m)(_e)||!_e)Ue={next:null!=_e?_e:void 0,error:null!=ve?ve:void 0,complete:null!=je?je:void 0};else{let ee;this&&O.v.useDeprecatedNextContext?(ee=Object.create(_e),ee.unsubscribe=()=>this.unsubscribe(),Ue={next:_e.next&&Te(_e.next,ee),error:_e.error&&Te(_e.error,ee),complete:_e.complete&&Te(_e.complete,ee)}):Ue=_e}this.destination=new xe(Ue)}}function de(De){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(De):(0,ae.h)(De)}function Ze(De,_e){const{onStoppedNotification:ve}=O.v;ve&&B.z.setTimeout(()=>ve(De,_e))}const Ge={closed:!0,next:J,error:function Ee(De){throw De},complete:J}},727:(nt,Ce,k)=>{k.d(Ce,{Lc:()=>pe,w0:()=>J,Nn:()=>se});var g=k(576);const O=(0,k(3888).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Q,He)=>`${He+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var ae=k(8737);class J{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:Q}=this;if((0,g.m)(Q))try{Q()}catch(Te){B=Te instanceof O?Te.errors:[Te]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Te of He)try{ce(Te)}catch(xe){B=null!=B?B:[],xe instanceof O?B=[...B,...xe.errors]:B.push(xe)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)ce(B);else{if(B instanceof J){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,ae.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,ae.P)(j,B),B instanceof J&&B._removeParent(this)}}J.EMPTY=(()=>{const ue=new J;return ue.closed=!0,ue})();const pe=J.EMPTY;function se(ue){return ue instanceof J||ue&&"closed"in ue&&(0,g.m)(ue.remove)&&(0,g.m)(ue.add)&&(0,g.m)(ue.unsubscribe)}function ce(ue){(0,g.m)(ue)?ue():ue.unsubscribe()}},2416:(nt,Ce,k)=>{k.d(Ce,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,Ce,k)=>{k.d(Ce,{E:()=>Z});const Z=new(k(8306).y)(J=>J.complete())},8996:(nt,Ce,k)=>{k.d(Ce,{D:()=>_e});var g=k(8421),Z=k(5363),O=k(9468),pe=k(8306),ce=k(2202),ue=k(576),B=k(9672);function Q(ve,je){if(!ve)throw new Error("Iterable cannot be null");return new pe.y(Ue=>{(0,B.f)(Ue,je,()=>{const ee=ve[Symbol.asyncIterator]();(0,B.f)(Ue,je,()=>{ee.next().then(q=>{q.done?Ue.complete():Ue.next(q.value)})},0,!0)})})}var He=k(3670),Te=k(8239),xe=k(1144),ke=k(6495),de=k(2206),Ee=k(4532),Ze=k(3260);function _e(ve,je){return je?function De(ve,je){if(null!=ve){if((0,He.c)(ve))return function ae(ve,je){return(0,g.Xf)(ve).pipe((0,O.R)(je),(0,Z.Q)(je))}(ve,je);if((0,xe.z)(ve))return function se(ve,je){return new pe.y(Ue=>{let ee=0;return je.schedule(function(){ee===ve.length?Ue.complete():(Ue.next(ve[ee++]),Ue.closed||this.schedule())})})}(ve,je);if((0,Te.t)(ve))return function J(ve,je){return(0,g.Xf)(ve).pipe((0,O.R)(je),(0,Z.Q)(je))}(ve,je);if((0,de.D)(ve))return Q(ve,je);if((0,ke.T)(ve))return function j(ve,je){return new pe.y(Ue=>{let ee;return(0,B.f)(Ue,je,()=>{ee=ve[ce.h](),(0,B.f)(Ue,je,()=>{let q,te;try{({value:q,done:te}=ee.next())}catch(ge){return void Ue.error(ge)}te?Ue.complete():Ue.next(q)},0,!0)}),()=>(0,ue.m)(null==ee?void 0:ee.return)&&ee.return()})}(ve,je);if((0,Ze.L)(ve))return function Ge(ve,je){return Q((0,Ze.Q)(ve),je)}(ve,je)}throw(0,Ee.z)(ve)}(ve,je):(0,g.Xf)(ve)}},8421:(nt,Ce,k)=>{k.d(Ce,{Xf:()=>He});var g=k(655),Z=k(1144),O=k(8239),ae=k(8306),J=k(3670),pe=k(2206),se=k(4532),ce=k(6495),ue=k(3260),B=k(576),j=k(7849),Q=k(8822);function He(De){if(De instanceof ae.y)return De;if(null!=De){if((0,J.c)(De))return function Te(De){return new ae.y(_e=>{const ve=De[Q.L]();if((0,B.m)(ve.subscribe))return ve.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,Z.z)(De))return function xe(De){return new ae.y(_e=>{for(let ve=0;ve<De.length&&!_e.closed;ve++)_e.next(De[ve]);_e.complete()})}(De);if((0,O.t)(De))return function ke(De){return new ae.y(_e=>{De.then(ve=>{_e.closed||(_e.next(ve),_e.complete())},ve=>_e.error(ve)).then(null,j.h)})}(De);if((0,pe.D)(De))return Ee(De);if((0,ce.T)(De))return function de(De){return new ae.y(_e=>{for(const ve of De)if(_e.next(ve),_e.closed)return;_e.complete()})}(De);if((0,ue.L)(De))return function Ze(De){return Ee((0,ue.Q)(De))}(De)}throw(0,se.z)(De)}function Ee(De){return new ae.y(_e=>{(function Ge(De,_e){var ve,je,Ue,ee;return(0,g.mG)(this,void 0,void 0,function*(){try{for(ve=(0,g.KL)(De);!(je=yield ve.next()).done;)if(_e.next(je.value),_e.closed)return}catch(q){Ue={error:q}}finally{try{je&&!je.done&&(ee=ve.return)&&(yield ee.call(ve))}finally{if(Ue)throw Ue.error}}_e.complete()})})(De,_e).catch(ve=>_e.error(ve))})}},6451:(nt,Ce,k)=>{k.d(Ce,{T:()=>pe});var g=k(8189),Z=k(8421),O=k(515),ae=k(7669),J=k(8996);function pe(...se){const ce=(0,ae.yG)(se),ue=(0,ae._6)(se,1/0),B=se;return B.length?1===B.length?(0,Z.Xf)(B[0]):(0,g.J)(ue)((0,J.D)(B,ce)):O.E}},5403:(nt,Ce,k)=>{k.d(Ce,{x:()=>Z});var g=k(2961);function Z(ae,J,pe,se,ce){return new O(ae,J,pe,se,ce)}class O extends g.Lv{constructor(J,pe,se,ce,ue,B){super(J),this.onFinalize=ue,this.shouldUnsubscribe=B,this._next=pe?function(j){try{pe(j)}catch(Q){J.error(Q)}}:super._next,this._error=ce?function(j){try{ce(j)}catch(Q){J.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(j){J.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(nt,Ce,k)=>{k.d(Ce,{U:()=>O});var g=k(4482),Z=k(5403);function O(ae,J){return(0,g.e)((pe,se)=>{let ce=0;pe.subscribe((0,Z.x)(se,ue=>{se.next(ae.call(J,ue,ce++))}))})}},8189:(nt,Ce,k)=>{k.d(Ce,{J:()=>O});var g=k(5577),Z=k(4671);function O(ae=1/0){return(0,g.z)(Z.y,ae)}},5577:(nt,Ce,k)=>{k.d(Ce,{z:()=>ce});var g=k(4004),Z=k(8421),O=k(4482),ae=k(9672),J=k(5403),se=k(576);function ce(ue,B,j=1/0){return(0,se.m)(B)?ce((Q,He)=>(0,g.U)((Te,xe)=>B(Q,Te,He,xe))((0,Z.Xf)(ue(Q,He))),j):("number"==typeof B&&(j=B),(0,O.e)((Q,He)=>function pe(ue,B,j,Q,He,Te,xe,ke){const de=[];let Ee=0,Ze=0,Ge=!1;const De=()=>{Ge&&!de.length&&!Ee&&B.complete()},_e=je=>Ee<Q?ve(je):de.push(je),ve=je=>{Te&&B.next(je),Ee++;let Ue=!1;(0,Z.Xf)(j(je,Ze++)).subscribe((0,J.x)(B,ee=>{null==He||He(ee),Te?_e(ee):B.next(ee)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(Ee--;de.length&&Ee<Q;){const ee=de.shift();xe?(0,ae.f)(B,xe,()=>ve(ee)):ve(ee)}De()}catch(ee){B.error(ee)}}))};return ue.subscribe((0,J.x)(B,_e,()=>{Ge=!0,De()})),()=>{null==ke||ke()}}(Q,He,ue,j)))}},5363:(nt,Ce,k)=>{k.d(Ce,{Q:()=>ae});var g=k(9672),Z=k(4482),O=k(5403);function ae(J,pe=0){return(0,Z.e)((se,ce)=>{se.subscribe((0,O.x)(ce,ue=>(0,g.f)(ce,J,()=>ce.next(ue),pe),()=>(0,g.f)(ce,J,()=>ce.complete(),pe),ue=>(0,g.f)(ce,J,()=>ce.error(ue),pe)))})}},3099:(nt,Ce,k)=>{k.d(Ce,{B:()=>pe});var g=k(8996),Z=k(5698),O=k(7579),ae=k(2961),J=k(4482);function pe(ce={}){const{connector:ue=(()=>new O.x),resetOnError:B=!0,resetOnComplete:j=!0,resetOnRefCountZero:Q=!0}=ce;return He=>{let Te=null,xe=null,ke=null,de=0,Ee=!1,Ze=!1;const Ge=()=>{null==xe||xe.unsubscribe(),xe=null},De=()=>{Ge(),Te=ke=null,Ee=Ze=!1},_e=()=>{const ve=Te;De(),null==ve||ve.unsubscribe()};return(0,J.e)((ve,je)=>{de++,!Ze&&!Ee&&Ge();const Ue=ke=null!=ke?ke:ue();je.add(()=>{de--,0===de&&!Ze&&!Ee&&(xe=se(_e,Q))}),Ue.subscribe(je),Te||(Te=new ae.Hp({next:ee=>Ue.next(ee),error:ee=>{Ze=!0,Ge(),xe=se(De,B,ee),Ue.error(ee)},complete:()=>{Ee=!0,Ge(),xe=se(De,j),Ue.complete()}}),(0,g.D)(ve).subscribe(Te))})(He)}}function se(ce,ue,...B){return!0===ue?(ce(),null):!1===ue?null:ue(...B).pipe((0,Z.q)(1)).subscribe(()=>ce())}},9468:(nt,Ce,k)=>{k.d(Ce,{R:()=>Z});var g=k(4482);function Z(O,ae=0){return(0,g.e)((J,pe)=>{pe.add(O.schedule(()=>J.subscribe(pe),ae))})}},5698:(nt,Ce,k)=>{k.d(Ce,{q:()=>ae});var g=k(515),Z=k(4482),O=k(5403);function ae(J){return J<=0?()=>g.E:(0,Z.e)((pe,se)=>{let ce=0;pe.subscribe((0,O.x)(se,ue=>{++ce<=J&&(se.next(ue),J<=ce&&se.complete())}))})}},8505:(nt,Ce,k)=>{k.d(Ce,{b:()=>J});var g=k(576),Z=k(4482),O=k(5403),ae=k(4671);function J(pe,se,ce){const ue=(0,g.m)(pe)||se||ce?{next:pe,error:se,complete:ce}:pe;return ue?(0,Z.e)((B,j)=>{var Q;null===(Q=ue.subscribe)||void 0===Q||Q.call(ue);let He=!0;B.subscribe((0,O.x)(j,Te=>{var xe;null===(xe=ue.next)||void 0===xe||xe.call(ue,Te),j.next(Te)},()=>{var Te;He=!1,null===(Te=ue.complete)||void 0===Te||Te.call(ue),j.complete()},Te=>{var xe;He=!1,null===(xe=ue.error)||void 0===xe||xe.call(ue,Te),j.error(Te)},()=>{var Te,xe;He&&(null===(Te=ue.unsubscribe)||void 0===Te||Te.call(ue)),null===(xe=ue.finalize)||void 0===xe||xe.call(ue)}))}):ae.y}},4408:(nt,Ce,k)=>{k.d(Ce,{o:()=>J});var g=k(727);class Z extends g.w0{constructor(se,ce){super()}schedule(se,ce=0){return this}}const O={setInterval(pe,se,...ce){const{delegate:ue}=O;return(null==ue?void 0:ue.setInterval)?ue.setInterval(pe,se,...ce):setInterval(pe,se,...ce)},clearInterval(pe){const{delegate:se}=O;return((null==se?void 0:se.clearInterval)||clearInterval)(pe)},delegate:void 0};var ae=k(8737);class J extends Z{constructor(se,ce){super(se,ce),this.scheduler=se,this.work=ce,this.pending=!1}schedule(se,ce=0){if(this.closed)return this;this.state=se;const ue=this.id,B=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(B,ue,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(B,this.id,ce),this}requestAsyncId(se,ce,ue=0){return O.setInterval(se.flush.bind(se,this),ue)}recycleAsyncId(se,ce,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return ce;O.clearInterval(ce)}execute(se,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(se,ce);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,ce){let B,ue=!1;try{this.work(se)}catch(j){ue=!0,B=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:se,scheduler:ce}=this,{actions:ue}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ue,this),null!=se&&(this.id=this.recycleAsyncId(ce,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,Ce,k)=>{k.d(Ce,{v:()=>O});var g=k(6063);class Z{constructor(J,pe=Z.now){this.schedulerActionCtor=J,this.now=pe}schedule(J,pe=0,se){return new this.schedulerActionCtor(this,J).schedule(se,pe)}}Z.now=g.l.now;class O extends Z{constructor(J,pe=Z.now){super(J,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:pe}=this;if(this._active)return void pe.push(J);let se;this._active=!0;do{if(se=J.execute(J.state,J.delay))break}while(J=pe.shift());if(this._active=!1,se){for(;J=pe.shift();)J.unsubscribe();throw se}}}},4986:(nt,Ce,k)=>{k.d(Ce,{z:()=>O});var g=k(4408);const O=new(k(7565).v)(g.o)},6063:(nt,Ce,k)=>{k.d(Ce,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(nt,Ce,k)=>{k.d(Ce,{z:()=>g});const g={setTimeout(Z,O,...ae){const{delegate:J}=g;return(null==J?void 0:J.setTimeout)?J.setTimeout(Z,O,...ae):setTimeout(Z,O,...ae)},clearTimeout(Z){const{delegate:O}=g;return((null==O?void 0:O.clearTimeout)||clearTimeout)(Z)},delegate:void 0}},2202:(nt,Ce,k)=>{k.d(Ce,{h:()=>Z});const Z=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,Ce,k)=>{k.d(Ce,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(nt,Ce,k)=>{k.d(Ce,{_6:()=>pe,jO:()=>ae,yG:()=>J});var g=k(576);function O(se){return se[se.length-1]}function ae(se){return(0,g.m)(O(se))?se.pop():void 0}function J(se){return function Z(se){return se&&(0,g.m)(se.schedule)}(O(se))?se.pop():void 0}function pe(se,ce){return"number"==typeof O(se)?se.pop():ce}},8737:(nt,Ce,k)=>{function g(Z,O){if(Z){const ae=Z.indexOf(O);0<=ae&&Z.splice(ae,1)}}k.d(Ce,{P:()=>g})},3888:(nt,Ce,k)=>{function g(Z){const ae=Z(J=>{Error.call(J),J.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}k.d(Ce,{d:()=>g})},2806:(nt,Ce,k)=>{k.d(Ce,{x:()=>O,O:()=>ae});var g=k(2416);let Z=null;function O(J){if(g.v.useDeprecatedSynchronousErrorHandling){const pe=!Z;if(pe&&(Z={errorThrown:!1,error:null}),J(),pe){const{errorThrown:se,error:ce}=Z;if(Z=null,se)throw ce}}else J()}function ae(J){g.v.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=J)}},9672:(nt,Ce,k)=>{function g(Z,O,ae,J=0,pe=!1){const se=O.schedule(function(){ae(),pe?Z.add(this.schedule(null,J)):this.unsubscribe()},J);if(Z.add(se),!pe)return se}k.d(Ce,{f:()=>g})},4671:(nt,Ce,k)=>{function g(Z){return Z}k.d(Ce,{y:()=>g})},1144:(nt,Ce,k)=>{k.d(Ce,{z:()=>g});const g=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},2206:(nt,Ce,k)=>{k.d(Ce,{D:()=>Z});var g=k(576);function Z(O){return Symbol.asyncIterator&&(0,g.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(nt,Ce,k)=>{function g(Z){return"function"==typeof Z}k.d(Ce,{m:()=>g})},3670:(nt,Ce,k)=>{k.d(Ce,{c:()=>O});var g=k(8822),Z=k(576);function O(ae){return(0,Z.m)(ae[g.L])}},6495:(nt,Ce,k)=>{k.d(Ce,{T:()=>O});var g=k(2202),Z=k(576);function O(ae){return(0,Z.m)(null==ae?void 0:ae[g.h])}},8239:(nt,Ce,k)=>{k.d(Ce,{t:()=>Z});var g=k(576);function Z(O){return(0,g.m)(null==O?void 0:O.then)}},3260:(nt,Ce,k)=>{k.d(Ce,{Q:()=>O,L:()=>ae});var g=k(655),Z=k(576);function O(J){return(0,g.FC)(this,arguments,function*(){const se=J.getReader();try{for(;;){const{value:ce,done:ue}=yield(0,g.qq)(se.read());if(ue)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(ce)}}finally{se.releaseLock()}})}function ae(J){return(0,Z.m)(null==J?void 0:J.getReader)}},4482:(nt,Ce,k)=>{k.d(Ce,{A:()=>Z,e:()=>O});var g=k(576);function Z(ae){return(0,g.m)(null==ae?void 0:ae.lift)}function O(ae){return J=>{if(Z(J))return J.lift(function(pe){try{return ae(pe,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(nt,Ce,k)=>{k.d(Ce,{h:()=>O});var g=k(2416),Z=k(3410);function O(ae){Z.z.setTimeout(()=>{const{onUnhandledError:J}=g.v;if(!J)throw ae;J(ae)})}},4532:(nt,Ce,k)=>{function g(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>g})},655:(nt,Ce,k)=>{function ae(q,te){var ge={};for(var ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&te.indexOf(ne)<0&&(ge[ne]=q[ne]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var Me=0;for(ne=Object.getOwnPropertySymbols(q);Me<ne.length;Me++)te.indexOf(ne[Me])<0&&Object.prototype.propertyIsEnumerable.call(q,ne[Me])&&(ge[ne[Me]]=q[ne[Me]])}return ge}function ce(q,te,ge,ne){return new(ge||(ge=Promise))(function(oe,wt){function Kt(ft){try{rt(ne.next(ft))}catch(rn){wt(rn)}}function Tn(ft){try{rt(ne.throw(ft))}catch(rn){wt(rn)}}function rt(ft){ft.done?oe(ft.value):function Me(oe){return oe instanceof ge?oe:new ge(function(wt){wt(oe)})}(ft.value).then(Kt,Tn)}rt((ne=ne.apply(q,te||[])).next())})}function de(q){return this instanceof de?(this.v=q,this):new de(q)}function Ee(q,te,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,ne=ge.apply(q,te||[]),oe=[];return Me={},wt("next"),wt("throw"),wt("return"),Me[Symbol.asyncIterator]=function(){return this},Me;function wt(sn){ne[sn]&&(Me[sn]=function(Ci){return new Promise(function(Xt,qi){oe.push([sn,Ci,Xt,qi])>1||Kt(sn,Ci)})})}function Kt(sn,Ci){try{!function Tn(sn){sn.value instanceof de?Promise.resolve(sn.value.v).then(rt,ft):rn(oe[0][2],sn)}(ne[sn](Ci))}catch(Xt){rn(oe[0][3],Xt)}}function rt(sn){Kt("next",sn)}function ft(sn){Kt("throw",sn)}function rn(sn,Ci){sn(Ci),oe.shift(),oe.length&&Kt(oe[0][0],oe[0][1])}}function Ge(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,te=q[Symbol.asyncIterator];return te?te.call(q):(q=function Q(q){var te="function"==typeof Symbol&&Symbol.iterator,ge=te&&q[te],ne=0;if(ge)return ge.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ne>=q.length&&(q=void 0),{value:q&&q[ne++],done:!q}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),ge={},ne("next"),ne("throw"),ne("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function ne(oe){ge[oe]=q[oe]&&function(wt){return new Promise(function(Kt,Tn){!function Me(oe,wt,Kt,Tn){Promise.resolve(Tn).then(function(rt){oe({value:rt,done:Kt})},wt)}(Kt,Tn,(wt=q[oe](wt)).done,wt.value)})}}}k.d(Ce,{_T:()=>ae,mG:()=>ce,qq:()=>de,FC:()=>Ee,KL:()=>Ge})},5e3:(nt,Ce,k)=>{k.d(Ce,{deG:()=>$c,tb:()=>lh,AFp:()=>wv,ip1:()=>vv,CZH:()=>Ev,hGG:()=>DI,z2F:()=>hc,sBO:()=>dI,Sil:()=>Cv,_Vd:()=>Fu,EJc:()=>Dv,SBq:()=>tr,qLn:()=>Rn,vpe:()=>wo,tBr:()=>Nr,XFs:()=>st,OlP:()=>Dn,zs3:()=>po,ZZ4:()=>Vv,aQg:()=>Lm,soG:()=>bm,YKP:()=>Q_,h0i:()=>ni,PXZ:()=>Sm,R0b:()=>ii,FiY:()=>Or,Lbi:()=>nI,g9A:()=>js,Qsj:()=>Dw,FYo:()=>Iw,JOm:()=>re,tp0:()=>Ni,Rgc:()=>La,dDg:()=>Av,q4F:()=>ka,GfV:()=>bw,s_b:()=>Wf,ifc:()=>Vt,eFA:()=>Hu,G48:()=>Nv,Gpc:()=>j,X6Q:()=>Rm,_c5:()=>II,VLi:()=>rp,c2e:()=>rI,zSh:()=>qy,wAp:()=>gt,vHH:()=>xe,cg1:()=>nm,kL8:()=>xu,dqk:()=>kt,sIi:()=>Sd,CqO:()=>wf,QGY:()=>Bg,F4k:()=>Fd,RDi:()=>Ji,AaK:()=>ce,qOj:()=>wr,TTD:()=>Ws,_Bn:()=>Ew,xp6:()=>Ul,uIk:()=>mf,ekj:()=>D_,Suo:()=>av,Xpm:()=>Mt,lG2:()=>zt,Yz7:()=>Xt,cJS:()=>Zt,oAB:()=>Y,Yjl:()=>gr,Y36:()=>Pd,_UZ:()=>Aa,qZA:()=>Lg,TgZ:()=>Fg,EpF:()=>wi,n5z:()=>yl,LFG:()=>Xe,$8M:()=>ha,$Z:()=>Ef,NdJ:()=>jg,CRH:()=>uv,Q6J:()=>l_,iGM:()=>Zf,MAs:()=>Od,CHM:()=>Ju,LSH:()=>td,_uU:()=>T_});var g=k(7579),Z=k(727),O=k(8306),ae=k(6451),J=k(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function se(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=pe({__forward_ref__:pe});function j(i){return i.__forward_ref__=j,i.toString=function(){return ce(this())},i}function Q(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class xe extends Error{constructor(s,a){super(function ke(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function de(i){return"string"==typeof i?i:null==i?"":String(i)}function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():de(i)}function _e(i,s){const a=s?` in ${s}`:"";throw new xe(-201,`No provider for ${Ee(i)} found${a}`)}function rt(i,s){null==i&&function ft(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function Xt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Zt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Lt(i){return rr(i,ki)||rr(i,zi)}function rr(i,s){return i.hasOwnProperty(s)?i[s]:null}function Sr(i){return i&&(i.hasOwnProperty(Mr)||i.hasOwnProperty(Wi))?i[Mr]:null}const ki=pe({\u0275prov:pe}),Mr=pe({\u0275inj:pe}),zi=pe({ngInjectableDef:pe}),Wi=pe({ngInjectorDef:pe});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let Br;function Un(i){const s=Br;return Br=i,s}function ui(i,s,a){const u=Lt(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&st.Optional?null:void 0!==s?s:void _e(ce(i),"Injector")}function dn(i){return{toString:i}.toString()}var Qn=(()=>((Qn=Qn||{})[Qn.OnPush=0]="OnPush",Qn[Qn.Default=1]="Default",Qn))(),Vt=(()=>{return(i=Vt||(Vt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Vt;var i})();const et="undefined"!=typeof globalThis&&globalThis,_t="undefined"!=typeof window&&window,ir="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kt=et||"undefined"!=typeof global&&global||_t||ir,sr={},at=[],pr=pe({\u0275cmp:pe}),Nt=pe({\u0275dir:pe}),qe=pe({\u0275pipe:pe}),be=pe({\u0275mod:pe}),Ke=pe({\u0275fac:pe}),ut=pe({__NG_ELEMENT_ID__:pe});let Ot=0;function Mt(i){return dn(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Qn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||at,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Vt.Emulated,id:"c",styles:i.styles||at,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,_=i.pipes;return u.id+=Ot++,u.inputs=pt(i.inputs,a),u.outputs=pt(i.outputs),f&&f.forEach(E=>E(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map(H):null,u})}function L(i){return Ut(i)||function wn(i){return i[Nt]||null}(i)}function H(i){return function At(i){return i[qe]||null}(i)}const le={};function Y(i){return dn(()=>{const s={type:i.type,bootstrap:i.bootstrap||at,declarations:i.declarations||at,imports:i.imports||at,exports:i.exports||at,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(le[i.id]=i.type),s})}function pt(i,s){if(null==i)return sr;const a={};for(const u in i)if(i.hasOwnProperty(u)){let c=i[u],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=u,s&&(s[c]=f)}return a}const zt=Mt;function gr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ut(i){return i[pr]||null}function an(i,s){const a=i[be]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function Ai(i){return Array.isArray(i)&&"object"==typeof i[1]}function ci(i){return Array.isArray(i)&&!0===i[1]}function Ic(i){return 0!=(8&i.flags)}function vs(i){return 2==(2&i.flags)}function Ha(i){return 1==(1&i.flags)}function jr(i){return null!==i.template}function vh(i){return 0!=(512&i[2])}function $r(i,s){return i.hasOwnProperty(Ke)?i[Ke]:null}class So{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ws(){return ra}function ra(i){return i.type.prototype.ngOnChanges&&(i.setInput=Cp),Sc}function Sc(){const i=Is(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===sr)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Cp(i,s,a,u){const c=Is(i)||function di(i,s){return i[Mo]=s}(i,{previous:sr,current:null}),f=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];f[E]=new So(I&&I.currentValue,s,_===sr),i[u]=s}Ws.ngInherit=!0;const Mo="__ngSimpleChanges__";function Is(i){return i[Mo]||null}let Ya;function Ji(i){Ya=i}function cn(i){return!!i.listen}const xo={createRenderer:(i,s)=>function ia(){return void 0!==Ya?Ya:"undefined"!=typeof document?document:void 0}()};function nn(i){for(;Array.isArray(i);)i=i[0];return i}function yr(i,s){return nn(s[i.index])}function sa(i,s){return i.data[s]}function _r(i,s){const a=s[i];return Ai(a)?a:a[0]}function bs(i){return 4==(4&i[2])}function Xi(i){return 128==(128&i[2])}function Gr(i,s){return null==s?null:i[s]}function Cs(i){i[18]=0}function Ts(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const lt={lFrame:Qs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function tu(){return lt.bindingsEnabled}function we(){return lt.lFrame.lView}function xt(){return lt.lFrame.tView}function Ju(i){return lt.lFrame.contextLView=i,i[8]}function fn(){let i=Ro();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ro(){return lt.lFrame.currentTNode}function qr(i,s){const a=lt.lFrame;a.currentTNode=i,a.isParent=s}function Xu(){return lt.lFrame.isParent}function nu(){return lt.isInCheckNoChangesMode}function As(i){lt.isInCheckNoChangesMode=i}function Ss(){return lt.lFrame.bindingIndex++}function su(i,s){const a=lt.lFrame;a.bindingIndex=a.bindingRootIndex=i,aa(s)}function aa(i){lt.lFrame.currentDirectiveIndex=i}function il(){return lt.lFrame.currentQueryIndex}function sl(i){lt.lFrame.currentQueryIndex=i}function Nc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ol(i,s,a){if(a&st.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&st.Host||(c=Nc(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const u=lt.lFrame=Oc();return u.currentTNode=s,u.lView=i,!0}function Ys(i){const s=Oc(),a=i[1];lt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Oc(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?Qs(i):s}function Qs(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Pc(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const kc=Pc;function Js(){const i=Pc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function vr(){return lt.lFrame.selectedIndex}function xs(i){lt.lFrame.selectedIndex=i}function In(){const i=lt.lFrame;return sa(i.tView,i.selectedIndex)}function es(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:S}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function la(i,s,a){Fc(i,s,3,a)}function ou(i,s,a,u){(3&i[2])===a&&Fc(i,s,a,u)}function kn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Fc(i,s,a,u){const f=null!=u?u:-1,_=s.length-1;let E=0;for(let I=void 0!==u?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=u&&E>=u)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(Tp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Tp(i,s,a,u){const c=a[u]<0,f=a[u+1],E=i[c?-a[u]:a[u]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Oo{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function dl(i,s,a){const u=cn(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const _=a[c++],E=a[c++],I=a[c++];u?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=f,E=a[++c];hl(_)?u&&i.setProperty(s,_,E):u?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function ns(i){return 3===i||4===i||6===i}function hl(i){return 64===i.charCodeAt(0)}function ca(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?a=c:0===a||eo(i,a,c,null,-1===a||2===a?s[++u]:null)}}return i}function eo(i,s,a,u,c){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===u)return void(null!==c&&(i[f+1]=c));if(u===i[f+1])return void(i[f+2]=c)}f++,null!==u&&f++,null!==c&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==u&&i.splice(f++,0,u),null!==c&&i.splice(f++,0,c)}function Uc(i){return-1!==i}function Qt(i){return 32767&i}function gn(i,s){let a=function Po(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let Tt=!0;function Rs(i){const s=Tt;return Tt=i,s}let bh=0;function fi(i,s){const a=ko(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,jn(u.data,i),jn(s,null),jn(u.blueprint,null));const c=zr(i,s),f=i.injectorIndex;if(Uc(c)){const _=Qt(c),E=gn(c,s),I=E[1].data;for(let T=0;T<8;T++)s[f+T]=E[_+T]|I[_+T]}return s[f+8]=c,f}function jn(i,s){i.push(0,0,0,0,0,0,0,0,s)}function ko(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function zr(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,c=s;for(;null!==c;){const f=c[1],_=f.type;if(u=2===_?f.declTNode:1===_?c[6]:null,null===u)return-1;if(a++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function no(i,s,a){!function to(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(ut)&&(u=a[ut]),null==u&&(u=a[ut]=bh++);const c=255&u;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function ro(i,s,a){if(a&st.Optional)return i;_e(s,"NodeInjector")}function Fo(i,s,a,u){if(a&st.Optional&&void 0===u&&(u=null),0==(a&(st.Self|st.Host))){const c=i[9],f=Un(void 0);try{return c?c.get(s,u,a&st.Optional):ui(s,u,a&st.Optional)}finally{Un(f)}}return ro(u,s,a)}function pi(i,s,a,u=st.Default,c){if(null!==i){const f=function Bc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ut)?i[ut]:void 0;return"number"==typeof s?s>=0?255&s:$n:s}(a);if("function"==typeof f){if(!ol(s,i,u))return u&st.Host?ro(c,a,u):Fo(s,a,u,c);try{const _=f(u);if(null!=_||u&st.Optional)return _;_e(a)}finally{kc()}}else if("number"==typeof f){let _=null,E=ko(i,s),I=-1,T=u&st.Host?s[16][6]:null;for((-1===E||u&st.SkipSelf)&&(I=-1===E?zr(i,s):s[E+8],-1!==I&&ml(u,!1)?(_=s[1],E=Qt(I),s=gn(I,s)):E=-1);-1!==E;){const S=s[1];if(da(f,E,S.data)){const P=io(E,s,a,_,u,T);if(P!==Ns)return P}I=s[E+8],-1!==I&&ml(u,s[1].data[E+8]===T)&&da(f,E,s)?(_=S,E=Qt(I),s=gn(I,s)):E=-1}}}return Fo(s,a,u,c)}const Ns={};function $n(){return new xi(fn(),we())}function io(i,s,a,u,c,f){const _=s[1],E=_.data[i+8],S=gl(E,_,a,null==u?vs(E)&&Tt:u!=_&&0!=(3&E.type),c&st.Host&&f===E);return null!==S?rs(s,_,S,E):Ns}function gl(i,s,a,u,c){const f=i.providerIndexes,_=s.data,E=1048575&f,I=i.directiveStart,S=f>>20,V=c?E+S:i.directiveEnd;for(let W=u?E:E+S;W<V;W++){const me=_[W];if(W<I&&a===me||W>=I&&me.type===a)return W}if(c){const W=_[I];if(W&&jr(W)&&W.type===a)return I}return null}function rs(i,s,a,u){let c=i[a];const f=s.data;if(function Lc(i){return i instanceof Oo}(c)){const _=c;_.resolving&&function Ze(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new xe(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ee(f[a]));const E=Rs(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Un(_.injectImpl):null;ol(i,u,st.Default);try{c=i[a]=_.factory(void 0,f,i,u),s.firstCreatePass&&a>=u.directiveStart&&function ll(i,s,a){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(u){const _=ra(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&Un(I),Rs(E),_.resolving=!1,kc()}}return c}function da(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function ml(i,s){return!(i&st.Self||i&st.Host&&s)}class xi{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return pi(this._tNode,this._lView,s,u,a)}}function yl(i){return dn(()=>{const s=i.prototype.constructor,a=s[Ke]||so(s),u=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==u;){const f=c[Ke]||so(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function so(i){return He(i)?()=>{const s=so(Q(i));return s&&s()}:$r(i)}function ha(i){return function pl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let c=0;for(;c<u;){const f=a[c];if(ns(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<u&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(fn(),i)}const ss="__parameters__";function oo(i,s,a){return dn(()=>{const u=function uu(i){return function(...a){if(i){const u=i(...a);for(const c in u)this[c]=u[c]}}}(s);function c(...f){if(this instanceof c)return u.apply(this,f),this;const _=new c(...f);return E.annotation=_,E;function E(I,T,S){const P=I.hasOwnProperty(ss)?I[ss]:Object.defineProperty(I,ss,{value:[]})[ss];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class Dn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const $c=new Dn("AnalyzeForEntryComponents");function Rr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),Rr(u,s)):s!==i&&s.push(u)}return s}function Ri(i,s){i.forEach(a=>Array.isArray(a)?Ri(a,s):s(a))}function vl(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Os(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function mi(i,s,a){let u=ga(i,s);return u>=0?i[1|u]=a:(u=~u,function pa(i,s,a,u){let c=i.length;if(c==s)i.push(a,u);else if(1===c)i.push(u,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function Mh(i,s){const a=ga(i,s);if(a>=0)return i[1|a]}function ga(i,s){return function ao(i,s,a){let u=0,c=i.length>>a;for(;c!==u;){const f=u+(c-u>>1),_=i[f<<a];if(s===_)return f<<a;_>s?c=f:u=f+1}return~(c<<a)}(i,s,1)}const as={},Ps="__NG_DI_FLAG__",Il="ngTempTokenPath",b=/\n/gm,F="__source",z=pe({provide:String,useValue:pe});let X;function Se(i){const s=X;return X=i,s}function ze(i,s=st.Default){if(void 0===X)throw new xe(203,"");return null===X?ui(i,void 0,s):X.get(i,s&st.Optional?null:void 0,s)}function Xe(i,s=st.Default){return(function Yn(){return Br}()||ze)(Q(i),s)}const Bt=Xe;function It(i){const s=[];for(let a=0;a<i.length;a++){const u=Q(i[a]);if(Array.isArray(u)){if(0===u.length)throw new xe(900,"");let c,f=st.Default;for(let _=0;_<u.length;_++){const E=u[_],I=_n(E);"number"==typeof I?-1===I?c=E.token:f|=I:c=E}s.push(Xe(c,f))}else s.push(Xe(u))}return s}function xn(i,s){return i[Ps]=s,i.prototype[Ps]=s,i}function _n(i){return i[Ps]}const Nr=xn(oo("Inject",i=>({token:i})),-1),Or=xn(oo("Optional"),8),Ni=xn(oo("SkipSelf"),4);class Qc{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function us(i){return i instanceof Qc?i.changingThisBreaksApplicationSecurity:i}const Ea=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,jp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Hn=(()=>((Hn=Hn||{})[Hn.NONE=0]="NONE",Hn[Hn.HTML=1]="HTML",Hn[Hn.STYLE=2]="STYLE",Hn[Hn.SCRIPT=3]="SCRIPT",Hn[Hn.URL=4]="URL",Hn[Hn.RESOURCE_URL=5]="RESOURCE_URL",Hn))();function td(i){const s=function xl(){const i=we();return i&&i[12]}();return s?s.sanitize(Hn.URL,i)||"":function Tl(i,s){const a=function Uh(i){return i instanceof Qc&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?us(i):function pu(i){return(i=String(i)).match(Ea)||i.match(jp)?i:"unsafe:"+i}(de(i))}const Zp="__ngContext__";function hn(i,s){i[Zp]=s}function vt(i){const s=function jo(i){return i[Zp]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Qh(i){return i.ngOriginalError}function Xh(i,...s){i.error(...s)}class Rn{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=function Jh(i){return i&&i.ngErrorLogger||Xh}(s);u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Qh(s);for(;a&&Qh(a);)a=Qh(a);return a||null}}const $o=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kt))();function p(i){return i instanceof Function?i():i}var re=(()=>((re=re||{})[re.Important=1]="Important",re[re.DashCase=2]="DashCase",re))();function We(i,s){return undefined(i,s)}function bn(i){const s=i[3];return ci(s)?s[3]:s}function ld(i){return ef(i[13])}function Fl(i){return ef(i[4])}function ef(i){for(;null!==i&&!ci(i);)i=i[4];return i}function co(i,s,a,u,c){if(null!=u){let f,_=!1;ci(u)?f=u:Ai(u)&&(_=!0,u=u[0]);const E=nn(u);0===i&&null!==a?null==c?ho(s,a,E):Fn(s,a,E,c||null,!0):1===i&&null!==a?Fn(s,a,E,c||null,!0):2===i?function w0(i,s,a){const u=rf(i,s);u&&function tD(i,s,a,u){cn(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=f&&function nD(i,s,a,u,c){const f=a[7];f!==nn(a)&&co(s,i,u,f,c);for(let E=10;E<a.length;E++){const I=a[E];sf(I[1],I,i,s,u,f)}}(s,i,f,a,c)}}function dd(i,s,a){if(cn(i))return i.createElement(s,a);{const u=null!==a?function Za(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===u?i.createElement(s):i.createElementNS(u,s)}}function f0(i,s){const a=i[9],u=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Ts(c,-1)),a.splice(u,1)}function gy(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const c=u[17];null!==c&&c!==i&&f0(c,u),s>0&&(i[a-1][4]=u[4]);const f=Os(i,10+s);!function Jp(i,s){sf(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const _=f[19];null!==_&&_.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function p0(i,s){if(!(256&s[2])){const a=s[11];cn(a)&&a.destroyNode&&sf(i,s,a,3,null,null),function hd(i){let s=i[13];if(!s)return Ls(i[1],i);for(;s;){let a=null;if(Ai(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)Ai(s)&&Ls(s[1],s),s=s[3];null===s&&(s=i),Ai(s)&&Ls(s[1],s),a=s&&s[4]}s=a}}(s)}}function Ls(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function m0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const c=s[a[u]];if(!(c instanceof Oo)){const f=a[u+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=c[f[_]],I=f[_+1];try{I.call(E)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function g0(i,s){const a=i.cleanup,u=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],E="function"==typeof _?_(s):nn(s[_]),I=u[c=a[f+2]],T=a[f+3];"boolean"==typeof T?E.removeEventListener(a[f],I,T):T>=0?u[c=T]():u[c=-T].unsubscribe(),f+=2}else{const _=u[c=a[f+1]];a[f].call(_)}if(null!==u){for(let f=c+1;f<u.length;f++)u[f]();s[7]=null}}(i,s),1===s[1].type&&cn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ci(s[3])){a!==s[3]&&f0(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function my(i,s,a){return function eD(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const c=i.data[u.directiveStart].encapsulation;if(c===Vt.None||c===Vt.Emulated)return null}return yr(u,a)}(i,s.parent,a)}function Fn(i,s,a,u,c){cn(i)?i.insertBefore(s,a,u,c):s.insertBefore(a,u,c)}function ho(i,s,a){cn(i)?i.appendChild(s,a):s.appendChild(a)}function y0(i,s,a,u,c){null!==u?Fn(i,s,a,u,c):ho(i,s,a)}function rf(i,s){return cn(i)?i.parentNode(s):s.parentNode}let E0=function yy(i,s,a){return 40&i.type?yr(i,a):null};function Ll(i,s,a,u){const c=my(i,u,s),f=s[11],E=function v0(i,s,a){return E0(i,s,a)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)y0(f,c,a[I],E,!1);else y0(f,c,a,E,!1)}function Ho(i,s){if(null!==s){const a=s.type;if(3&a)return yr(s,i);if(4&a)return Vl(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return Ho(i,u);{const c=i[s.index];return ci(c)?Vl(-1,c):nn(c)}}if(32&a)return We(s,i)()||nn(i[s.index]);{const u=jt(i,s);return null!==u?Array.isArray(u)?u[0]:Ho(bn(i[16]),u):Ho(i,s.next)}}return null}function jt(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Vl(i,s){const a=10+i+1;if(a<s.length){const u=s[a],c=u[1].firstChild;if(null!==c)return Ho(u,c)}return s[7]}function ba(i,s,a,u,c,f,_){for(;null!=a;){const E=u[a.index],I=a.type;if(_&&0===s&&(E&&hn(nn(E),u),a.flags|=4),64!=(64&a.flags))if(8&I)ba(i,s,a.child,u,c,f,!1),co(s,i,c,E,f);else if(32&I){const T=We(a,u);let S;for(;S=T();)co(s,i,c,S,f);co(s,i,c,E,f)}else 16&I?vy(i,s,u,a,c,f):co(s,i,c,E,f);a=_?a.projectionNext:a.next}}function sf(i,s,a,u,c,f){ba(a,u,i.firstChild,s,c,f,!1)}function vy(i,s,a,u,c,f){const _=a[16],I=_[6].projection[u.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)co(s,i,c,I[T],f);else ba(i,s,I,_[3],c,f,!0)}function fd(i,s,a){cn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function tg(i,s,a){cn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function of(i,s,a){let u=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===u||i.charCodeAt(c+f)<=32)return c}a=c+1}}const ng="ng-template";function rg(i,s,a){let u=0;for(;u<i.length;){let c=i[u++];if(a&&"class"===c){if(c=i[u],-1!==of(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<i.length&&"string"==typeof(c=i[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Ey(i){return 4===i.type&&i.value!==ng}function D0(i,s,a){return s===(4!==i.type||a?i.value:ng)}function rD(i,s,a){let u=4;const c=i.attrs||[],f=function oD(i){for(let s=0;s<i.length;s++)if(ns(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&u){if(u=2|1&u,""!==I&&!D0(i,I,a)||""===I&&1===s.length){if(fo(u))return!1;_=!0}}else{const T=8&u?I:s[++E];if(8&u&&null!==i.attrs){if(!rg(i.attrs,T,a)){if(fo(u))return!1;_=!0}continue}const P=iD(8&u?"class":I,c,Ey(i),a);if(-1===P){if(fo(u))return!1;_=!0;continue}if(""!==T){let V;V=P>f?"":c[P+1].toLowerCase();const W=8&u?V:null;if(W&&-1!==of(W,T,0)||2&u&&T!==V){if(fo(u))return!1;_=!0}}}}else{if(!_&&!fo(u)&&!fo(I))return!1;if(_&&fo(I))continue;_=!1,u=I|1&u}}return fo(u)||_}function fo(i){return 0==(1&i)}function iD(i,s,a,u){if(null===s)return-1;let c=0;if(u||!a){let f=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function aD(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function af(i,s,a=!1){for(let u=0;u<s.length;u++)if(rD(i,s[u],a))return!0;return!1}function b0(i,s){return i?":not("+s.trim()+")":s}function C0(i){let s=i[0],a=1,u=2,c="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&u){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?c+="."+_:4&u&&(c+=" "+_);else""!==c&&!fo(_)&&(s+=b0(f,c),c=""),u=_,f=f||!fo(u);a++}return""!==c&&(s+=b0(f,c)),s}const yt={};function Ul(i){Dy(xt(),we(),vr()+i,nu())}function Dy(i,s,a,u){if(!u)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&la(s,f,a)}else{const f=i.preOrderHooks;null!==f&&ou(s,f,0,a)}xs(a)}function ig(i,s){return i<<17|s<<2}function yi(i){return i>>17&32767}function pd(i){return 2|i}function Go(i){return(131068&i)>>2}function uf(i,s){return-131069&i|s<<2}function lf(i){return 1|i}function ug(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const c=a[u],f=a[u+1];if(-1!==f){const _=i.data[f];sl(c),_.contentQueries(2,s[f],f)}}}function _d(i,s,a,u,c,f,_,E,I,T){const S=s.blueprint.slice();return S[0]=c,S[2]=140|u,Cs(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=T||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function Ca(i,s,a,u,c){let f=i.data[s];if(null===f)f=function vd(i,s,a,u,c){const f=Ro(),_=Xu(),I=i.data[s]=function _D(i,s,a,u,c,f){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,u,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,u,c),function nl(){return lt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=u,f.attrs=c;const _=function No(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return qr(f,!0),f}function Ed(i,s,a,u){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(u),i.blueprint.push(u),i.data.push(null);return c}function df(i,s,a){Ys(s);try{const u=i.viewQuery;null!==u&&fg(1,u,a);const c=i.template;null!==c&&hf(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&ug(i,s),i.staticViewQueries&&fg(2,i.viewQuery,a);const f=i.components;null!==f&&function L0(i,s){for(let a=0;a<s.length;a++)RD(i,s[a])}(s,f)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Js()}}function wd(i,s,a,u){const c=s[2];if(256==(256&c))return;Ys(s);const f=nu();try{Cs(s),function ru(i){return lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&hf(i,s,a,2,u);const _=3==(3&c);if(!f)if(_){const T=i.preOrderCheckHooks;null!==T&&la(s,T,null)}else{const T=i.preOrderHooks;null!==T&&ou(s,T,0,null),kn(s,0)}if(function Z0(i){for(let s=ld(i);null!==s;s=Fl(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const c=a[u],f=c[3];0==(1024&c[2])&&Ts(f,1),c[2]|=1024}}}(s),function K0(i){for(let s=ld(i);null!==s;s=Fl(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1];Xi(u)&&wd(c,u,c.template,u[8])}}(s),null!==i.contentQueries&&ug(i,s),!f)if(_){const T=i.contentCheckHooks;null!==T&&la(s,T)}else{const T=i.contentHooks;null!==T&&ou(s,T,1),kn(s,1)}!function mD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const c=a[u];if(c<0)xs(~c);else{const f=c,_=a[++u],E=a[++u];su(_,f),E(2,s[f])}}}finally{xs(-1)}}(i,s);const E=i.components;null!==E&&function Vs(i,s){for(let a=0;a<s.length;a++)Y0(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&fg(2,I,u),!f)if(_){const T=i.viewCheckHooks;null!==T&&la(s,T)}else{const T=i.viewHooks;null!==T&&ou(s,T,2),kn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Ts(s[3],-1))}finally{Js()}}function yD(i,s,a,u){const c=s[10],f=!nu(),_=bs(s);try{f&&!_&&c.begin&&c.begin(),_&&df(i,s,u),wd(i,s,a,u)}finally{f&&!_&&c.end&&c.end()}}function hf(i,s,a,u,c){const f=vr(),_=2&u;try{xs(-1),_&&s.length>20&&Dy(i,s,20,nu()),a(u,c)}finally{xs(f)}}function ky(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=vu(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function vu(i,s,a,u,c,f,_,E,I,T){const S=20+u,P=S+c,V=function V0(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:yt);return a}(S,P),W="function"==typeof T?T():T;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:W,incompleteFirstPass:!1}}function j0(i,s,a,u){const c=J0(s);null===a?c.push(u):(c.push(a),i.firstCreatePass&&X0(i).push(u,c.length-1))}function cg(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const c=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,c):a[u]=[s,c]}return a}function H0(i,s,a,u,c,f){const _=f.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function DD(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(u,c,_)}}function G0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function q0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function SD(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;jr(s)&&(a[""]=i)}}function Ly(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function z0(i,s,a,u,c){i.data[u]=c;const f=c.factory||(c.factory=$r(c.type)),_=new Oo(f,jr(c),null);i.blueprint[u]=_,a[u]=_,H0(i,s,0,u,Ed(i,a,c.hostVars,yt),c)}function MD(i,s,a){const u=yr(s,i),c=ky(a),f=i[10],_=dg(i,_d(i,c,null,a.onPush?64:16,u,s,f,f.createRenderer(u,a),null,null));i[s.index]=_}function qo(i,s,a,u,c,f){const _=yr(i,s);!function Vy(i,s,a,u,c,f,_){if(null==f)cn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?de(f):_(f,u||"",c);cn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,f,i.value,a,u,c)}function xD(i,s,a,u,c,f){const _=f[s];if(null!==_){const E=u.setInput;for(let I=0;I<_.length;){const T=_[I++],S=_[I++],P=_[I++];null!==E?u.setInput(a,P,T,S):a[S]=P}}}function W0(i,s){let a=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[u+1])),u+=2}else u+=2;else u+=4}return a}function Y0(i,s){const a=_r(s,i);if(Xi(a)){const u=a[1];80&a[2]?wd(u,a,u.template,a[8]):a[5]>0&&By(a)}}function By(i){for(let u=ld(i);null!==u;u=Fl(u))for(let c=10;c<u.length;c++){const f=u[c];if(1024&f[2]){const _=f[1];wd(_,f,_.template,f[8])}else f[5]>0&&By(f)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const c=_r(a[u],i);Xi(c)&&c[5]>0&&By(c)}}function RD(i,s){const a=_r(s,i),u=a[1];(function ND(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),df(u,a,a[8])}function dg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function hg(i){for(;i;){i[2]|=64;const s=bn(i);if(vh(i)&&!s)return i;i=s}return null}function jy(i,s,a){const u=s[10];u.begin&&u.begin();try{wd(i,s,i.template,a)}catch(c){throw eE(s,c),c}finally{u.end&&u.end()}}function Q0(i){!function ff(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=vt(a),c=u[1];yD(c,u,c.template,a)}}(i[8])}function fg(i,s,a){sl(0),s(i,a)}const kD=(()=>Promise.resolve(null))();function J0(i){return i[7]||(i[7]=[])}function X0(i){return i.cleanup||(i.cleanup=[])}function eE(i,s){const a=i[9],u=a?a.get(Rn,null):null;u&&u.handleError(s)}function tE(i,s,a,u,c){for(let f=0;f<a.length;){const _=a[f++],E=a[f++],I=s[_],T=i.data[_];null!==T.setInput?T.setInput(I,c,u,E):I[E]=c}}function pg(i,s,a){let u=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?f=E:1==f?c=ue(c,E):2==f&&(u=ue(u,E+": "+s[++_]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=c:i.classesWithoutHost=c}const Eu=new Dn("INJECTOR",-1);class iE{get(s,a=as){if(a===as){const u=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw u.name="NullInjectorError",u}return a}}const qy=new Dn("Set Injector scope."),bd={},FD={};let gg;function zy(){return void 0===gg&&(gg=new iE),gg}function mg(i,s=null,a=null,u){const c=LD(i,s,a,u);return c._resolveInjectorDefTypes(),c}function LD(i,s=null,a=null,u){return new ql(i,a,s||zy(),u)}class ql{constructor(s,a,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&Ri(a,E=>this.processProvider(E,s,a)),Ri([s],E=>this.processInjectorType(E,[],f)),this.records.set(Eu,Cd(void 0,this));const _=this.records.get(qy);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ce(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=as,u=st.Default){this.assertNotDestroyed();const c=Se(this),f=Un(void 0);try{if(!(u&st.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function HD(i){return"function"==typeof i||"object"==typeof i&&i instanceof Dn}(s)&&Lt(s);E=I&&this.injectableDefInScope(I)?Cd(yg(s),bd):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(u&st.Self?zy():this.parent).get(s,a=u&st.Optional&&a===as?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Il]=_[Il]||[]).unshift(ce(s)),c)throw _;return function _a(i,s,a,u){const c=i[Il];throw s[F]&&c.unshift(s[F]),i.message=function Vo(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ce(s);if(Array.isArray(s))c=s.map(ce).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):ce(E)))}c=`{${f.join(", ")}}`}return`${a}${u?"("+u+")":""}[${c}]: ${i.replace(b,"\n  ")}`}("\n"+i.message,c,a,u),i.ngTokenPath=c,i[Il]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Un(f),Se(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,c)=>s.push(ce(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processInjectorType(s,a,u){if(!(s=Q(s)))return!1;let c=Sr(s);const f=null==c&&s.ngModule||void 0,_=void 0===f?s:f,E=-1!==u.indexOf(_);if(void 0!==f&&(c=Sr(f)),null==c)return!1;if(null!=c.imports&&!E){let S;u.push(_);try{Ri(c.imports,P=>{this.processInjectorType(P,a,u)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:V,providers:W}=S[P];Ri(W,me=>this.processProvider(me,V,W||at))}}this.injectorDefTypes.add(_);const I=$r(_)||(()=>new _);this.records.set(_,Cd(I,bd));const T=c.providers;if(null!=T&&!E){const S=s;Ri(T,P=>this.processProvider(P,S,T))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,u){let c=Td(s=Q(s))?s:Q(s&&s.provide);const f=function UD(i,s,a){return sE(i)?Cd(void 0,i.useValue):Cd(Wy(i),bd)}(s);if(Td(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Cd(void 0,bd,!0),_.factory=()=>It(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===bd&&(a.value=FD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Ky(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function yg(i){const s=Lt(i),a=null!==s?s.factory:$r(i);if(null!==a)return a;if(i instanceof Dn)throw new xe(204,!1);if(i instanceof Function)return function VD(i){const s=i.length;if(s>0)throw function Kr(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new xe(204,!1);const a=function ai(i){const s=i&&(i[ki]||i[zi]);if(s){const a=function ps(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new xe(204,!1)}function Wy(i,s,a){let u;if(Td(i)){const c=Q(i);return $r(c)||yg(c)}if(sE(i))u=()=>Q(i.useValue);else if(function oE(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...It(i.deps||[]));else if(function BD(i){return!(!i||!i.useExisting)}(i))u=()=>Xe(Q(i.useExisting));else{const c=Q(i&&(i.useClass||i.provide));if(!function $D(i){return!!i.deps}(i))return $r(c)||yg(c);u=()=>new c(...It(i.deps))}return u}function Cd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function sE(i){return null!==i&&"object"==typeof i&&z in i}function Td(i){return"function"==typeof i}let po=(()=>{class i{static create(a,u){var c;if(Array.isArray(a))return mg({name:""},u,a,"");{const f=null!==(c=a.name)&&void 0!==c?c:"";return mg({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=as,i.NULL=new iE,i.\u0275prov=Xt({token:i,providedIn:"any",factory:()=>Xe(Eu)}),i.__NG_ELEMENT_ID__=-1,i})();function ZD(i,s){es(vt(i)[1],fn())}function wr(i){let s=function fE(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let c;if(jr(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new xe(903,"");c=s.\u0275dir}if(c){if(a){u.push(c);const _=i;_.inputs=Ir(i.inputs),_.declaredInputs=Ir(i.declaredInputs),_.outputs=Ir(i.outputs);const E=c.hostBindings;E&&QD(i,E);const I=c.viewQuery,T=c.contentQueries;if(I&&wu(i,I),T&&YD(i,T),se(i.inputs,c.inputs),se(i.declaredInputs,c.declaredInputs),se(i.outputs,c.outputs),jr(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===wr&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Eg(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const c=i[u];c.hostVars=s+=c.hostVars,c.hostAttrs=ca(c.hostAttrs,a=ca(a,c.hostAttrs))}}(u)}function Ir(i){return i===sr?{}:i===at?[]:i}function wu(i,s){const a=i.viewQuery;i.viewQuery=a?(u,c)=>{s(u,c),a(u,c)}:s}function YD(i,s){const a=i.contentQueries;i.contentQueries=a?(u,c,f)=>{s(u,c,f),a(u,c,f)}:s}function QD(i,s){const a=i.hostBindings;i.hostBindings=a?(u,c)=>{s(u,c),a(u,c)}:s}let pf=null;function Iu(){if(!pf){const i=kt.Symbol;if(i&&i.iterator)pf=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(pf=u)}}}return pf}function Sd(i){return!!ei(i)&&(Array.isArray(i)||!(i instanceof Map)&&Iu()in i)}function ei(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function kr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function mf(i,s,a,u){const c=we();return kr(c,Ss(),s)&&(xt(),qo(In(),c,i,s,a,u)),mf}function Od(i){return function Si(i,s){return i[s]}(function tl(){return lt.lFrame.contextLView}(),20+i)}function Pd(i,s=st.Default){const a=we();return null===a?Xe(i,s):pi(fn(),a,Q(i),s)}function Ef(){throw new Error("invalid")}function l_(i,s,a){const u=we();return kr(u,Ss(),s)&&function _i(i,s,a,u,c,f,_,E){const I=yr(s,a);let S,T=s.inputs;!E&&null!=T&&(S=T[u])?(tE(i,a,S,u,c),vs(s)&&function ED(i,s){const a=_r(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function $0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),c=null!=_?_(c,s.value||"",u):c,cn(f)?f.setProperty(I,u,c):hl(u)||(I.setProperty?I.setProperty(u,c):I[u]=c))}(xt(),In(),u,i,s,u[11],a,!1),l_}function c_(i,s,a,u,c){const _=c?"class":"style";tE(i,a,s.inputs[_],_,u)}function Fg(i,s,a,u){const c=we(),f=xt(),_=20+i,E=c[11],I=c[_]=dd(E,s,function Qm(){return lt.lFrame.currentNamespace}()),T=f.firstCreatePass?function kd(i,s,a,u,c,f,_){const E=s.consts,T=Ca(s,i,2,c,Gr(E,f));return function Gl(i,s,a,u){let c=!1;if(tu()){const f=function TD(i,s,a){const u=i.directiveRegistry;let c=null;if(u)for(let f=0;f<u.length;f++){const _=u[f];af(a,_.selectors,!1)&&(c||(c=[]),no(fi(a,s),i,_.type),jr(_)?(q0(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===u?null:{"":-1};if(null!==f){c=!0,Ly(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const P=f[S];P.providersResolver&&P.providersResolver(P)}let E=!1,I=!1,T=Ed(i,s,f.length,null);for(let S=0;S<f.length;S++){const P=f[S];a.mergedAttrs=ca(a.mergedAttrs,P.hostAttrs),z0(i,a,s,T,P),SD(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const V=P.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}!function vD(i,s){const u=s.directiveEnd,c=i.data,f=s.attrs,_=[];let E=null,I=null;for(let T=s.directiveStart;T<u;T++){const S=c[T],P=S.inputs,V=null===f||Ey(s)?null:W0(P,f);_.push(V),E=cg(P,T,E),I=cg(S.outputs,T,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function AD(i,s,a){if(s){const u=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new xe(-301,!1);u.push(s[c],f)}}}(a,u,_)}return a.mergedAttrs=ca(a.mergedAttrs,a.attrs),c}(s,a,T,Gr(E,_)),null!==T.attrs&&pg(T,T.attrs,!1),null!==T.mergedAttrs&&pg(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,f,c,0,s,a,u):f.data[_];qr(T,!0);const S=T.mergedAttrs;null!==S&&dl(E,I,S);const P=T.classes;null!==P&&tg(E,I,P);const V=T.styles;return null!==V&&fd(E,I,V),64!=(64&T.flags)&&Ll(f,c,I,T),0===function oa(){return lt.lFrame.elementDepthCount}()&&hn(I,c),function Xa(){lt.lFrame.elementDepthCount++}(),Ha(T)&&(function lg(i,s,a){!tu()||(function bD(i,s,a,u){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||fi(a,s),hn(u,s);const _=a.initialInputs;for(let E=c;E<f;E++){const I=i.data[E],T=jr(I);T&&MD(s,a,I);const S=rs(s,i,E,a);hn(S,s),null!==_&&xD(0,E-c,S,I,0,_),T&&(_r(a.index,s)[8]=S)}}(i,s,a,yr(a,s)),128==(128&a.flags)&&function CD(i,s,a){const u=a.directiveStart,c=a.directiveEnd,_=a.index,E=function rl(){return lt.lFrame.currentDirectiveIndex}();try{xs(_);for(let I=u;I<c;I++){const T=i.data[I],S=s[I];aa(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&G0(T,S)}}finally{xs(-1),aa(E)}}(i,s,a))}(f,c,T),function Py(i,s,a){if(Ic(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,T,c)),null!==u&&function Id(i,s,a=yr){const u=s.localNames;if(null!==u){let c=s.index+1;for(let f=0;f<u.length;f+=2){const _=u[f+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}(c,T),Fg}function Lg(){let i=fn();Xu()?function el(){lt.lFrame.isParent=!1}():(i=i.parent,qr(i,!1));const s=i;!function eu(){lt.lFrame.elementDepthCount--}();const a=xt();return a.firstCreatePass&&(es(a,i),Ic(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Dh(i){return 0!=(16&i.flags)}(s)&&c_(a,s,we(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ap(i){return 0!=(32&i.flags)}(s)&&c_(a,s,we(),s.stylesWithoutHost,!1),Lg}function Aa(i,s,a,u){return Fg(i,s,a,u),Lg(),Aa}function wi(){return we()}function Bg(i){return!!i&&"function"==typeof i.then}function Fd(i){return!!i&&"function"==typeof i.subscribe}const wf=Fd;function jg(i,s,a,u){const c=we(),f=xt(),_=fn();return function h_(i,s,a,u,c,f,_,E){const I=Ha(u),S=i.firstCreatePass&&X0(i),P=s[8],V=J0(s);let W=!0;if(3&u.type||E){const Be=yr(u,s),Qe=E?E(Be):Be,Ie=V.length,dt=E?Ht=>E(nn(Ht[u.index])):u.index;if(cn(a)){let Ht=null;if(!E&&I&&(Ht=function xE(i,s,a,u){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===a&&c[f+1]===u){const E=s[7],I=c[f+2];return E.length>I?E[I]:null}"string"==typeof _&&(f+=2)}return null}(i,s,c,u.index)),null!==Ht)(Ht.__ngLastListenerFn__||Ht).__ngNextListenerFn__=f,Ht.__ngLastListenerFn__=f,W=!1;else{f=If(u,s,P,f,!1);const on=a.listen(Qe,c,f);V.push(f,on),S&&S.push(c,dt,Ie,Ie+1)}}else f=If(u,s,P,f,!0),Qe.addEventListener(c,f,_),V.push(f),S&&S.push(c,dt,Ie,_)}else f=If(u,s,P,f,!1);const me=u.outputs;let Oe;if(W&&null!==me&&(Oe=me[c])){const Be=Oe.length;if(Be)for(let Qe=0;Qe<Be;Qe+=2){const Di=s[Oe[Qe]][Oe[Qe+1]].subscribe(f),bo=V.length;V.push(f,Di),S&&S.push(c,u.index,bo,-(bo+1))}}}(f,c,c[11],_,i,s,!!a,u),jg}function Ld(i,s,a,u){try{return!1!==a(u)}catch(c){return eE(i,c),!1}}function If(i,s,a,u,c){return function f(_){if(_===Function)return u;const E=2&i.flags?_r(i.index,s):s;0==(32&s[2])&&hg(E);let I=Ld(s,0,u,_),T=f.__ngNextListenerFn__;for(;T;)I=Ld(s,0,T,_)&&I,T=T.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function Cu(i,s,a,u,c){const f=i[a+1],_=null===s;let E=u?yi(f):Go(f),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];E_(i[E],s)&&(I=!0,i[E+1]=u?lf(S):pd(S)),E=u?yi(S):Go(S)}I&&(i[a+1]=u?pd(f):lf(f))}function E_(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&ga(i,s)>=0}function D_(i,s){return function _o(i,s,a,u){const c=we(),f=xt(),_=function Mi(i){const s=lt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function LE(i,s,a,u){const c=i.data;if(null===c[a+1]){const f=c[vr()],_=function FE(i,s){return s>=i.expandoStartIndex}(i,a);(function Qg(i,s){return 0!=(i.flags&(s?16:32))})(f,u)&&null===s&&!_&&(s=!1),s=function Sf(i,s,a,u){const c=function ua(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(a=Wo(a=Yg(null,i,s,a,u),s.attrs,u),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=Yg(c,i,s,a,u),null===f){let I=function Su(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==Go(u))return i[yi(u)]}(i,s,u);void 0!==I&&Array.isArray(I)&&(I=Yg(null,i,s,I[1],u),I=Wo(I,s.attrs,u),function VE(i,s,a,u){i[yi(a?s.classBindings:s.styleBindings)]=u}(i,s,u,I))}else f=function UE(i,s,a){let u;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)u=Wo(u,i[f].hostAttrs,a);return Wo(u,s.attrs,a)}(i,s,u)}return void 0!==f&&(u?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,u),function zg(i,s,a,u,c,f){let _=f?s.classBindings:s.styleBindings,E=yi(_),I=Go(_);i[u]=a;let S,T=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||ga(P,S)>0)&&(T=!0)}else S=a;if(c)if(0!==I){const V=yi(i[E+1]);i[u+1]=ig(V,E),0!==V&&(i[V+1]=uf(i[V+1],u)),i[E+1]=function lD(i,s){return 131071&i|s<<17}(i[E+1],u)}else i[u+1]=ig(E,0),0!==E&&(i[E+1]=uf(i[E+1],u)),E=u;else i[u+1]=ig(I,0),0===E?E=u:i[I+1]=uf(i[I+1],u),I=u;T&&(i[u+1]=pd(i[u+1])),Cu(i,S,u,!0),Cu(i,S,u,!1),function Cf(i,s,a,u,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&ga(f,s)>=0&&(a[u+1]=lf(a[u+1]))}(s,S,i,u,f),_=ig(E,I),f?s.classBindings=_:s.styleBindings=_}(c,f,s,a,_,u)}}(f,i,_,u),s!==yt&&kr(c,_,s)&&function $E(i,s,a,u,c,f,_,E){if(!(3&s.type))return;const I=i.data,T=I[E+1];Mf(function Ty(i){return 1==(1&i)}(T)?b_(I,s,a,c,Go(T),_):void 0)||(Mf(f)||function Cy(i){return 2==(2&i)}(T)&&(f=b_(I,null,a,c,E,_)),function eg(i,s,a,u,c){const f=cn(i);if(s)c?f?i.addClass(a,u):a.classList.add(u):f?i.removeClass(a,u):a.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:re.DashCase;if(null==c)f?i.removeStyle(a,u,_):a.style.removeProperty(u);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=re.Important),f?i.setStyle(a,u,c,_):a.style.setProperty(u,c,E?"important":"")}}}(u,_,function Zs(i,s){return nn(s[i])}(vr(),a),c,f))}(f,f.data[vr()],c,c[11],i,c[_+1]=function C_(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(us(i)))),i}(s,a),u,_)}(i,s,null,!0),D_}function Yg(i,s,a,u,c){let f=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(f=s[E],u=Wo(u,f.hostAttrs,c),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),u}function Wo(i,s,a){const u=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?c=_:c===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),mi(i,_,!!a||s[++f]))}return void 0===i?null:i}function b_(i,s,a,u,c,f){const _=null===s;let E;for(;c>0;){const I=i[c],T=Array.isArray(I),S=T?I[1]:I,P=null===S;let V=a[c+1];V===yt&&(V=P?at:void 0);let W=P?Mh(V,u):S===u?V:void 0;if(T&&!Mf(W)&&(W=Mh(I,u)),Mf(W)&&(E=W,_))return E;const me=i[c+1];c=_?yi(me):Go(me)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=Mh(I,u))}return E}function Mf(i){return void 0!==i}function T_(i,s=""){const a=we(),u=xt(),c=i+20,f=u.firstCreatePass?Ca(u,c,1,s,null):u.data[c],_=a[c]=function cd(i,s){return cn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Ll(u,a,_,f),qr(f,!1)}const Mu=void 0;var k_=["en",[["a","p"],["AM","PM"],Mu],[["AM","PM"],Mu,Mu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Mu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Mu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Mu,"{1} 'at' {0}",Mu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function P_(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let Xl={};function nm(i){const s=function XE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=L_(s);if(a)return a;const u=s.split("-")[0];if(a=L_(u),a)return a;if("en"===u)return k_;throw new Error(`Missing locale data for the locale "${i}".`)}function xu(i){return nm(i)[gt.PluralCase]}function L_(i){return i in Xl||(Xl[i]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[i]),Xl[i]}var gt=(()=>((gt=gt||{})[gt.LocaleId=0]="LocaleId",gt[gt.DayPeriodsFormat=1]="DayPeriodsFormat",gt[gt.DayPeriodsStandalone=2]="DayPeriodsStandalone",gt[gt.DaysFormat=3]="DaysFormat",gt[gt.DaysStandalone=4]="DaysStandalone",gt[gt.MonthsFormat=5]="MonthsFormat",gt[gt.MonthsStandalone=6]="MonthsStandalone",gt[gt.Eras=7]="Eras",gt[gt.FirstDayOfWeek=8]="FirstDayOfWeek",gt[gt.WeekendRange=9]="WeekendRange",gt[gt.DateFormat=10]="DateFormat",gt[gt.TimeFormat=11]="TimeFormat",gt[gt.DateTimeFormat=12]="DateTimeFormat",gt[gt.NumberSymbols=13]="NumberSymbols",gt[gt.NumberFormats=14]="NumberFormats",gt[gt.CurrencyCode=15]="CurrencyCode",gt[gt.CurrencySymbol=16]="CurrencySymbol",gt[gt.CurrencyName=17]="CurrencyName",gt[gt.Currencies=18]="Currencies",gt[gt.Directionality=19]="Directionality",gt[gt.PluralCase=20]="PluralCase",gt[gt.ExtraData=21]="ExtraData",gt))();const Lf="en-US";let nw=Lf;function um(i,s,a,u,c){if(i=Q(i),Array.isArray(i))for(let f=0;f<i.length;f++)um(i[f],s,a,u,c);else{const f=xt(),_=we();let E=Td(i)?i:Q(i.provide),I=Wy(i);const T=fn(),S=1048575&T.providerIndexes,P=T.directiveStart,V=T.providerIndexes>>20;if(Td(i)||!i.multi){const W=new Oo(I,c,Pd),me=qf(E,s,c?S:S+V,P);-1===me?(no(fi(T,_),f,E),mn(f,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(W),_.push(W)):(a[me]=W,_[me]=W)}else{const W=qf(E,s,S+V,P),me=qf(E,s,S,S+V),Oe=W>=0&&a[W],Be=me>=0&&a[me];if(c&&!Be||!c&&!Oe){no(fi(T,_),f,E);const Qe=function vw(i,s,a,u,c){const f=new Oo(i,a,Pd);return f.multi=[],f.index=s,f.componentProviders=0,Gf(f,c,u&&!a),f}(c?lm:Zd,a.length,c,u,I);!c&&Be&&(a[me].providerFactory=Qe),mn(f,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Qe),_.push(Qe)}else mn(f,i,W>-1?W:me,Gf(a[c?me:W],I,!c&&u));!c&&u&&Be&&a[me].componentProviders++}}}function mn(i,s,a,u){const c=Td(s),f=function jD(i){return!!i.useClass}(s);if(c||f){const I=(f?Q(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=T.indexOf(a);-1===S?T.push(a,[u,I]):T[S+1].push(u,I)}else T.push(a,I)}}}function Gf(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function qf(i,s,a,u){for(let c=a;c<u;c++)if(s[c]===i)return c;return-1}function Zd(i,s,a,u){return rc(this.multi,[])}function lm(i,s,a,u){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=rs(a,a[1],this.providerFactory.index,u);f=E.slice(0,_),rc(c,f);for(let I=_;I<E.length;I++)f.push(E[I])}else f=[],rc(c,f);return f}function rc(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Ew(i,s=[]){return a=>{a.providersResolver=(u,c)=>function Ii(i,s,a){const u=xt();if(u.firstCreatePass){const c=jr(i);um(a,u.data,u.blueprint,c,!0),um(s,u.data,u.blueprint,c,!1)}}(u,c?c(i):i,s)}}class ww{}class Mb{resolveComponentFactory(s){throw function Sb(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Fu=(()=>{class i{}return i.NULL=new Mb,i})();function cm(){return Pa(fn(),we())}function Pa(i,s){return new tr(yr(i,s))}let tr=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=cm,i})();function xb(i){return i instanceof tr?i.nativeElement:i}class Iw{}let Dw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Nb(){const i=we(),a=_r(fn().index,i);return function Rb(i){return i[11]}(Ai(a)?a:i)}(),i})(),Ob=(()=>{class i{}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>null}),i})();class bw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const ka=new bw("13.2.7"),Lu={};function dm(i,s,a,u,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&u.push(nn(f)),ci(f))for(let E=10;E<f.length;E++){const I=f[E],T=I[1].firstChild;null!==T&&dm(I[1],I,T,u)}const _=a.type;if(8&_)dm(i,s,a.child,u);else if(32&_){const E=We(a,s);let I;for(;I=E();)u.push(I)}else if(16&_){const E=jt(s,a);if(Array.isArray(E))u.push(...E);else{const I=bn(s[16]);dm(I[1],I,E,u,!0)}}a=c?a.projectionNext:a.next}return u}class Qd{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return dm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ci(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(gy(s,u),Os(a,u))}this._attachedToViewContainer=!1}p0(this._lView[1],this._lView)}onDestroy(s){j0(this._lView[1],this._lView,null,s)}markForCheck(){hg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){jy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function PD(i,s,a){As(!0);try{jy(i,s,a)}finally{As(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new xe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fy(i,s){sf(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new xe(902,"");this._appRef=s}}class Cw extends Qd{constructor(s){super(s),this._view=s}detectChanges(){Q0(this._view)}checkNoChanges(){!function $y(i){As(!0);try{Q0(i)}finally{As(!1)}}(this._view)}get context(){return null}}class Ko extends Fu{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Ut(s);return new Xd(a,this.ngModule)}}function K_(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Xd extends ww{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function wy(i){return i.map(C0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return K_(this.componentDef.inputs)}get outputs(){return K_(this.componentDef.outputs)}create(s,a,u,c){const f=(c=c||this.ngModule)?function hm(i,s){return{get:(a,u,c)=>{const f=i.get(a,Lu,c);return f!==Lu||u===Lu?f:s.get(a,u,c)}}}(s,c.injector):s,_=f.get(Iw,xo),E=f.get(Ob,null),I=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=u?function B0(i,s,a){if(cn(i))return i.selectRootElement(s,a===Vt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(I,u,this.componentDef.encapsulation):dd(_.createRenderer(null,this.componentDef),T,function Jd(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(T)),P=this.componentDef.onPush?576:528,V=function vg(i,s){return{components:[],scheduler:i||$o,clean:kD,playerHandler:s||null,flags:0}}(),W=vu(0,null,null,1,0,null,null,null,null,null),me=_d(null,W,V,P,null,null,_,I,E,f);let Oe,Be;Ys(me);try{const Qe=function Ad(i,s,a,u,c,f){const _=a[1];a[20]=i;const I=Ca(_,20,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(pg(I,T,!0),null!==i&&(dl(c,i,T),null!==I.classes&&tg(c,i,I.classes),null!==I.styles&&fd(c,i,I.styles)));const S=u.createRenderer(i,s),P=_d(a,ky(s),null,s.onPush?64:16,a[20],I,u,S,f||null,null);return _.firstCreatePass&&(no(fi(I,a),_,s.type),q0(_,I),Ly(I,a.length,1)),dg(a,P),a[20]=P}(S,this.componentDef,me,_,I);if(S)if(u)dl(I,S,["ng-version",ka.full]);else{const{attrs:Ie,classes:dt}=function Iy(i){const s=[],a=[];let u=1,c=2;for(;u<i.length;){let f=i[u];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++u]):8===c&&a.push(f);else{if(!fo(c))break;c=f}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&dl(I,S,Ie),dt&&dt.length>0&&tg(I,S,dt.join(" "))}if(Be=sa(W,20),void 0!==a){const Ie=Be.projection=[];for(let dt=0;dt<this.ngContentSelectors.length;dt++){const Ht=a[dt];Ie.push(null!=Ht?Array.from(Ht):null)}}Oe=function hE(i,s,a,u,c){const f=a[1],_=function ID(i,s,a){const u=fn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),z0(i,u,s,Ed(i,s,1,null),a));const c=rs(s,i,u.directiveStart,u);hn(c,s);const f=yr(u,s);return f&&hn(f,s),c}(f,a,s);if(u.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=fn();s.contentQueries(1,_,I.directiveStart)}const E=fn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(xs(E.index),H0(a[1],E,0,E.directiveStart,E.directiveEnd,s),G0(s,_)),_}(Qe,this.componentDef,me,V,[ZD]),df(W,me,null)}finally{Js()}return new Y_(this.componentType,Oe,Pa(Be,me),me,Be)}}class Y_ extends class Oa{}{constructor(s,a,u,c,f){super(),this.location=u,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Cw(c),this.componentType=s}get injector(){return new xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class ni{}class Q_{}const Zo=new Map;class ev extends ni{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ko(this);const u=an(s);this._bootstrapComponents=p(u.bootstrap),this._r3Injector=LD(s,a,[{provide:ni,useValue:this},{provide:Fu,useValue:this.componentFactoryResolver}],ce(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=po.THROW_IF_NOT_FOUND,u=st.Default){return s===po||s===ni||s===Eu?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class pm extends Q_{constructor(s){super(),this.moduleType=s,null!==an(s)&&function J_(i){const s=new Set;!function a(u){const c=an(u,!0),f=c.id;null!==f&&(function fm(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ce(s)} vs ${ce(s.name)}`)}(f,Zo.get(f),u),Zo.set(f,u));const _=p(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new ev(this.moduleType,s)}}function Fa(i){return s=>{setTimeout(i,void 0,s)}}const wo=class zf extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var c,f,_;let E=s,I=a||(()=>null),T=u;if(s&&"object"==typeof s){const P=s;E=null===(c=P.next)||void 0===c?void 0:c.bind(P),I=null===(f=P.error)||void 0===f?void 0:f.bind(P),T=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(I=Fa(I),E&&(E=Fa(E)),T&&(T=Fa(T)));const S=super.subscribe({next:E,error:I,complete:T});return s instanceof Z.w0&&s.add(S),S}};function Pw(){return this._results[Iu()]()}class _m{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Iu(),u=_m.prototype;u[a]||(u[a]=Pw)}get changes(){return this._changes||(this._changes=new wo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const c=Rr(s);(this._changesDetected=!function du(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let c=i[u],f=s[u];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(u._results,c,a))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let La=(()=>{class i{}return i.__NG_ELEMENT_ID__=hr,i})();const iv=La,Bb=class extends iv{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=_d(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(u[19]=f.createEmbeddedView(a)),df(a,u,s),new Qd(u)}};function hr(){return $t(fn(),we())}function $t(i,s){return 4&i.type?new Bb(s,i,Pa(i,s)):null}let Wf=(()=>{class i{}return i.__NG_ELEMENT_ID__=kw,i})();function kw(){return vn(fn(),we())}const Vu=Wf,Kn=class extends Vu{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return Pa(this._hostTNode,this._hostLView)}get injector(){return new xi(this._hostTNode,this._hostLView)}get parentInjector(){const s=zr(this._hostTNode,this._hostLView);if(Uc(s)){const a=gn(s,this._hostLView),u=Qt(s);return new xi(a[1].data[u+8],a)}return new xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Kf(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const c=s.createEmbeddedView(a||{});return this.insert(c,u),c}createComponent(s,a,u,c,f){const _=s&&!function Wr(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const P=a||{};E=P.index,u=P.injector,c=P.projectableNodes,f=P.ngModuleRef}const I=_?s:new Xd(Ut(s)),T=u||this.parentInjector;if(!f&&null==I.ngModule){const V=(_?T:this.parentInjector).get(ni,null);V&&(f=V)}const S=I.create(T,c,void 0,f);return this.insert(S.hostView,E),S}insert(s,a){const u=s._lView,c=u[1];if(function Qa(i){return ci(i[3])}(u)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=u[3],V=new Kn(P,P[6],P[3]);V.detach(V.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function h0(i,s,a,u){const c=10+u,f=a.length;u>0&&(a[c-1][4]=s),u<f-10?(s[4]=a[c],vl(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function py(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,u,_,f);const E=Vl(f,_),I=u[11],T=rf(I,_[7]);return null!==T&&function Rt(i,s,a,u,c,f){u[0]=c,u[6]=s,sf(i,u,a,1,c,f)}(c,_[6],I,u,T,E),s.attachToViewContainerRef(),vl(Cr(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Kf(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=gy(this._lContainer,a);u&&(Os(Cr(this._lContainer),a),p0(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=gy(this._lContainer,a);return u&&null!=Os(Cr(this._lContainer),a)?new Qd(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Kf(i){return i[8]}function Cr(i){return i[8]||(i[8]=[])}function vn(i,s){let a;const u=s[i.index];if(ci(u))a=u;else{let c;if(8&i.type)c=nn(u);else{const f=s[11];c=f.createComment("");const _=yr(i,s);Fn(f,rf(f,_),c,function _0(i,s){return cn(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=function Uy(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}(u,s,c,i),dg(s,a)}return new Kn(a,i,s)}class Hi{constructor(s){this.queryList=s,this.matches=null}clone(){return new Hi(this.queryList)}setDirty(){this.queryList.setDirty()}}class sv{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<u;f++){const _=a.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new sv(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Vw(s,a).matches&&this.queries[a].setDirty()}}class vm{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class oc{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const c=null!==a?a.length:0,f=this.getByIndex(u).embeddedTView(s,c);f&&(f.indexInDeclarationView=u,null!==a?a.push(f):a=[f])}return null!==a?new oc(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class ov{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new ov(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const f=u[c];this.matchTNodeWithReadOption(s,a,jb(a,f)),this.matchTNodeWithReadOption(s,a,gl(a,s,f,!1,!1))}else u===La?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,gl(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===tr||c===Wf||c===La&&4&a.type)this.addMatch(a.index,-2);else{const f=gl(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function jb(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function $b(i,s,a,u){return-1===a?function ln(i,s){return 11&i.type?Pa(i,s):4&i.type?$t(i,s):null}(s,i):-2===a?function Em(i,s,a){return a===tr?Pa(s,i):a===La?$t(s,i):a===Wf?vn(s,i):void 0}(i,s,u):rs(i,i[1],a,s)}function sh(i,s,a,u){const c=s[19].queries[u];if(null===c.matches){const f=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const T=_[I];E.push(T<0?null:$b(s,f[T],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function ac(i,s,a,u){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const _=sh(i,s,c,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)u.push(_[E/2]);else{const T=f[E+1],S=s[-I];for(let P=10;P<S.length;P++){const V=S[P];V[17]===V[3]&&ac(V[1],V,T,u)}if(null!==S[9]){const P=S[9];for(let V=0;V<P.length;V++){const W=P[V];ac(W[1],W,T,u)}}}}}return u}function Zf(i){const s=we(),a=xt(),u=il();sl(u+1);const c=Vw(a,u);if(i.dirty&&bs(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?ac(a,s,u,[]):sh(a,s,c,u);i.reset(f,xb),i.notifyOnChanges()}return!0}return!1}function av(i,s,a,u){const c=xt();if(c.firstCreatePass){const f=fn();(function cv(i,s,a){null===i.queries&&(i.queries=new oc),i.queries.track(new ov(s,a))})(c,new vm(s,a,u),f.index),function Gb(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function lv(i,s,a){const u=new _m(4==(4&a));j0(i,s,u,u.destroy),null===s[19]&&(s[19]=new sv),s[19].queries.push(new Hi(u))}(c,we(),a)}function uv(){return function Hb(i,s){return i[19].queries[s].queryList}(we(),il())}function Vw(i,s){return i.queries.getByIndex(s)}function ep(...i){}const vv=new Dn("Application Initializer");let Ev=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ep,this.reject=ep,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Bg(f))a.push(f);else if(wf(f)){const _=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{u()}).catch(c=>{this.reject(c)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Xe(vv,8))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const wv=new Dn("AppId",{providedIn:"root",factory:function Iv(){return`${uh()}${uh()}${uh()}`}});function uh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const js=new Dn("Platform Initializer"),nI=new Dn("Platform ID"),lh=new Dn("appBootstrapListener");let rI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();const bm=new Dn("LocaleId",{providedIn:"root",factory:()=>Bt(bm,st.Optional|st.SkipSelf)||function cc(){return"undefined"!=typeof $localize&&$localize.locale||Lf}()}),Dv=new Dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class bv{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Cv=(()=>{class i{compileModuleSync(a){return new pm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),f=p(an(a).declarations).reduce((_,E)=>{const I=Ut(E);return I&&_.push(new Xd(I)),_},[]);return new bv(u,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Jb=(()=>Promise.resolve(0))();function Cm(i){"undefined"==typeof Zone?Jb.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ii{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wo(!1),this.onMicrotaskEmpty=new wo(!1),this.onStable=new wo(!1),this.onError=new wo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&a,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Tm(){let i=kt.requestAnimationFrame,s=kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function sI(i){const s=()=>{!function tp(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(kt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,np(i),i.isCheckStableRunning=!0,Bu(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),np(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,c,f,_,E)=>{try{return Am(i),a.invokeTask(c,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Tv(i)}},onInvoke:(a,u,c,f,_,E,I)=>{try{return Am(i),a.invoke(c,f,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Tv(i)}},onHasTask:(a,u,c,f)=>{a.hasTask(c,f),u===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,np(i),Bu(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,u,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ii.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ii.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,s,dc,ep,ep);try{return f.runTask(_,a,u)}finally{f.cancelTask(_)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const dc={};function Bu(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function np(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Am(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Tv(i){i._nesting--,Bu(i)}class Xb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wo,this.onMicrotaskEmpty=new wo,this.onStable=new wo,this.onError=new wo}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,c){return s.apply(a,u)}}let Av=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ii.assertNotInAngularZone(),Cm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,c){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Xe(ii))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})(),Sv=(()=>{class i{constructor(){this._applications=new Map,ju.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return ju.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();class Mv{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function rp(i){ju=i}let Do,ju=new Mv;const aI=new Dn("AllowMultipleToken");class Sm{constructor(s,a){this.name=s,this.token=a}}function Hu(i,s,a=[]){const u=`Platform: ${s}`,c=new Dn(u);return(f=[])=>{let _=lI();if(!_||_.injector.get(aI,!1))if(i)i(a.concat(f).concat({provide:c,useValue:!0}));else{const E=a.concat(f).concat({provide:c,useValue:!0},{provide:qy,useValue:"platform"});!function $u(i){if(Do&&!Do.destroyed&&!Do.injector.get(aI,!1))throw new xe(400,"");Do=i.get(Mm);const s=i.get(js,null);s&&s.forEach(a=>a())}(po.create({providers:E,name:u}))}return function uI(i){const s=lI();if(!s)throw new xe(401,"");return s}()}}function lI(){return Do&&!Do.destroyed?Do:null}let Mm=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const E=function xm(i,s){let a;return a="noop"===i?new Xb:("zone.js"===i?void 0:i)||new ii({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),I=[{provide:ii,useValue:E}];return E.run(()=>{const T=po.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(T),P=S.injector.get(Rn,null);if(!P)throw new xe(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:W=>{P.handleError(W)}});S.onDestroy(()=>{dh(this._modules,S),V.unsubscribe()})}),function tC(i,s,a){try{const u=a();return Bg(u)?u.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(P,E,()=>{const V=S.injector.get(Ev);return V.runInitializers(),V.donePromise.then(()=>(function vb(i){rt(i,"Expected localeId to be defined"),"string"==typeof i&&(nw=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(bm,Lf)||Lf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const c=xv({},u);return function oI(i,s,a){const u=new pm(a);return Promise.resolve(u)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const u=a.injector.get(hc);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new xe(403,"");a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Xe(po))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})();function xv(i,s){return Array.isArray(s)?s.reduce(xv,i):Object.assign(Object.assign({},i),s)}let hc=(()=>{class i{constructor(a,u,c,f,_){this._zone=a,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new O.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),I=new O.y(T=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{ii.assertNotInAngularZone(),Cm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{ii.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{S.unsubscribe(),P.unsubscribe()}});this.isStable=(0,ae.T)(E,I.pipe((0,J.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new xe(405,"");let c;c=a instanceof ww?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function eC(i){return i.isBoundToModule}(c)?void 0:this._injector.get(ni),E=c.create(po.NULL,[],u||c.selector,f),I=E.location.nativeElement,T=E.injector.get(Av,null),S=T&&E.injector.get(Sv);return T&&S&&S.registerApplication(I,T),E.onDestroy(()=>{this.detachView(E.hostView),dh(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new xe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;dh(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(lh,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Xe(ii),Xe(po),Xe(Rn),Xe(Fu),Xe(Ev))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function dh(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Pi=!0,Rv=!1;function Rm(){return Rv=!0,Pi}function Nv(){if(Rv)throw new Error("Cannot enable prod mode after platform setup.");Pi=!1}let dI=(()=>{class i{}return i.__NG_ELEMENT_ID__=gc,i})();function gc(i){return function rC(i,s,a){if(vs(i)&&!a){const u=_r(i.index,s);return new Qd(u,u)}return 47&i.type?new Qd(s[16],s):null}(fn(),we(),16==(16&i))}class Om{constructor(){}supports(s){return Sd(s)}create(s){return new Pm(s)}}const ap=(i,s)=>s;class Pm{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||ap}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,c=0,f=null;for(;a||u;){const _=!u||a&&a.currentIndex<Lv(u,c,f)?a:u,E=Lv(_,c,f),I=_.currentIndex;if(_===u)c--,u=u._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{f||(f=[]);const T=E-c,S=I-c;if(T!=S){for(let V=0;V<T;V++){const W=V<f.length?f[V]:f[V]=0,me=W+V;S<=me&&me<T&&(f[V]=W+1)}f[_.previousIndex]=S-T}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Sd(s))throw new xe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,_,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],_=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,f,_,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,E),u=!0),a=a._next}else c=0,function Xy(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Iu()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),u=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new Fv(a,u),f,c),s}_verifyReinsertion(s,a,u,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new km),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new km),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Fv{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class km{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new lC,this.map.set(a,u)),u.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Lv(i,s,a){const u=i.previousIndex;if(null===u)return u;let c=0;return a&&u<a.length&&(c=a[u]),u+s+c}class yI{constructor(){}supports(s){return s instanceof Map||ei(s)}create(){return new _I}}class _I{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||ei(s)))throw new xe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,u);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const u=new vI(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class vI{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fm(){return new Vv([new Om])}let Vv=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||Fm()),deps:[[i,new Ni,new Or]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(null!=u)return u;throw new xe(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Fm}),i})();function EI(){return new Lm([new yI])}let Lm=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||EI()),deps:[[i,new Ni,new Or]]}}find(a){const u=this.factories.find(f=>f.supports(a));if(u)return u;throw new xe(901,"")}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:EI}),i})();const II=Hu(null,"core",[{provide:nI,useValue:"unknown"},{provide:Mm,deps:[po]},{provide:Sv,deps:[]},{provide:rI,deps:[]}]);let DI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Xe(hc))},i.\u0275mod=Y({type:i}),i.\u0275inj=Zt({}),i})()},3942:(nt,Ce,k)=>{k.d(Ce,{Z:()=>xe});var g=k(2090),Z=k(4859),O=k(9681),ae=k(1877);class J{constructor(de,Ee){this._delegate=de,this.firebase=Ee,(0,O._addComponent)(de,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(de,Ee=O._DEFAULT_ENTRY_NAME){var Ze;this._delegate.checkDestroyed();const Ge=this._delegate.container.getProvider(de);return!Ge.isInitialized()&&"EXPLICIT"===(null===(Ze=Ge.getComponent())||void 0===Ze?void 0:Ze.instantiationMode)&&Ge.initialize(),Ge.getImmediate({identifier:Ee})}_removeServiceInstance(de,Ee=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(Ee)}_addComponent(de){(0,O._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,O._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ue(){const ke=function ce(ke){const de={},Ee={__esModule:!0,initializeApp:function De(Ue,ee={}){const q=O.initializeApp(Ue,ee);if((0,g.r3)(de,q.name))return de[q.name];const te=new ke(q,Ee);return de[q.name]=te,te},app:Ge,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(Ue){const ee=Ue.name,q=ee.replace("-compat","");if(O._registerComponent(Ue)&&"PUBLIC"===Ue.type){const te=(ge=Ge())=>{if("function"!=typeof ge[q])throw se.create("invalid-app-argument",{appName:ee});return ge[q]()};void 0!==Ue.serviceProps&&(0,g.ZB)(te,Ue.serviceProps),Ee[q]=te,ke.prototype[q]=function(...ge){return this._getService.bind(this,ee).apply(this,Ue.multipleInstances?ge:[])}}return"PUBLIC"===Ue.type?Ee[q]:null},removeApp:function Ze(Ue){delete de[Ue]},useAsService:function je(Ue,ee){return"serverAuth"===ee?null:ee},modularAPIs:O}};function Ge(Ue){if(!(0,g.r3)(de,Ue=Ue||O._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:Ue});return de[Ue]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function _e(){return Object.keys(de).map(Ue=>de[Ue])}}),Ge.App=ke,Ee}(J);return ke.INTERNAL=Object.assign(Object.assign({},ke.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function de(Ee){(0,g.ZB)(ke,Ee)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),ke}(),j=new ae.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ke=self.firebase.SDK_VERSION;ke&&ke.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=B;!function Te(ke){(0,O.registerVersion)("@firebase/app-compat","0.1.21",ke)}()},9681:(nt,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Sr,_DEFAULT_ENTRY_NAME:()=>Tn,_addComponent:()=>sn,_addOrOverwriteComponent:()=>Ci,_apps:()=>ft,_clearComponents:()=>Lt,_components:()=>rn,_getProvider:()=>qi,_registerComponent:()=>Xt,_removeServiceInstance:()=>Zt,deleteApp:()=>Wi,getApp:()=>Mr,getApps:()=>zi,initializeApp:()=>ki,onLog:()=>Yn,registerVersion:()=>Br,setLogLevel:()=>Un});var g=k(5861),Z=k(4859),O=k(1877),ae=k(2090);class J{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Ke=>{if(function pe(qe){const be=qe.getComponent();return"VERSION"===(null==be?void 0:be.type)}(Ke)){const ut=Ke.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(Ke=>Ke).join(" ")}}const se="@firebase/app",ue=new O.Yd("@firebase/app"),Tn="[DEFAULT]",rt={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ft=new Map,rn=new Map;function sn(qe,be){try{qe.container.addComponent(be)}catch(Ke){ue.debug(`Component ${be.name} failed to register with FirebaseApp ${qe.name}`,Ke)}}function Ci(qe,be){qe.container.addOrOverwriteComponent(be)}function Xt(qe){const be=qe.name;if(rn.has(be))return ue.debug(`There were multiple attempts to register component ${be}.`),!1;rn.set(be,qe);for(const Ke of ft.values())sn(Ke,qe);return!0}function qi(qe,be){const Ke=qe.container.getProvider("heartbeat").getImmediate({optional:!0});return Ke&&Ke.triggerHeartbeat(),qe.container.getProvider(be)}function Zt(qe,be,Ke=Tn){qi(qe,be).clearInstance(Ke)}function Lt(){rn.clear()}const ai=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ps{constructor(be,Ke,ut){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Ke),this._name=Ke.name,this._automaticDataCollectionEnabled=Ke.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}}const Sr="9.6.10";function ki(qe,be={}){"object"!=typeof be&&(be={name:be});const Ke=Object.assign({name:Tn,automaticDataCollectionEnabled:!1},be),ut=Ke.name;if("string"!=typeof ut||!ut)throw ai.create("bad-app-name",{appName:String(ut)});const Ot=ft.get(ut);if(Ot){if((0,ae.vZ)(qe,Ot.options)&&(0,ae.vZ)(Ke,Ot.config))return Ot;throw ai.create("duplicate-app",{appName:ut})}const Mt=new Z.H0(ut);for(const L of rn.values())Mt.addComponent(L);const U=new ps(qe,Ke,Mt);return ft.set(ut,U),U}function Mr(qe=Tn){const be=ft.get(qe);if(!be)throw ai.create("no-app",{appName:qe});return be}function zi(){return Array.from(ft.values())}function Wi(qe){return st.apply(this,arguments)}function st(){return(st=(0,g.Z)(function*(qe){const be=qe.name;ft.has(be)&&(ft.delete(be),yield Promise.all(qe.container.getProviders().map(Ke=>Ke.delete())),qe.isDeleted=!0)})).apply(this,arguments)}function Br(qe,be,Ke){var ut;let Ot=null!==(ut=rt[qe])&&void 0!==ut?ut:qe;Ke&&(Ot+=`-${Ke}`);const Mt=Ot.match(/\s|\//),U=be.match(/\s|\//);if(Mt||U){const L=[`Unable to register library "${Ot}" with version "${be}":`];return Mt&&L.push(`library name "${Ot}" contains illegal characters (whitespace or "/")`),Mt&&U&&L.push("and"),U&&L.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void ue.warn(L.join(" "))}Xt(new Z.wA(`${Ot}-version`,()=>({library:Ot,version:be}),"VERSION"))}function Yn(qe,be){if(null!==qe&&"function"!=typeof qe)throw ai.create("invalid-log-argument");(0,O.Am)(qe,be)}function Un(qe){(0,O.Ub)(qe)}const dn="firebase-heartbeat-store";let Qn=null;function gs(){return Qn||(Qn=(0,ae.X3)("firebase-heartbeat-database",1,(qe,be)=>{0===be&&qe.createObjectStore(dn)}).catch(qe=>{throw ai.create("storage-open",{originalErrorMessage:qe.message})})),Qn}function Vt(){return(Vt=(0,g.Z)(function*(qe){try{return(yield gs()).transaction(dn).objectStore(dn).get(ir(qe))}catch(be){throw ai.create("storage-get",{originalErrorMessage:be.message})}})).apply(this,arguments)}function et(qe,be){return _t.apply(this,arguments)}function _t(){return(_t=(0,g.Z)(function*(qe,be){try{const ut=(yield gs()).transaction(dn,"readwrite");return yield ut.objectStore(dn).put(be,ir(qe)),ut.complete}catch(Ke){throw ai.create("storage-set",{originalErrorMessage:Ke.message})}})).apply(this,arguments)}function ir(qe){return`${qe.name}!${qe.options.appId}`}class Hs{constructor(be){this.container=be,this._heartbeatsCache=null;const Ke=this.container.getProvider("app").getImmediate();this._storage=new at(Ke),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var be=this;return(0,g.Z)(function*(){const ut=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ot=fr();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==Ot&&!be._heartbeatsCache.heartbeats.some(Mt=>Mt.date===Ot))return be._heartbeatsCache.heartbeats.push({date:Ot,agent:ut}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(Mt=>{const U=new Date(Mt.date).valueOf();return Date.now()-U<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,g.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Ke=fr(),{heartbeatsToSend:ut,unsentEntries:Ot}=function sr(qe,be=1024){const Ke=[];let ut=qe.slice();for(const Ot of qe){const Mt=Ke.find(U=>U.agent===Ot.agent);if(Mt){if(Mt.dates.push(Ot.date),pr(Ke)>be){Mt.dates.pop();break}}else if(Ke.push({agent:Ot.agent,dates:[Ot.date]}),pr(Ke)>be){Ke.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:Ke,unsentEntries:ut}}(be._heartbeatsCache.heartbeats),Mt=(0,ae.L)(JSON.stringify({version:2,heartbeats:ut}));return be._heartbeatsCache.lastSentHeartbeatDate=Ke,Ot.length>0?(be._heartbeatsCache.heartbeats=Ot,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Mt})()}}function fr(){return(new Date).toISOString().substring(0,10)}class at{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,g.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function Xo(qe){return Vt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Ke=this;return(0,g.Z)(function*(){var ut;if(yield Ke._canUseIndexedDBPromise){const Mt=yield Ke.read();return et(Ke.app,{lastSentHeartbeatDate:null!==(ut=be.lastSentHeartbeatDate)&&void 0!==ut?ut:Mt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Ke=this;return(0,g.Z)(function*(){var ut;if(yield Ke._canUseIndexedDBPromise){const Mt=yield Ke.read();return et(Ke.app,{lastSentHeartbeatDate:null!==(ut=be.lastSentHeartbeatDate)&&void 0!==ut?ut:Mt.lastSentHeartbeatDate,heartbeats:[...Mt.heartbeats,...be.heartbeats]})}})()}}function pr(qe){return(0,ae.L)(JSON.stringify({version:2,heartbeats:qe})).length}!function Nt(qe){Xt(new Z.wA("platform-logger",be=>new J(be),"PRIVATE")),Xt(new Z.wA("heartbeat",be=>new Hs(be),"PRIVATE")),Br(se,"0.7.20",qe),Br(se,"0.7.20","esm2017"),Br("fire-js","")}("")},4859:(nt,Ce,k)=>{k.d(Ce,{wA:()=>O,H0:()=>ce});var g=k(5861),Z=k(2090);class O{constructor(B,j,Q){this.name=B,this.instanceFactory=j,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ae="[DEFAULT]";class J{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Q=new Z.BH;if(this.instancesDeferred.set(j,Q),this.isInitialized(j)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:j});He&&Q.resolve(He)}catch(He){}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Q=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),He=null!==(j=null==B?void 0:B.optional)&&void 0!==j&&j;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Te){if(He)return null;throw Te}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function se(ue){return"EAGER"===ue.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(j){}for(const[j,Q]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:He});Q.resolve(Te)}catch(Te){}}}}clearInstance(B=ae){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...j.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ae){return this.instances.has(B)}getOptions(B=ae){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Q=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Q,options:j});for(const[Te,xe]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Te)&&xe.resolve(He);return He}onInit(B,j){var Q;const He=this.normalizeInstanceIdentifier(j),Te=null!==(Q=this.onInitCallbacks.get(He))&&void 0!==Q?Q:new Set;Te.add(B),this.onInitCallbacks.set(He,Te);const xe=this.instances.get(He);return xe&&B(xe,He),()=>{Te.delete(B)}}invokeOnInitCallbacks(B,j){const Q=this.onInitCallbacks.get(j);if(Q)for(const He of Q)try{He(B,j)}catch(Te){}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Q=this.instances.get(B);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=B,ue===ae?void 0:ue),options:j}),this.instances.set(B,Q),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Q,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Q)}catch(He){}var ue;return Q||null}normalizeInstanceIdentifier(B=ae){return this.component?this.component.multipleInstances?B:ae:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new J(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(nt,Ce,k)=>{k.d(Ce,{in:()=>Z,Yd:()=>se,Ub:()=>ce,Am:()=>ue});const g=[];var Z=(()=>{return(B=Z||(Z={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",Z;var B})();const O={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},ae=Z.INFO,J={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},pe=(B,j,...Q)=>{if(j<B.logLevel)return;const He=(new Date).toISOString(),Te=J[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${He}]  ${B.name}:`,...Q)};class se{constructor(j){this.name=j,this._logLevel=ae,this._logHandler=pe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Z))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...j),this._logHandler(this,Z.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...j),this._logHandler(this,Z.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...j),this._logHandler(this,Z.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...j),this._logHandler(this,Z.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...j),this._logHandler(this,Z.ERROR,...j)}}function ce(B){g.forEach(j=>{j.setLogLevel(B)})}function ue(B,j){for(const Q of g){let He=null;j&&j.level&&(He=O[j.level]),Q.userLogHandler=null===B?null:(Te,xe,...ke)=>{const de=ke.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch(Ze){return null}}).filter(Ee=>Ee).join(" ");xe>=(null!=He?He:Te.logLevel)&&B({level:Z[xe].toLowerCase(),message:de,args:ke,type:Te.name})}}}},5861:(nt,Ce,k)=>{function g(O,ae,J,pe,se,ce,ue){try{var B=O[ce](ue),j=B.value}catch(Q){return void J(Q)}B.done?ae(j):Promise.resolve(j).then(pe,se)}function Z(O){return function(){var ae=this,J=arguments;return new Promise(function(pe,se){var ce=O.apply(ae,J);function ue(j){g(ce,pe,se,ue,B,"next",j)}function B(j){g(ce,pe,se,ue,B,"throw",j)}ue(void 0)})}}k.d(Ce,{Z:()=>Z})}},nt=>{nt(nt.s=617)}]);